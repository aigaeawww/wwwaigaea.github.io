import{_ as N,b as O,c as z}from"./el-pagination.01abb38e.js";import{E as M,_ as j}from"./el-overlay.1d307549.js";import{d as F,z as I,r as L,O as A,J as q,g as G,o as s,C as b,x as n,v as u,b as l,D as J,e as _,B as h,q as E,t as p,c,I as W,F as K,k as Q,l as Y,L as Z}from"./entry.f105df37.js";import"./el-checkbox.00032e92.js";import"./el-popper.ac949242.js";import{v as ee}from"./el-loading.ce515ce7.js";import{c as te}from"./training.9d46b72d.js";import{e as w}from"./dict.6e5b07a6.js";import{_ as oe}from"./plugin-vueexport-helper.c27b6911.js";import"./el-input.b010e971.js";import"./use-form-item.ecbcfbcd.js";import"./verification.fd8b49e2.js";import"./debounce.e1ecbbcb.js";import"./validator.59a6b518.js";import"./commonjsHelpers.042e6b4d.js";import"./-initCloneObject.0972cb9e.js";import"./Emocoords.712b663a.js";import"./Decisions.b4f8aeb9.js";import"./istpPersonality.74cd3ea6.js";import"./fan.381c77a5.js";import"./Refresh.aadf4083.js";import"./el-button.99f697ac.js";import"./utils.6576f7a5.js";import"./throttle.e6b946ec.js";import"./marked.esm.410c1570.js";import"./Prompt.b210f963.js";import"./ticket.659f1e5e.js";import"./ticket-min.48f46d8b.js";import"./nuxt-link.20421bf8.js";import"./useContract.b0b1c6d7.js";import"./-vite-browser-externalcommonjs-proxy.005f2268.js";import"./checkBalance.bc099f32.js";import"./godhoodId.02d7f61d.js";import"./Ruledetails.3cac7444.js";import"./Advancing.5e80cd42.js";import"./Balancing.6a1d0d0a.js";import"./Leaping.a90acabd.js";import"./Safeguarding.f2037f3f.js";import"./Footer.vuevuetypescriptsetuptruelang.cd3876f6.js";const re=""+globalThis.__publicAssetsURL("images/aicivilization/prophetReward.png"),k=f=>(Q("data-v-035b675d"),f=f(),Y(),f),se={class:"flex flex-col items-center pb-8 space-y-6"},ae=k(()=>l("p",{class:"text-[34px] font-bold text-[#EBEBEB] text-center"},"Strategy History",-1)),ie={class:"uppercase"},ne={class:"uppercase"},ce={class:"space-x-1 flex items-center justify-center"},le=["src"],pe={key:1},de={key:0},_e={key:0},me={key:0},ue={key:1},he={key:1},fe=k(()=>l("div",{class:"flex items-center space-x-1"},[l("div",{class:"w-8 h-8"},[l("img",{src:re,class:"w-full h-full object-contain"})]),l("span",null,"Prophet Reward")],-1)),ge={key:0},ye={key:0},be={key:1},we=F({__name:"StrategyHistory",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(f,{emit:B}){const P=I(),g=L(!1),R=A(),d=q({content:[]}),y=e=>e?Math.floor(e*100)/100:0,S=e=>e?Math.floor(e):0,T=e=>{const o=d.content.filter(r=>r.epoch_id===e);return o.length>0&&o.every(r=>r.user_choice===r.mainstream)},C=e=>{const o=d.content.filter(r=>r.epoch_id===e);return o.length>0&&o.every(r=>r.user_choice>0&&r.user_choice!==r.eliminated)},D=e=>{const o=C(e),r=T(e);let a="";if(o&&r){const i=d.content.find(m=>m.epoch_id===e);i&&(a=`${i.epoch_average_box} BOX + ${y(i.epoch_average_usd/1e6)}U +40EXP`)}else if(o){const i=d.content.find(m=>m.epoch_id===e);i&&(a=`${i.epoch_average_box} BOX + 10EXP`)}else if(r){const i=d.content.find(m=>m.epoch_id===e);i&&(a=`-${y(i.epoch_average_usd/1e6)}U +40EXP`)}else a="-";return a},v=G(()=>e=>{if(e.user_choice)return e.user_choice===e.eliminated?"Elimination":e.user_choice===e.mainstream?"Evolution":e.user_choice!==e.eliminated?"Survival":"-"}),X=async()=>{var e;try{if(!P.getToken)return;g.value=!0;const o=await te({chain_id:(e=R.getWeb3ConfigItem)==null?void 0:e.chain_id});o.code===200?d.content=o.data:Z.error(o.msg)}catch{}finally{g.value=!1}},$=(e,o)=>o===0?!0:d.content[o-1].epoch_id!==e.epoch_id,H=()=>{X()},x=()=>{B("update:closeDialog")};return(e,o)=>{const r=N,a=O,i=z,m=M,U=j,V=ee;return s(),b(U,null,{default:n(()=>[u(m,{class:"border-box",draggable:"","model-value":e.$props.dialogVisible,"show-close":!1,width:"70%",style:{background:"rgba(0, 0, 0, 0.85)",border:"2px solid #2B2B2B","border-radius":"20px","padding-bottom":"10px"},"align-center":"",onOpen:H,onClose:x,"append-to-body":!1},{default:n(()=>[l("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:x}),l("div",se,[ae,J((s(),b(i,{data:_(d).content,style:{width:"100%"},"max-height":"400px",border:""},{empty:n(()=>[_(g)?h("",!0):(s(),b(r,{key:0}))]),default:n(()=>[u(a,{label:"Epoch-Era",align:"center",width:"120px"},{default:n(t=>[E(" #"+p(t.row.epoch_id)+"-"+p(t.row.phase_id),1)]),_:1}),u(a,{prop:"eliminated",label:"Elimination",align:"center","max-width":"130px"},{default:n(t=>[l("span",ie,p(("batType"in e?e.batType:_(w))(t.row.eliminated)[0]),1)]),_:1}),u(a,{prop:"mainstream",label:"Evolution",align:"center","max-width":"120px"},{default:n(t=>[l("span",ne,p(("batType"in e?e.batType:_(w))(t.row.mainstream)[0]),1)]),_:1}),u(a,{prop:"user_choice",label:"My Strategy",align:"center"},{default:n(t=>[l("div",ce,[t.row.user_choice>0?(s(),c("img",{key:0,src:`/images/aicivilization/${_(v)(t.row)}.png`,alt:"",class:"w-4 aspect-[1/1] object-contain"},null,8,le)):h("",!0),l("span",{class:W(["uppercase",_(v)(t.row)])},p(("batType"in e?e.batType:_(w))(t.row.user_choice)[0]),3),t.row.user_choice>0?(s(),c("span",pe," (-"+p(t.row.user_soul)+"SP)",1)):h("",!0)])]),_:1}),u(a,{prop:"",label:"Reward",align:"center"},{default:n(t=>[t.row.user_choice>0?(s(),c("span",de,[t.row.eliminated===t.row.user_choice?(s(),c("span",_e,"1BOX")):(s(),c(K,{key:1},[E(p(S(t.row.phase_average_soul/100*t.row.user_soul))+"SP ",1),t.row.mainstream===t.row.user_choice?(s(),c("span",me," + "+p(y(t.row.phase_average_usd/1e6))+"U + 3EXP ",1)):t.row.user_choice!==t.row.eliminated?(s(),c("span",ue," + 1EXP ")):h("",!0)],64))])):(s(),c("span",he,"-"))]),_:1}),u(a,{prop:"id",label:"Prophet Reward",align:"center"},{header:n(()=>[fe]),default:n(t=>[t.row.phase_id===3?(s(),c("div",ge,[$(t.row,t.$index)?(s(),c("span",ye,p(D(t.row.epoch_id)),1)):(s(),c("span",be,"-"))])):h("",!0)]),_:1})]),_:1},8,["data"])),[[V,_(g)]])])]),_:1},8,["model-value"])]),_:1})}}});const it=oe(we,[["__scopeId","data-v-035b675d"]]);export{it as default};
