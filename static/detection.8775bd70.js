import{E as B}from"./el-input.b010e971.js";import{E as T}from"./el-button.99f697ac.js";import{d as v,r,z as x,O as h,h as w,o as p,c as u,e as l,F as V,v as i,K as C,x as f,q as g,B as I,M as U,L}from"./entry.f105df37.js";import{a as M,b as N}from"./user.e7427feb.js";import"./use-form-item.ecbcfbcd.js";const P={class:"text-[#EBEBEB] adaptation-padding flex items-center space-x-2 py-10"},z=v({__name:"detection",setup(b){const a=r(""),d=r(""),n=r(!1),o=x(),E=h(),_=async()=>{try{n.value=!0;const e=await M(a.value);e.code===200?(E.clearGodhoodInfo(),o.setTempToken(o.getToken),o.setToken(e.data.token),c(),U("/")):L.error(e.msg||e.message)}catch{}finally{n.value=!1}},c=async()=>{try{if(!o.getToken)return;const e=await N();e&&e.code===200&&await o.setUserInfo({...e.data})}catch{}},k=()=>{o.setToken(o.getTempToken),c()};return w(()=>{d.value=window.location.hostname}),(e,t)=>{const y=B,m=T;return p(),u("div",P,[l(d)!=="app.aigaea.net"?(p(),u(V,{key:0},[i(y,{modelValue:l(a),"onUpdate:modelValue":t[0]||(t[0]=s=>C(a)?a.value=s:null),style:{width:"240px"},placeholder:"Please input"},null,8,["modelValue"]),i(m,{type:"primary",color:"#EBEBEB",onClick:t[1]||(t[1]=s=>_()),loading:l(n)},{default:f(()=>[g("Temporary token ")]),_:1},8,["loading"]),i(m,{type:"primary",color:"#EBEBEB",onClick:t[2]||(t[2]=s=>k())},{default:f(()=>[g("restore")]),_:1})],64)):I("",!0)])}}});export{z as default};
