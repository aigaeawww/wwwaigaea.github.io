import{d as defineComponent,o as openBlock,c as createElementBlock,b as createBaseVNode,t as toDisplayString,f as defineStore,r as ref,g as computed,p as persistedState,s as shallowRef,w as watch,h as onMounted,n as nextTick,i as onBeforeUnmount,j as useNuxtApp,k as pushScopeId,l as popScopeId,m as normalizeStyle,e as unref,q as createTextVNode,v as createVNode,x as withCtx,y as createStaticVNode,G as Get,z as useUserPinia,A as onUnmounted,B as createCommentVNode,T as Transition,F as Fragment,C as createBlock,D as withDirectives,E as vShow,H as renderList,I as normalizeClass,J as reactive,K as isRef,L as ElMessage,M as navigateTo,N as defineAsyncComponent,_ as __vitePreload}from"./entry.f105df37.js";import{_ as __nuxt_component_0$1}from"./Refresh.aadf4083.js";import{_ as _export_sfc}from"./plugin-vueexport-helper.c27b6911.js";import __nuxt_component_3 from"./Prompt.b210f963.js";import{_ as __nuxt_component_0}from"./nuxt-link.20421bf8.js";import{i as isEmpty,s as stringStar,c as createCounterAnimation}from"./utils.6576f7a5.js";import{t as throttle}from"./throttle.e6b946ec.js";import{m as marked,d as debounce}from"./marked.esm.410c1570.js";import{c as createLucideIcon}from"./createLucideIcon.6b2681f3.js";import{E as ElTooltip}from"./el-popper.ac949242.js";import{E as ElOption,a as ElSelect,_ as _sfc_main$d,b as ElTableColumn,c as ElTable,d as ElPagination}from"./el-pagination.01abb38e.js";import"./el-input.b010e971.js";import{c as checkValidateTicket}from"./verification.fd8b49e2.js";import{t as ticketBoxList}from"./ticket.659f1e5e.js";import{Z as Zap}from"./zap.c85d571c.js";import{E as ElButton}from"./el-button.99f697ac.js";import{E as ElPopover}from"./el-popover.aa280b1f.js";import"./el-checkbox.00032e92.js";import{v as vLoading}from"./el-loading.ce515ce7.js";import{_ as _imports_0$1}from"./sxp.4dca6ebe.js";import{A as Activity}from"./activity.639fad18.js";import"./use-form-item.ecbcfbcd.js";import"./debounce.e1ecbbcb.js";import"./validator.59a6b518.js";import"./commonjsHelpers.042e6b4d.js";import"./-initCloneObject.0972cb9e.js";const _hoisted_1$c={class:"relative group"},_hoisted_2$c=createBaseVNode("div",{class:"absolute -top-1 -left-1 w-3 h-3 border-t border-l border-white/40 group-hover:border-white transition-colors"},null,-1),_hoisted_3$c=createBaseVNode("div",{class:"absolute -bottom-1 -right-1 w-3 h-3 border-b border-r border-white/40 group-hover:border-white transition-colors"},null,-1),_hoisted_4$b={class:"flex flex-col items-center justify-center p-4 bg-gaea-panel/50 border border-white/5 backdrop-blur-sm min-w-[90px] cursor-pointer hover:bg-white/5 transition-all clip-corner-br"},_hoisted_5$9={class:"text-[9px] text-gray-500 font-mono uppercase tracking-widest mb-1 group-hover:text-white transition-colors"},_hoisted_6$9={class:"font-display text-2xl text-white tracking-wider text-glow"},_sfc_main$c=defineComponent({__name:"MetricBox",props:{label:{default:""},value:{default:0}},setup(v){const s=v;return(g,d)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[_hoisted_2$c,_hoisted_3$c,createBaseVNode("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$9,toDisplayString(s.label),1),createBaseVNode("div",_hoisted_6$9,toDisplayString(s.value),1)])]))}}),useEmotionalDstributionPinia=defineStore("emotionalDstribution",()=>{const v=ref(),s=ref([]),g=ref(0),d=ref(!1),h=ref(0),c=ref(!1),p=ref(!1),f=ref(null),u=computed(()=>v.value),a=computed(()=>g.value),o=computed(()=>d.value),r=computed(()=>h.value),e=computed(()=>s.value),t=computed(()=>f.value),n=computed(()=>c.value),i=computed(()=>p.value);return{dstributionData:v,emotionDetectionStatus:g,cameraPermissions:d,videoTotalTime:h,visionChatData:s,cameraDevice:f,videoCompleted:c,isRetest:p,getEmotionDetectionStatus:a,getCameraPermissions:o,getDstributionData:u,getVideoTotalTime:r,getVisionChatData:e,getCameraDevice:t,getVideoCompleted:n,getIsRetest:i,setIsRetest:T=>{p.value=T},setDstributionData:T=>{v.value=T},setEmotionDetectionStatus:T=>{g.value=T},setCameraPermissions:T=>{d.value=T},setVideoTotalTime:T=>{h.value=T},setVisionChatData:T=>{s.value=T},setCameraDevice:T=>{f.value=T},setVideoCompleted:T=>{c.value=T},resetData:()=>{s.value=[],v.value=[]}}},{persist:[{storage:persistedState.cookiesWithOptions({maxAge:604800})}]}),_withScopeId$4=v=>(pushScopeId("data-v-5aad1bd6"),v=v(),popScopeId(),v),_hoisted_1$b={class:"w-full flex-1 max-h-[230px] relative py-4 mt-5"},_hoisted_2$b=_withScopeId$4(()=>createBaseVNode("div",{class:"absolute inset-0 bg-light pointer-events-none text-[#888]"},null,-1)),_hoisted_3$b=_withScopeId$4(()=>createBaseVNode("div",{id:"radarChart",class:"w-full h-full min-h-[205px]"},null,-1)),_hoisted_4$a=[_hoisted_2$b,_hoisted_3$b],_sfc_main$b=defineComponent({__name:"RadarChart",setup(v){const s=useEmotionalDstributionPinia(),{$eChart:g}=useNuxtApp(),d=shallowRef(),h=["angry","disgust","fear","happy","neutral","sad","surprise"],c=ref(null),p=()=>{if(!d.value)return;const a=s.getDstributionData||[0,0,0,0,0,0,0],o=(a==null?void 0:a.max)||Math.max(...a,1),r=h.map((n,i)=>({name:n,value:Math.round(((a==null?void 0:a[i])||0)/o*100),fullMark:100})),e=Math.max(...r.map(n=>n.value),0)||100,t=Math.max(e,10);d.value.setOption({radar:{indicator:r.map(n=>({name:n.name,max:t,padding:[0,10]}))},series:[{type:"radar",data:[{value:r.map(n=>n.value),areaStyle:{color:"#ffffff80"}}]}]})};watch(()=>s.getDstributionData,()=>{p()},{deep:!0});const f=async()=>{d.value&&d.value.dispose();const a=document.getElementById("radarChart");if(!a||a.clientWidth===0||a.clientHeight===0)return;d.value=g.init(a);const o=s.getDstributionData||[0,0,0,0,0,0,0],r=(o==null?void 0:o.max)||Math.max(...o,1),e=h.map((l,m)=>({name:l,value:Math.round(((o==null?void 0:o[m])||0)/r*100),fullMark:100})),t=Math.max(...e.map(l=>l.value),0)||100,n=Math.max(t,10),i={radar:{center:["45%","50%"],splitNumber:4,splitArea:{areaStyle:{color:"transparent"}},axisName:{color:"#888",fontSize:11,fontFamily:"monospace"},axisLine:{lineStyle:{color:"#88888889",type:"dashed"}},splitLine:{lineStyle:{color:"#88888889",type:"dashed"}},indicator:e.map(l=>({name:l.name,max:n}))},series:[{type:"radar",data:[{value:e.map(l=>l.value),areaStyle:{color:"#ffffff80"}}],lineStyle:{color:"#ebebeb"},itemStyle:{color:"none",type:"dashed"}}]};d.value.setOption(i,!0)},u=()=>{d.value&&(c.value&&clearTimeout(c.value),c.value=setTimeout(()=>{d.value.resize()},300))};return onMounted(async()=>{await nextTick(),setTimeout(f,500),window.addEventListener("resize",u,{passive:!0})}),onBeforeUnmount(()=>{d.value&&(window.removeEventListener("resize",u),d.value.dispose()),c.value&&clearTimeout(c.value)}),(a,o)=>(openBlock(),createElementBlock("div",_hoisted_1$b,_hoisted_4$a))}}),RadarChart_vue_vue_type_style_index_0_scoped_5aad1bd6_lang="",__nuxt_component_2=_export_sfc(_sfc_main$b,[["__scopeId","data-v-5aad1bd6"]]),_hoisted_1$a={class:"w-full"},_hoisted_2$a={class:"flex justify-between items-end mb-2"},_hoisted_3$a=createBaseVNode("span",{class:"text-[9px] font-mono text-gray-500 uppercase tracking-widest"},"Training Progress",-1),_hoisted_4$9={class:"font-mono text-sm text-white"},_hoisted_5$8={class:"text-glow"},_hoisted_6$8=createBaseVNode("span",{class:"text-gray-600"}," / ",-1),_hoisted_7$7={class:"text-gray-500"},_hoisted_8$7={class:"h-3 w-full bg-black border border-white/20 p-[2px] relative"},_hoisted_9$8=createBaseVNode("div",{class:"absolute right-0 top-0 bottom-0 w-[2px] bg-white shadow-[0_0_10px_white] z-10"},null,-1),_sfc_main$a=defineComponent({__name:"ProgressBar",props:{value:{default:0},max:{default:0}},setup(v){const s=v,g=computed(()=>s.value/s.max*100);return(d,h)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[_hoisted_3$a,createBaseVNode("div",_hoisted_4$9,[createBaseVNode("span",_hoisted_5$8,toDisplayString(d.value),1),_hoisted_6$8,createBaseVNode("span",_hoisted_7$7,toDisplayString(d.max),1)])]),createBaseVNode("div",_hoisted_8$7,[createBaseVNode("div",{class:"absolute inset-0 w-full h-full",style:normalizeStyle({backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.05) 4px, rgba(255,255,255,0.05) 5px)"})},null,4),createBaseVNode("div",{class:"h-full bg-white relative transition-all duration-1000 ease-out",style:normalizeStyle({width:`${unref(g)||0}%`})},[_hoisted_9$8,createBaseVNode("div",{class:"w-full h-full opacity-20",style:normalizeStyle({backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 2px, #000 2px, #000 3px)"})},null,4)],4)])]))}}),_sfc_main$9={},_hoisted_1$9={class:"absolute inset-0 w-full h-full pointer-events-none z-20 opacity-60",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$9=createBaseVNode("path",{d:"M20 20 L 50 20 L 50 21 L 21 21 L 21 50 L 20 50 Z",fill:"white"},null,-1),_hoisted_3$9=[_hoisted_2$9];function _sfc_render(v,s){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_3$9)}const __nuxt_component_5=_export_sfc(_sfc_main$9,[["render",_sfc_render]]),_hoisted_1$8={class:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md p-4"},_hoisted_2$8={class:"bg-gaea-panel bg-tech-grid border border-white/20 w-full max-w-lg relative shadow-[0_0_50px_rgba(255,255,255,0.05)] clip-corner-both"},_hoisted_3$8={class:"p-10 flex flex-col items-center relative overflow-hidden"},_hoisted_4$8=createStaticVNode('<div class="absolute top-0 left-0 w-4 h-4 border-t border-l border-white/50"></div><div class="absolute top-0 right-0 w-4 h-4 border-t border-r border-white/50"></div><div class="absolute bottom-0 left-0 w-4 h-4 border-b border-l border-white/50"></div><div class="absolute bottom-0 right-0 w-4 h-4 border-b border-r border-white/50"></div><h2 class="text-2xl font-display uppercase text-white mb-6 tracking-[0.2em] w-full text-center drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]"> Privacy Notice </h2>',5),_hoisted_9$7={class:"text-gray-400 text-xs font-mono leading-relaxed space-y-4 mb-8 text-center px-4"},_hoisted_10$7=createBaseVNode("p",null," To use this feature, you must enable camera access. ",-1),_hoisted_11$7=createBaseVNode("p",null," Your anonymized emotion feature data will be transmitted to the GAEA server in encrypted form, for training the Godhood Engine and processing your rewards. ",-1),_hoisted_12$7=createBaseVNode("p",{class:"text-white pt-2 font-bold tracking-wider"},' Click "I Accept" to continue. ',-1),_hoisted_13$5={class:"flex gap-4 w-full justify-center"},_hoisted_14$5=createBaseVNode("span",{class:"relative z-10"},"Cancel",-1),_hoisted_15$5=createBaseVNode("div",{class:"absolute inset-0 bg-white/5 translate-y-full group-hover:translate-y-0 transition-transform"},null,-1),_hoisted_16$5=[_hoisted_14$5,_hoisted_15$5],_hoisted_17$5=createBaseVNode("span",{class:"relative z-10"},"I Accept",-1),_hoisted_18$4=[_hoisted_17$5],_sfc_main$8=defineComponent({__name:"PrivacyModal",emits:["update:close","update:accept"],setup(v,{emit:s}){return(g,d)=>{const h=__nuxt_component_0;return openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$8,[_hoisted_4$8,createBaseVNode("div",_hoisted_9$7,[_hoisted_10$7,createBaseVNode("p",null,[createTextVNode(" Your camera data and all frame-by-frame emotion images will be discarded after feature extraction and will not be stored. "),createVNode(h,{to:"/technicalDocumentation",target:"_blank",rel:"noopener",class:"text-white underline cursor-pointer hover:text-blue-300"},{default:withCtx(()=>[createTextVNode(" Click here to view the technical documentation. ")]),_:1})]),_hoisted_11$7,createBaseVNode("p",null,[createTextVNode(" You can "),createVNode(h,{to:"/privacyPolicy",target:"_blank",rel:"noopener",class:"text-white underline cursor-pointer hover:text-blue-300"},{default:withCtx(()=>[createTextVNode(" click here to view GAEA's Privacy Policy. ")]),_:1})]),_hoisted_12$7]),createBaseVNode("div",_hoisted_13$5,[createBaseVNode("button",{style:{background:"none"},onClick:d[0]||(d[0]=c=>s("update:close")),class:"group w-32 py-2 border border-white/20 text-gray-400 hover:text-white hover:border-white transition-all font-display text-sm uppercase tracking-widest clip-corner-tl relative overflow-hidden"},_hoisted_16$5),createBaseVNode("button",{onClick:d[1]||(d[1]=c=>s("update:accept")),class:"group w-32 py-2 bg-white text-black font-display text-sm uppercase tracking-widest hover:bg-gray-200 transition-all clip-corner-br shadow-[0_0_15px_rgba(255,255,255,0.4)] relative overflow-hidden"},_hoisted_18$4)])])])])}}}),useLocalTracking=async()=>{if(window.tracking)return window.tracking;try{return await new Promise((v,s)=>{const g=document.createElement("script");g.src="/models/tracking-min.js",g.onload=v,g.onerror=s,document.head.appendChild(g)}),window.tracking&&await new Promise((v,s)=>{const g=document.createElement("script");g.src="/models/face-min.js",g.onload=v,g.onerror=s,document.head.appendChild(g)}),window.tracking}catch{return null}},visionList=()=>Get("/api/vision/list"),visionHistory=(v,s)=>Get(`/api/vision/history?page=${v}&limit=${s}`),visionChatHistory=()=>Get("/api/vision/chat-history"),visionClaimed=()=>Get("/api/vision/claimed"),visionTop10=v=>Get(`/api/vision/top10/${v}`),_imports_0=""+globalThis.__publicAssetsURL("images/public/smilingFace.svg");var onnx_min={exports:{}};(function(module,exports){(function(v,s){module.exports=s()})(window,function(){return function(v){var s={};function g(d){if(s[d])return s[d].exports;var h=s[d]={i:d,l:!1,exports:{}};return v[d].call(h.exports,h,h.exports,g),h.l=!0,h.exports}return g.m=v,g.c=s,g.d=function(d,h,c){g.o(d,h)||Object.defineProperty(d,h,{enumerable:!0,get:c})},g.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},g.t=function(d,h){if(1&h&&(d=g(d)),8&h||4&h&&typeof d=="object"&&d&&d.__esModule)return d;var c=Object.create(null);if(g.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:d}),2&h&&typeof d!="string")for(var p in d)g.d(c,p,function(f){return d[f]}.bind(null,p));return c},g.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return g.d(h,"a",h),h},g.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},g.p="",g(g.s=26)}([function(v,s,g){var d=this&&this.__read||function(_,b){var w=typeof Symbol=="function"&&_[Symbol.iterator];if(!w)return _;var x,S,A=w.call(_),T=[];try{for(;(b===void 0||b-- >0)&&!(x=A.next()).done;)T.push(x.value)}catch(E){S={error:E}}finally{try{x&&!x.done&&(w=A.return)&&w.call(A)}finally{if(S)throw S.error}}return T},h=this&&this.__values||function(_){var b=typeof Symbol=="function"&&Symbol.iterator,w=b&&_[b],x=0;if(w)return w.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&x>=_.length&&(_=void 0),{value:_&&_[x++],done:!_}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(s,"__esModule",{value:!0}),s.PoolConvUtil=s.ReduceUtil=s.SplitUtil=s.MathUtil=s.ShapeUtil=s.LongUtil=s.ProtoUtil=s.GemmUtil=s.arrayCopyHelper=s.BroadcastUtil=s.MatMulUtil=s.checkInputsShape=void 0;var p=c(g(13)),f=g(9),u=g(1);s.checkInputsShape=function(_){for(var b=[],w=1;w<arguments.length;w++)b[w-1]=arguments[w];if(!_||_.length!==b.length)return!1;for(var x=0;x<_.length;x++)if(!_[x].dims||_[x].dims.length!==b[x])return!1;return!0};var a=function(){function _(){}return _.preprocessInputShapes=function(b,w){return[b.length===1?[1,b[0]]:b,w.length===1?[w[0],1]:w]},_.postprocessOutputShape=function(b,w,x){w===1&&b.splice(b.length-2,1),x===1&&b.pop()},_.calcMatMulShape=function(b,w){return b[1]!==w[0]?void 0:[b[0],w[1]]},_}();s.MatMulUtil=a;var o=function(){function _(){}return _.calcShape=function(b,w,x){var S;x===void 0&&(x=!1);var A=b.length,T=w.length;if(A===0)return w;if(T===0)return b;var E=Math.max(b.length,w.length),N=new Array(E);if(x){if(A<2||T<2)return;var M=a.calcMatMulShape([b[A-2],b[A-1]],[w[T-2],w[T-1]]);if(M===void 0)return;S=d(M,2),N[E-2]=S[0],N[E-1]=S[1]}for(var j=x?3:1;j<=E;j++){var k=A-j<0?1:b[A-j],F=T-j<0?1:w[T-j];if(k!==F&&k>1&&F>1)return;N[E-j]=Math.max(k,F)}return N},_.index=function(b,w){var x=new Array(w.length);return _.fillIndex(b,w,x),x},_.fillIndex=function(b,w,x){for(var S=b.length-w.length,A=0;A<w.length;A++)x[A]=b[S+A]%w[A]},_.calc=function(b,w,x,S,A){var T=_.calcShape(b.dims,w.dims);if(T){if(S&&!n.areEqual(T,b.dims))return;var E=n.size(T),N=S?b:new u.Tensor(T,A||b.type);if(T.length===0)N.set([],x(b.get([]),w.get([])));else{var M=new Array(T.length),j=new Array(b.dims.length),k=new Array(w.dims.length),F=0,L=0,B=!1,V=!1;b.dims.length===0&&(F=b.get([]),B=!0),w.dims.length===0&&(L=w.get([]),V=!0);for(var R=void 0,z=0;z<E;z++){R=z;for(var q=T.length-1;q>=0;q--)M[q]=R%T[q],R=Math.floor(R/T[q]);B||(_.fillIndex(M,b.dims,j),F=b.get(j)),V||(_.fillIndex(M,w.dims,k),L=w.get(k)),N.set(M,x(F,L))}}return N}},_.isValidBroadcast=function(b,w){var x=b.length,S=w.length;if(x>S)return!1;for(var A=1;A<=x;A++)if(b[x-A]!==1&&b[x-A]!==w[S-A])return!1;return!0},_}();s.BroadcastUtil=o,s.arrayCopyHelper=function(_,b,w,x,S){if(x<0||x>=b.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=_.length)throw new Error("targetIndex out of bounds");if(x+S>b.length)throw new Error("source indices to be copied are outside bounds");if(w+S>_.length)throw new Error("target array is too small to hold result");for(var A=0;A<S;A++)_[w+A]=b[x+A]};var r=function(){function _(){}return _.getShapeOfGemmResult=function(b,w,x,S,A){if(b.length!==2||x.length!==2)throw new Error("shape need to be of size 2");var T,E,N;w?(T=b[1],E=b[0]):(T=b[0],E=b[1]);var M=-1;if(S?(N=x[0],M=1):(N=x[1],M=0),x[M]!==E)throw new Error("dimension mismatch");if(T<=0||N<=0||E<=0)throw new Error("invalid shape specified");if(A&&!o.isValidBroadcast(A,[T,N]))throw new Error("gemm: invalid bias shape for broadcast");return[T,N,E]},_}();s.GemmUtil=r;var e=function(){function _(){}return _.tensorDataTypeFromProto=function(b){switch(b){case f.onnx.TensorProto.DataType.INT8:return"int8";case f.onnx.TensorProto.DataType.UINT8:return"uint8";case f.onnx.TensorProto.DataType.BOOL:return"bool";case f.onnx.TensorProto.DataType.INT16:return"int16";case f.onnx.TensorProto.DataType.UINT16:return"uint16";case f.onnx.TensorProto.DataType.INT32:return"int32";case f.onnx.TensorProto.DataType.UINT32:return"uint32";case f.onnx.TensorProto.DataType.FLOAT:return"float32";case f.onnx.TensorProto.DataType.DOUBLE:return"float64";case f.onnx.TensorProto.DataType.STRING:return"string";case f.onnx.TensorProto.DataType.INT64:return"int32";case f.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: "+f.onnx.TensorProto.DataType[b])}},_.tensorDimsFromProto=function(b){return b.map(function(w){return p.default.isLong(w)?w.toNumber():w})},_.tensorValueTypeFromProto=function(b){return{tensorType:_.tensorDataTypeFromProto(b.elemType),shape:{dims:_.tensorDimsFromProto(b.shape.dim.map(function(w){return w.dimValue}))}}},_}();s.ProtoUtil=e;var t=function(){function _(){}return _.longToNumber=function(b){return p.default.isLong(b)?b.toNumber():b},_}();s.LongUtil=t;var n=function(){function _(){}return _.size=function(b){return _.getSizeFromDimensionRange(b,0,b.length)},_.sizeFromDimension=function(b,w){if(w<0||w>b.length)throw new Error("invalid dimension of "+w+" for sizeFromDimension as Tensor has "+b.length+" dimensions.");return _.getSizeFromDimensionRange(b,w,b.length)},_.sizeToDimension=function(b,w){if(w<0||w>b.length)throw new Error("invalid dimension of "+w+" for sizeToDimension as Tensor has "+b.length+" dimensions.");return _.getSizeFromDimensionRange(b,0,w)},_.getSizeFromDimensionRange=function(b,w,x){for(var S=1,A=w;A<x;A++){if(b[A]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");S*=b[A]}return S},_.computeStrides=function(b){var w=b.length;if(w===0)return[];if(w===1)return[1];var x=new Array(w);x[w-1]=1,x[w-2]=b[w-1];for(var S=w-3;S>=0;--S)x[S]=x[S+1]*b[S+1];return x},_.transpose=function(b){return b.slice().reverse()},_.indicesToOffset=function(b,w,x){x===void 0&&(x=b.length);for(var S=0,A=0;A<x;++A)S+=w[A]*b[A];return S},_.offsetToIndices=function(b,w){var x=w.length;if(x===0)return[];if(x===1)return[b*w[0]];for(var S=new Array(w.length),A=0;A<S.length-1;++A)S[A]=Math.floor(b/w[A]),b-=S[A]*w[A];return S[S.length-1]=b,S},_.normalizeAxis=function(b,w){if(b<-w&&b>=w)throw new Error("unsupported axis for this operation.");return b<0?b+w:b},_.normalizeAxes=function(b,w){var x=this;return b.map(function(S){return x.normalizeAxis(S,w)})},_.incrementIndex=function(b,w,x){if(w.length===0||b.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(x===void 0)x=w.length;else if(x<=0||x>w.length)throw new Error("Incorrect axis to increment on");for(var S=x-1;S>=0&&(b[S]++,!(b[S]<w[S]));--S)b[S]=0},_.calculateReshapedDims=function(b,w){if(w.length===0){if(b.length===0||_.size(b)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}for(var x=w.length,S=new Array(x),A=-1,T=1,E=0;E<x;E++){if(w[E]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(w[E]===-1){if(A!==-1)throw new Error("at most one dimension in shape hints can be -1");A=E}else{if(w[E]===0){if(E>=b.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");S[E]=b[E]}else S[E]=w[E];T*=S[E]}}var N=_.size(b);if(A!==-1){if(N%T!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: ["+b+"] Output shape: ["+w+"]");S[A]=N/T}else if(T!==N)throw new Error("reshapedDims and originalDims don't have matching sizes");return S},_.sortBasedOnPerm=function(b,w){return w?w.map(function(x){return b[x]}):b.slice().reverse()},_.padShape=function(b,w){var x=b.length;return b.map(function(S,A){return S+w[A]+w[A+x]})},_.areEqual=function(b,w){return b.length===w.length&&b.every(function(x,S){return x===w[S]})},_.validateDimsAndCalcSize=function(b){var w,x;if(b.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var S=1;try{for(var A=h(b),T=A.next();!T.done;T=A.next()){var E=T.value;if(!Number.isInteger(E))throw new TypeError("Invalid shape: "+E+" is not an integer");if(E<0||E>2147483647)throw new TypeError("Invalid shape: length "+E+" is not allowed");S*=E}}catch(N){w={error:N}}finally{try{T&&!T.done&&(x=A.return)&&x.call(A)}finally{if(w)throw w.error}}return S},_.flattenShape=function(b,w){w<0&&(w+=b.length);var x=b.reduce(function(A,T){return A*T},1),S=b.slice(w).reduce(function(A,T){return A*T},1);return[x/S,S]},_.squeezeShape=function(b,w){var x=new Array;w=_.normalizeAxes(w,b.length);for(var S=0;S<b.length;S++){var A=w.indexOf(S)>=0;if(A&&b[S]!==1)throw new Error("squeeze an axis of size different than 1");(w.length===0&&b[S]>1||w.length>0&&!A)&&x.push(b[S])}return x},_.unsqueezeShape=function(b,w){var x=new Array(b.length+w.length);x.fill(0);for(var S=0;S<w.length;S++){var A=_.normalizeAxis(w[S],b.length);if(A>=x.length)throw new Error("'axes' has an out of range axis");if(x[A]!==0)throw new Error("'axes' has a duplicate axis");x[A]=1}var T=0;for(S=0;S<x.length;S++)x[S]===0&&(x[S]=b[T++]);if(T!==b.length)throw new Error("the unsqueezed dimension could not be established");return x},_}();s.ShapeUtil=n;var i=function(){function _(){}return _.sqr=function(b,w,x,S,A){if(S<0||S>=w.length)throw new Error("sourceIndex out of bounds");if(x<0||x>=b.length)throw new Error("targetIndex out of bounds");if(S+A>w.length)throw new Error("source indices to be copied are outside bounds");if(x+A>b.length)throw new Error("target array is too small to hold result");for(var T=0;T<A;T++)b[x+T]+=Math.pow(w[S+T],2)},_.axpy=function(b,w,x,S,A,T){if(S<0||S>=w.length)throw new Error("sourceIndex out of bounds");if(x<0||x>=b.length)throw new Error("targetIndex out of bounds");if(S+A>w.length)throw new Error("source indices to be copied are outside bounds");if(x+A>b.length)throw new Error("target array is too small to hold result");for(var E=0;E<A;E++)b[x+E]+=T*w[S+E]},_.powx=function(b,w,x,S,A,T){if(S<0||S>=w.length)throw new Error("sourceIndex out of bounds");if(x<0||x>=b.length)throw new Error("targetIndex out of bounds");if(S+A>w.length)throw new Error("source indices to be copied are outside bounds");if(x+A>b.length)throw new Error("target array is too small to hold result");for(var E=0;E<A;E++)b[x+E]=Math.pow(w[S+E],T)},_.mul=function(b,w,x,S,A){if(S<0||S>=w.length)throw new Error("sourceIndex out of bounds");if(x<0||x>=b.length)throw new Error("targetIndex out of bounds");if(S+A>w.length)throw new Error("source indices to be copied are outside bounds");if(x+A>b.length)throw new Error("target array is too small to hold result");for(var T=0;T<A;T++)b[x+T]=w[S+T]*b[x+T]},_}();s.MathUtil=i;var l=function(){function _(){}return _.splitShape=function(b,w,x,S){if(x.length===0){if(!S)throw new Error("need to know number of outputs when the 'split' attribute is not specified");_.determineSplit(b[w],S,x)}for(var A=[],T=[0],E=0;E<x.length;++E){E!==0&&T.push(T[E-1]+x[E-1]);var N=b.slice();N[w]=x[E],A.push(N)}return[A,T]},_.determineSplit=function(b,w,x){if(b%w!=0)throw new Error("cannot split tensor to equal sized parts");for(var S=0;S<w;++S)x.push(b/w)},_}();s.SplitUtil=l;var m=function(){function _(){}return _.calcReduce=function(b,w,x,S,A){var T=b.dims.slice(0);w.length===0&&T.forEach(function(V,R){return w.push(R)});for(var E=_.calcReduceShape(T,w,!0),N=n.size(E),M=new u.Tensor(E,b.type),j=n.computeStrides(E),k=n.computeStrides(T),F=new Array(T.length),L=0;L<N;L++){var B=n.offsetToIndices(L,j);o.fillIndex(B,T,F),M.set(B,_.calcReduceByAxis(b.numberData,w,T,0,n.indicesToOffset(F,k),S,A))}return x?M:new u.Tensor(_.calcReduceShape(T,w,x),M.type,void 0,void 0,M.data,M.dataId)},_.calcReduceByAxis=function(b,w,x,S,A,T,E){var N=0;if(S>=w.length)return T(b[A]);for(var M=w[S],j=M>=x.length?1:n.size(x.slice(M+1)),k=0;k<x[M];k++)N=k===0?_.calcReduceByAxis(b,w,x,S+1,A,T,E):E(N,_.calcReduceByAxis(b,w,x,S+1,A,T,E)),A+=j;return N},_.calcReduceShape=function(b,w,x){for(var S=b.slice(),A=0;A<w.length;A++)S[w[A]]=x?1:0;return S.filter(function(T){return T!==0})},_}();s.ReduceUtil=m;var y=function(){function _(){}return _.adjustPoolAttributes=function(b,w,x,S,A){if(!b&&x.length!==w.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(b)for(var T=0;T<w.length-2;T++)T>=x.length?x.push(w[T+2]):x[T]=w[T+2];for(T=0;T<x.length;T++)if(T<S.length){if(S[T]<0)throw new Error("strides should be greater than or equal to 1")}else S.push(1);for(T=0;T<2*x.length;T++)if(T<A.length){if(A[T]<0)throw new Error("pad should be greater than or equal to 1")}else A.push(0);for(T=0;T<x.length;T++){if(x[T]<=0)throw new Error("kernel shapes need to be greater than 0");if(A[T]>=x[T]||A[T+x.length]>=x[T])throw new Error("pads should be smaller than kernel")}},_.adjustPadsBasedOnAutoPad=function(b,w,x,S,A,T){if(T){if(A.length!==2*(b.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(w.length!==b.length-2)throw new Error("length of strides should be the length of data dimensions");if(S.length!==b.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var E=0;E<b.length-2;E++)_.adjustPadAndReturnShape(b[E+2],w[E],x[E],S[E],A,E,E+b.length-2,T)}},_.computePoolOutputShape=function(b,w,x,S,A,T){if(w.length<=0)throw new Error("input shape must be of size greater than 0");var E=[w[0],w[1]],N=new Array(S.length).fill(1);return _.computeShapeHelper(b,w,E,x,N,S,A,T),E},_.computeConvOutputShape=function(b,w,x,S,A,T,E){if(b.length<=0||w.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var N=[b[0],w[0]];return _.computeShapeHelper(!1,b,N,x,S,A,T,E),N},_.computeShapeHelper=function(b,w,x,S,A,T,E,N){if(b)for(var M=0;M<w.length-2;M++)x.push(1);else for(M=0;M<w.length-2;M++)x.push(_.adjustPadAndReturnShape(w[M+2],S[M],A[M],T[M],E,M,M+w.length-2,N))},_.adjustPadAndReturnShape=function(b,w,x,S,A,T,E,N){var M=x*(S-1)+1;if(!N||N==="NOTSET")return Math.floor((b+A[T]+A[E]-M)/w+1);switch(N){case"VALID":return A[T]=0,A[E]=0,Math.floor((b-M)/w+1);case"SAME_LOWER":case"SAME_UPPER":if(x!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var j=((b+w-1)/w-1)*w+S-b;return A[T]=Math.floor(N==="SAME_LOWER"?(j+1)/2:j/2),A[E]=j-A[T],Math.floor((b+j-S)/w+1);default:throw new Error("Unsupported AutoPad type")}},_}();s.PoolConvUtil=y},function(v,s,g){(function(d){var h=this&&this.__awaiter||function(n,i,l,m){return new(l||(l=Promise))(function(y,_){function b(S){try{x(m.next(S))}catch(A){_(A)}}function w(S){try{x(m.throw(S))}catch(A){_(A)}}function x(S){var A;S.done?y(S.value):(A=S.value,A instanceof l?A:new l(function(T){T(A)})).then(b,w)}x((m=m.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var l,m,y,_,b={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(x){return function(S){return function(A){if(l)throw new TypeError("Generator is already executing.");for(;b;)try{if(l=1,m&&(y=2&A[0]?m.return:A[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,A[1])).done)return y;switch(m=0,y&&(A=[2&A[0],y.value]),A[0]){case 0:case 1:y=A;break;case 4:return b.label++,{value:A[1],done:!1};case 5:b.label++,m=A[1],A=[0];continue;case 7:A=b.ops.pop(),b.trys.pop();continue;default:if(y=b.trys,!((y=y.length>0&&y[y.length-1])||A[0]!==6&&A[0]!==2)){b=0;continue}if(A[0]===3&&(!y||A[1]>y[0]&&A[1]<y[3])){b.label=A[1];break}if(A[0]===6&&b.label<y[1]){b.label=y[1],y=A;break}if(y&&b.label<y[2]){b.label=y[2],b.ops.push(A);break}y[2]&&b.ops.pop(),b.trys.pop();continue}A=i.call(n,b)}catch(T){A=[6,T],m=0}finally{l=y=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([x,S])}}},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(s,"__esModule",{value:!0}),s.Tensor=void 0;var f=p(g(13)),u=g(9),a=g(0),o=function(){function n(i,l,m,y,_,b){b===void 0&&(b={}),this.dims=i,this.type=l,this.dataProvider=m,this.asyncDataProvider=y,this.cache=_,this.dataId=b,this.size=a.ShapeUtil.validateDimsAndCalcSize(i);var w=this.size,x=m===void 0&&y===void 0&&_===void 0;if(_!==void 0&&_.length!==w)throw new RangeError("Input dims doesn't match data length.");if(l==="string"){if(!(_===void 0||Array.isArray(_)&&_.every(function(T){return typeof T=="string"})))throw new TypeError("cache should be a string array");x&&(_=new Array(w))}else{if(_!==void 0){var S=r(l);if(!(_ instanceof S))throw new TypeError("cache should be type "+S.name)}if(x){var A=new ArrayBuffer(w*function(T){switch(T){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type "+T)}}(l));this.cache=function(T,E){return new(r(E))(T)}(A,l)}}}return Object.defineProperty(n.prototype,"data",{get:function(){if(this.cache===void 0){var i=this.dataProvider(this.dataId);if(i.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=i}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stringData",{get:function(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"numberData",{get:function(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),n.prototype.get=function(i){return this.data[a.ShapeUtil.indicesToOffset(i,this.strides)]},n.prototype.set=function(i,l){this.data[a.ShapeUtil.indicesToOffset(i,this.strides)]=l},n.prototype.getData=function(){return h(this,void 0,void 0,function(){var i;return c(this,function(l){switch(l.label){case 0:return this.cache!==void 0?[3,2]:(i=this,[4,this.asyncDataProvider(this.dataId)]);case 1:i.cache=l.sent(),l.label=2;case 2:return[2,this.cache]}})})},Object.defineProperty(n.prototype,"strides",{get:function(){return this._strides||(this._strides=a.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),n.fromProto=function(i){if(!i)throw new Error("cannot construct Value from an empty tensor");var l=a.ProtoUtil.tensorDataTypeFromProto(i.dataType),m=new n(a.ProtoUtil.tensorDimsFromProto(i.dims),l);if(l==="string")i.stringData.forEach(function(N,M){var j=d.from(N.buffer,N.byteOffset,N.byteLength);m.data[M]=j.toString()});else if(i.rawData&&typeof i.rawData.byteLength=="number"&&i.rawData.byteLength>0){var y=m.data,_=new DataView(i.rawData.buffer,i.rawData.byteOffset,i.rawData.byteLength),b=function(N){switch(N){case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.BOOL:return 1;case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT16:return 2;case u.onnx.TensorProto.DataType.FLOAT:case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.UINT32:return 4;case u.onnx.TensorProto.DataType.INT64:case u.onnx.TensorProto.DataType.DOUBLE:case u.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type "+u.onnx.TensorProto.DataType[N])}}(i.dataType),w=i.rawData.byteLength/b;if(i.rawData.byteLength%b!=0)throw new Error("invalid buffer length");if(y.length!==w)throw new Error("buffer length mismatch");for(var x=0;x<w;x++){var S=t(_,i.dataType,x*b);y[x]=S}}else{var A=void 0;switch(i.dataType){case u.onnx.TensorProto.DataType.FLOAT:A=i.floatData;break;case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.INT16:case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.BOOL:A=i.int32Data;break;case u.onnx.TensorProto.DataType.INT64:A=i.int64Data;break;case u.onnx.TensorProto.DataType.DOUBLE:A=i.doubleData;break;case u.onnx.TensorProto.DataType.UINT32:case u.onnx.TensorProto.DataType.UINT64:A=i.uint64Data;break;default:throw new Error("unspecific error")}if(A==null)throw new Error("failed to populate data from a tensorproto value");var T=m.data;if(T.length!==A.length)throw new Error("array length mismatch");for(x=0;x<A.length;x++){var E=A[x];f.default.isLong(E)?T[x]=e(E,i.dataType):T[x]=E}}return m},n.fromData=function(i,l,m){return new n(l,m,void 0,void 0,i)},n}();function r(n){switch(n){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function e(n,i){if(i===u.onnx.TensorProto.DataType.INT64){if(n.greaterThanOrEqual(2147483648)||n.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(i!==u.onnx.TensorProto.DataType.UINT32&&i!==u.onnx.TensorProto.DataType.UINT64)throw new TypeError("not a LONG type: "+u.onnx.TensorProto.DataType[i]);if(n.greaterThanOrEqual(4294967296)||n.lessThan(0))throw new TypeError("uint64 is not supported")}return n.toNumber()}function t(n,i,l){switch(i){case u.onnx.TensorProto.DataType.BOOL:case u.onnx.TensorProto.DataType.UINT8:return n.getUint8(l);case u.onnx.TensorProto.DataType.INT8:return n.getInt8(l);case u.onnx.TensorProto.DataType.UINT16:return n.getUint16(l,!0);case u.onnx.TensorProto.DataType.INT16:return n.getInt16(l,!0);case u.onnx.TensorProto.DataType.FLOAT:return n.getFloat32(l,!0);case u.onnx.TensorProto.DataType.INT32:return n.getInt32(l,!0);case u.onnx.TensorProto.DataType.UINT32:return n.getUint32(l,!0);case u.onnx.TensorProto.DataType.INT64:return e(f.default.fromBits(n.getUint32(l,!0),n.getUint32(l+4,!0),!1),i);case u.onnx.TensorProto.DataType.DOUBLE:return n.getFloat64(l,!0);case u.onnx.TensorProto.DataType.UINT64:return e(f.default.fromBits(n.getUint32(l,!0),n.getUint32(l+4,!0),!0),i);default:throw new Error("cannot read from DataView for type "+u.onnx.TensorProto.DataType[i])}}s.Tensor=o}).call(this,g(12).Buffer)},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.getDefaultFragShaderMain=s.getFragShaderPreamble=s.getVertexShaderSource=s.getGlsl=void 0;var d={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},h={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function c(p){return p===1?d:h}s.getGlsl=c,s.getVertexShaderSource=function(p){var f=c(p);return f.version+`
      precision highp float;
      `+f.attribute+` vec3 position;
      `+f.attribute+` vec2 textureCoord;

      `+f.varyingVertex+` vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},s.getFragShaderPreamble=function(p){var f=c(p);return f.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+f.varyingFrag+` vec2 TexCoords;
    `+f.outputDeclaration+`

    `},s.getDefaultFragShaderMain=function(p,f){return`
  void main() {
    int indices[`+f+`];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    `+c(p).output+` = result;
  }
  `}},function(v,s,g){var d,h;Object.defineProperty(s,"__esModule",{value:!0}),s.now=s.Profiler=s.Logger=void 0;var c=function(){function l(){}return l.prototype.log=function(m,y,_){},l}(),p=function(){function l(){}return l.prototype.log=function(m,y,_){},l.prototype.color=function(m){switch(m){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";default:throw new Error("unsupported severity: "+m)}},l}(),f={verbose:1e3,info:2e3,warning:4e3,error:5e3},u=((d={}).none=new c,d.console=new p,d),a={provider:"console",minimalSeverity:"info",logDateTime:!0,logSourceLocation:!1},o=((h={})[""]=a,h);function r(l,m,y,_){if(m===void 0)return b=l,{verbose:r.verbose.bind(null,b),info:r.info.bind(null,b),warning:r.warning.bind(null,b),error:r.error.bind(null,b)};if(y===void 0)e(l,m);else if(typeof y=="number"&&_===void 0)e(l,m);else if(typeof y=="string"&&_===void 0)e(l,y,1,m);else{if(typeof y!="string"||typeof _!="number")throw new TypeError("input is valid");e(l,y,_,m)}var b}function e(l,m,y,_){var b=o[_||""]||o[""];f[l]<f[b.minimalSeverity]||(b.logDateTime&&(m=new Date().toISOString()+"|"+m),b.logSourceLocation,u[b.provider].log(l,m,_))}(function(l){function m(_){o={},y("",_||{})}function y(_,b){if(_==="*")m(b);else{var w=o[_]||a;o[_]={provider:b.provider||w.provider,minimalSeverity:b.minimalSeverity||w.minimalSeverity,logDateTime:b.logDateTime===void 0?w.logDateTime:b.logDateTime,logSourceLocation:b.logSourceLocation===void 0?w.logSourceLocation:b.logSourceLocation}}}l.verbose=function(_,b){l("verbose",_,b)},l.info=function(_,b){l("info",_,b)},l.warning=function(_,b){l("warning",_,b)},l.error=function(_,b){l("error",_,b)},l.reset=m,l.set=y})(r||(r={})),s.Logger=r;var t=function(){function l(m,y,_,b){this.category=m,this.name=y,this.startTime=_,this.endCallback=b}return l.prototype.end=function(){this.endCallback(this)},l}(),n=function(l,m,y,_){this.category=l,this.name=m,this.startTime=y,this.endTime=_},i=function(){function l(m,y,_){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=m===void 0?1e4:m,this._flushBatchSize=y===void 0?10:y,this._flushIntervalInMilliseconds=_===void 0?5e3:_}return l.create=function(m){return m===void 0?new this:new this(m.maxNumberEvents,m.flushBatchSize,m.flushIntervalInMilliseconds)},l.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=s.now(),this._flushPointer=0},l.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},l.prototype.event=function(m,y,_){var b=this._started?this.begin(m,y):void 0,w=!1;try{var x=_();return x&&typeof x.then=="function"?(w=!0,new Promise(function(S,A){x.then(function(T){S(T),b&&b.end()},function(T){A(T),b&&b.end()})})):x}finally{!w&&b&&b.end()}},l.prototype.begin=function(m,y){var _=this;if(!this._started)throw new Error("profiler is not started yet");var b=s.now();return this.flush(b),new t(m,y,b,function(w){return _.end(w)})},l.prototype.end=function(m){if(this._timingEvents.length<this._maxNumberEvents){var y=s.now();this._timingEvents.push(new n(m.category,m.name,m.startTime,y)),this.flush(y)}},l.prototype.logOneEvent=function(m){s.Logger.verbose("Profiler."+m.category,(m.endTime-m.startTime).toFixed(2)+"ms on event '"+m.name+"' at "+m.endTime.toFixed(2))},l.prototype.flush=function(m){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||m-this._flushTime>=this._flushIntervalInMilliseconds){for(var y=this._flushPointer;this._flushPointer<y+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=s.now()}},Object.defineProperty(l.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),l}();s.Profiler=i,s.now=typeof performance<"u"&&performance.now?function(){return performance.now()}:Date.now},function(v,s,g){var d,h=this&&this.__extends||(d=function(l,m){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var b in _)_.hasOwnProperty(b)&&(y[b]=_[b])})(l,m)},function(l,m){function y(){this.constructor=l}d(l,m),l.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}),c=this&&this.__createBinding||(Object.create?function(l,m,y,_){_===void 0&&(_=y),Object.defineProperty(l,_,{enumerable:!0,get:function(){return m[y]}})}:function(l,m,y,_){_===void 0&&(_=y),l[_]=m[y]}),p=this&&this.__setModuleDefault||(Object.create?function(l,m){Object.defineProperty(l,"default",{enumerable:!0,value:m})}:function(l,m){l.default=m}),f=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var m={};if(l!=null)for(var y in l)y!=="default"&&Object.hasOwnProperty.call(l,y)&&c(m,l,y);return p(m,l),m};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmBinding=s.init=void 0;var u,a,o,r=g(3),e=f(g(103)),t=!1,n=!1;s.init=function(l,m){if(t)return Promise.resolve();if(n)throw new Error("multiple calls to 'init()' detected.");return n=!0,new Promise(function(y,_){var b,w=function(){b!==void 0&&(clearTimeout(b),b=void 0)},x=function(){w(),y(),n=!1,t=!0},S=e.init(),A=new Promise(function(M,j){b=setTimeout(function(){j("Wasm init promise failed to be resolved within set timeout")},m)});l>0?(r.Logger.verbose("WebAssembly-Workers","User has requested "+l+" Workers."),function(){return typeof window<"u"&&window.Worker!==void 0}()?(r.Logger.verbose("WebAssembly-Workers","Environment supports usage of Workers. Will spawn "+l+" Workers"),a=l):(r.Logger.error("WebAssembly-Workers","Environment does not support usage of Workers. Will not spawn workers."),a=0)):(r.Logger.verbose("WebAssembly-Workers","User has disabled usage of Workers. Will not spawn workers."),a=0);var T=new Array(a);u=new Array(a),o=new Array(a);for(var E=function(M){var j=new Promise(function(k,F){var L=g(105).default();u[M]=L,o[M]=[],L.onerror=function(B){r.Logger.error("WebAssembly-Workers","worker-"+M+" ERR: "+B),t||F()},L.onmessage=function(B){if(!(B&&B.data&&B.data.type))throw new Error("missing message type from worker");if(B.data.type==="init-success")k();else{if(B.data.type!=="ccall")throw new Error("unknown message type from worker: "+B.data.type);var V=B.data.perfData;o[M].shift()(B.data.buffer,V)}}});T[M]=j},N=0;N<a;N++)E(N);Promise.race([S,A]).then(function(){Promise.all(T).then(x,function(M){r.Logger.warning("WebAssembly-Workers","Unable to get all requested workers initialized. Will use Wasm backend with 0 workers. ERR: "+M),a=0,x()})},function(M){w(),_(M),n=!1})})};var i=function(l){function m(){return l!==null&&l.apply(this,arguments)||this}return h(m,l),m.getInstance=function(){return m.instance||(m.instance=new m),m.instance},Object.defineProperty(m,"workerNumber",{get:function(){return a},enumerable:!1,configurable:!0}),m.prototype.ccallRemote=function(y,_){for(var b=[],w=2;w<arguments.length;w++)b[w-2]=arguments[w];if(!t)throw new Error("wasm not initialized. please ensure 'init()' is called.");if(y<0||y>=a)throw new Error("invalid worker ID "+y+". should be in range [0, "+a+")");var x=[],S=m.calculateOffsets(x,b),A=new ArrayBuffer(S);m.ccallSerialize(new Uint8Array(A),x,b);var T=e.now();return u[y].postMessage({type:"ccall",func:_,buffer:A},[A]),new Promise(function(E,N){o[y].push(function(M,j){j.startTimeWorker=j.startTime,j.endTimeWorker=j.endTime,j.startTime=T,j.endTime=e.now(),m.ccallDeserialize(new Uint8Array(M),x,b),E(j)})})},m}(e.WasmBinding);s.WasmBinding=i},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.TopologicalSortGlslRoutines=s.GlslLibRoutineNode=s.GlslLibRoutine=s.GlslLib=s.GlslContext=s.FunctionType=void 0,function(u){u[u.ValueBased=0]="ValueBased",u[u.Positional=1]="Positional"}(s.FunctionType||(s.FunctionType={}));var d=function(u,a){this.glContext=u,this.programInfo=a};s.GlslContext=d;var h=function(u){this.context=u};s.GlslLib=h;var c=function(u,a){this.routineBody=u,this.dependencies=a};s.GlslLibRoutine=c;var p=function(){function u(a,o,r){this.name=a,this.dependencies=r||[],o&&(this.routineBody=o)}return u.prototype.addDependency=function(a){a&&this.dependencies.push(a)},u}();s.GlslLibRoutineNode=p;var f=function(){function u(){}return u.returnOrderedNodes=function(a){if(!a||a.length===0)return[];if(a.length===1)return a;var o=new Set,r=new Set,e=new Array;return this.createOrderedNodes(a,o,r,e),e},u.createOrderedNodes=function(a,o,r,e){for(var t=0;t<a.length;++t)this.dfsTraverse(a[t],o,r,e)},u.dfsTraverse=function(a,o,r,e){if(a&&!r.has(a.name)){if(o.has(a.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");o.add(a.name);var t=a.dependencies;if(t&&t.length>0)for(var n=0;n<t.length;++n)this.dfsTraverse(t[n],o,r,e);e.push(a),r.add(a.name),o.delete(a.name)}},u}();s.TopologicalSortGlslRoutines=f},function(v,s,g){(function(d){var h=s;function c(f,u,a){for(var o=Object.keys(u),r=0;r<o.length;++r)f[o[r]]!==void 0&&a||(f[o[r]]=u[o[r]]);return f}function p(f){function u(a,o){if(!(this instanceof u))return new u(a,o);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),o&&c(this,o)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return f}}),u.prototype.toString=function(){return this.name+": "+this.message},u}h.asPromise=g(64),h.base64=g(65),h.EventEmitter=g(66),h.float=g(67),h.inquire=g(68),h.utf8=g(69),h.pool=g(70),h.LongBits=g(71),h.global=typeof window<"u"&&window||d!==void 0&&d||typeof self<"u"&&self||this,h.emptyArray=Object.freeze?Object.freeze([]):[],h.emptyObject=Object.freeze?Object.freeze({}):{},h.isNode=!!(h.global.process&&h.global.process.versions&&h.global.process.versions.node),h.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},h.isString=function(f){return typeof f=="string"||f instanceof String},h.isObject=function(f){return f&&typeof f=="object"},h.isset=h.isSet=function(f,u){var a=f[u];return!(a==null||!f.hasOwnProperty(u))&&(typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0)},h.Buffer=function(){try{var f=h.inquire("buffer").Buffer;return f.prototype.utf8Write?f:null}catch{return null}}(),h._Buffer_from=null,h._Buffer_allocUnsafe=null,h.newBuffer=function(f){return typeof f=="number"?h.Buffer?h._Buffer_allocUnsafe(f):new h.Array(f):h.Buffer?h._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},h.Array=typeof Uint8Array<"u"?Uint8Array:Array,h.Long=h.global.dcodeIO&&h.global.dcodeIO.Long||h.global.Long||h.inquire("long"),h.key2Re=/^true|false|0|1$/,h.key32Re=/^-?(?:0|[1-9][0-9]*)$/,h.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,h.longToHash=function(f){return f?h.LongBits.from(f).toHash():h.LongBits.zeroHash},h.longFromHash=function(f,u){var a=h.LongBits.fromHash(f);return h.Long?h.Long.fromBits(a.lo,a.hi,u):a.toNumber(!!u)},h.merge=c,h.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)},h.newError=p,h.ProtocolError=p("ProtocolError"),h.oneOfGetter=function(f){for(var u={},a=0;a<f.length;++a)u[f[a]]=1;return function(){for(var o=Object.keys(this),r=o.length-1;r>-1;--r)if(u[o[r]]===1&&this[o[r]]!==void 0&&this[o[r]]!==null)return o[r]}},h.oneOfSetter=function(f){return function(u){for(var a=0;a<f.length;++a)f[a]!==u&&delete this[f[a]]}},h.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},h._configure=function(){var f=h.Buffer;f?(h._Buffer_from=f.from!==Uint8Array.from&&f.from||function(u,a){return new f(u,a)},h._Buffer_allocUnsafe=f.allocUnsafe||function(u){return new f(u)}):h._Buffer_from=h._Buffer_allocUnsafe=null}}).call(this,g(8))},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.FLOAT_TYPES=s.INT_TYPES=s.NUMBER_TYPES=void 0,s.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],s.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],s.FLOAT_TYPES=["float32","float64"]},function(v,s){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch{typeof window=="object"&&(g=window)}v.exports=g},function(v,s,g){var d=g(62),h=d.Reader,c=d.Writer,p=d.util,f=d.roots.default||(d.roots.default={});f.onnx=function(){var u,a,o={};return o.Version=(u={},(a=Object.create(u))[u[0]="_START_VERSION"]=0,a[u[1]="IR_VERSION_2017_10_10"]=1,a[u[2]="IR_VERSION_2017_10_30"]=2,a[u[3]="IR_VERSION_2017_11_3"]=3,a[u[4]="IR_VERSION_2019_1_22"]=4,a[u[5]="IR_VERSION"]=5,a),o.AttributeProto=function(){function r(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.name="",r.prototype.refAttrName="",r.prototype.docString="",r.prototype.type=0,r.prototype.f=0,r.prototype.i=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.s=p.newBuffer([]),r.prototype.t=null,r.prototype.g=null,r.prototype.floats=p.emptyArray,r.prototype.ints=p.emptyArray,r.prototype.strings=p.emptyArray,r.prototype.tensors=p.emptyArray,r.prototype.graphs=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.name!=null&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),e.f!=null&&e.hasOwnProperty("f")&&t.uint32(21).float(e.f),e.i!=null&&e.hasOwnProperty("i")&&t.uint32(24).int64(e.i),e.s!=null&&e.hasOwnProperty("s")&&t.uint32(34).bytes(e.s),e.t!=null&&e.hasOwnProperty("t")&&f.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),e.g!=null&&e.hasOwnProperty("g")&&f.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){t.uint32(58).fork();for(var n=0;n<e.floats.length;++n)t.float(e.floats[n]);t.ldelim()}if(e.ints!=null&&e.ints.length){for(t.uint32(66).fork(),n=0;n<e.ints.length;++n)t.int64(e.ints[n]);t.ldelim()}if(e.strings!=null&&e.strings.length)for(n=0;n<e.strings.length;++n)t.uint32(74).bytes(e.strings[n]);if(e.tensors!=null&&e.tensors.length)for(n=0;n<e.tensors.length;++n)f.onnx.TensorProto.encode(e.tensors[n],t.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(n=0;n<e.graphs.length;++n)f.onnx.GraphProto.encode(e.graphs[n],t.uint32(90).fork()).ldelim();return e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(106).string(e.docString),e.type!=null&&e.hasOwnProperty("type")&&t.uint32(160).int32(e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&t.uint32(170).string(e.refAttrName),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.AttributeProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.name=e.string();break;case 21:i.refAttrName=e.string();break;case 13:i.docString=e.string();break;case 20:i.type=e.int32();break;case 2:i.f=e.float();break;case 3:i.i=e.int64();break;case 4:i.s=e.bytes();break;case 5:i.t=f.onnx.TensorProto.decode(e,e.uint32());break;case 6:i.g=f.onnx.GraphProto.decode(e,e.uint32());break;case 7:if(i.floats&&i.floats.length||(i.floats=[]),(7&l)==2)for(var m=e.uint32()+e.pos;e.pos<m;)i.floats.push(e.float());else i.floats.push(e.float());break;case 8:if(i.ints&&i.ints.length||(i.ints=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.ints.push(e.int64());else i.ints.push(e.int64());break;case 9:i.strings&&i.strings.length||(i.strings=[]),i.strings.push(e.bytes());break;case 10:i.tensors&&i.tensors.length||(i.tensors=[]),i.tensors.push(f.onnx.TensorProto.decode(e,e.uint32()));break;case 11:i.graphs&&i.graphs.length||(i.graphs=[]),i.graphs.push(f.onnx.GraphProto.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!p.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!(p.isInteger(e.i)||e.i&&p.isInteger(e.i.low)&&p.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||p.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")&&(n=f.onnx.TensorProto.verify(e.t)))return"t."+n;if(e.g!=null&&e.hasOwnProperty("g")&&(n=f.onnx.GraphProto.verify(e.g)))return"g."+n;if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if(typeof e.floats[t]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(p.isInteger(e.ints[t])||e.ints[t]&&p.isInteger(e.ints[t].low)&&p.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&typeof e.strings[t].length=="number"||p.isString(e.strings[t])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t)if(n=f.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+n}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t){var n;if(n=f.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+n}}return null},r.fromObject=function(e){if(e instanceof f.onnx.AttributeProto)return e;var t=new f.onnx.AttributeProto;switch(e.name!=null&&(t.name=String(e.name)),e.refAttrName!=null&&(t.refAttrName=String(e.refAttrName)),e.docString!=null&&(t.docString=String(e.docString)),e.type){case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10}if(e.f!=null&&(t.f=Number(e.f)),e.i!=null&&(p.Long?(t.i=p.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?t.i=parseInt(e.i,10):typeof e.i=="number"?t.i=e.i:typeof e.i=="object"&&(t.i=new p.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?p.base64.decode(e.s,t.s=p.newBuffer(p.base64.length(e.s)),0):e.s.length&&(t.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");t.t=f.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");t.g=f.onnx.GraphProto.fromObject(e.g)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var n=0;n<e.floats.length;++n)t.floats[n]=Number(e.floats[n])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],n=0;n<e.ints.length;++n)p.Long?(t.ints[n]=p.Long.fromValue(e.ints[n])).unsigned=!1:typeof e.ints[n]=="string"?t.ints[n]=parseInt(e.ints[n],10):typeof e.ints[n]=="number"?t.ints[n]=e.ints[n]:typeof e.ints[n]=="object"&&(t.ints[n]=new p.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],n=0;n<e.strings.length;++n)typeof e.strings[n]=="string"?p.base64.decode(e.strings[n],t.strings[n]=p.newBuffer(p.base64.length(e.strings[n])),0):e.strings[n].length&&(t.strings[n]=e.strings[n])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],n=0;n<e.tensors.length;++n){if(typeof e.tensors[n]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[n]=f.onnx.TensorProto.fromObject(e.tensors[n])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],n=0;n<e.graphs.length;++n){if(typeof e.graphs[n]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[n]=f.onnx.GraphProto.fromObject(e.graphs[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),t.defaults){if(n.name="",n.f=0,p.Long){var i=new p.Long(0,0,!1);n.i=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.i=t.longs===String?"0":0;t.bytes===String?n.s="":(n.s=[],t.bytes!==Array&&(n.s=p.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=t.enums===String?"UNDEFINED":0,n.refAttrName=""}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(n.f=t.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?n.i=t.longs===String?String(e.i):e.i:n.i=t.longs===String?p.Long.prototype.toString.call(e.i):t.longs===Number?new p.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(n.s=t.bytes===String?p.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(n.t=f.onnx.TensorProto.toObject(e.t,t)),e.g!=null&&e.hasOwnProperty("g")&&(n.g=f.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){n.floats=[];for(var l=0;l<e.floats.length;++l)n.floats[l]=t.json&&!isFinite(e.floats[l])?String(e.floats[l]):e.floats[l]}if(e.ints&&e.ints.length)for(n.ints=[],l=0;l<e.ints.length;++l)typeof e.ints[l]=="number"?n.ints[l]=t.longs===String?String(e.ints[l]):e.ints[l]:n.ints[l]=t.longs===String?p.Long.prototype.toString.call(e.ints[l]):t.longs===Number?new p.LongBits(e.ints[l].low>>>0,e.ints[l].high>>>0).toNumber():e.ints[l];if(e.strings&&e.strings.length)for(n.strings=[],l=0;l<e.strings.length;++l)n.strings[l]=t.bytes===String?p.base64.encode(e.strings[l],0,e.strings[l].length):t.bytes===Array?Array.prototype.slice.call(e.strings[l]):e.strings[l];if(e.tensors&&e.tensors.length)for(n.tensors=[],l=0;l<e.tensors.length;++l)n.tensors[l]=f.onnx.TensorProto.toObject(e.tensors[l],t);if(e.graphs&&e.graphs.length)for(n.graphs=[],l=0;l<e.graphs.length;++l)n.graphs[l]=f.onnx.GraphProto.toObject(e.graphs[l],t);return e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?f.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(n.refAttrName=e.refAttrName),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t}(),r}(),o.ValueInfoProto=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.name="",r.prototype.type=null,r.prototype.docString="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=c.create()),e.name!=null&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),e.type!=null&&e.hasOwnProperty("type")&&f.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(26).string(e.docString),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.ValueInfoProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.name=e.string();break;case 2:i.type=f.onnx.TypeProto.decode(e,e.uint32());break;case 3:i.docString=e.string();break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var t=f.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString)?"docString: string expected":null},r.fromObject=function(e){if(e instanceof f.onnx.ValueInfoProto)return e;var t=new f.onnx.ValueInfoProto;if(e.name!=null&&(t.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=f.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(t.docString=String(e.docString)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.name="",n.type=null,n.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(n.type=f.onnx.TypeProto.toObject(e.type,t)),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.NodeProto=function(){function r(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.input=p.emptyArray,r.prototype.output=p.emptyArray,r.prototype.name="",r.prototype.opType="",r.prototype.domain="",r.prototype.attribute=p.emptyArray,r.prototype.docString="",r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)t.uint32(10).string(e.input[n]);if(e.output!=null&&e.output.length)for(n=0;n<e.output.length;++n)t.uint32(18).string(e.output[n]);if(e.name!=null&&e.hasOwnProperty("name")&&t.uint32(26).string(e.name),e.opType!=null&&e.hasOwnProperty("opType")&&t.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(n=0;n<e.attribute.length;++n)f.onnx.AttributeProto.encode(e.attribute[n],t.uint32(42).fork()).ldelim();return e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&t.uint32(58).string(e.domain),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.NodeProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.input&&i.input.length||(i.input=[]),i.input.push(e.string());break;case 2:i.output&&i.output.length||(i.output=[]),i.output.push(e.string());break;case 3:i.name=e.string();break;case 4:i.opType=e.string();break;case 7:i.domain=e.string();break;case 5:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(f.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:i.docString=e.string();break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!p.isString(e.input[t]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!p.isString(e.output[t]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!p.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!p.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var n=f.onnx.AttributeProto.verify(e.attribute[t]);if(n)return"attribute."+n}}return e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString)?"docString: string expected":null},r.fromObject=function(e){if(e instanceof f.onnx.NodeProto)return e;var t=new f.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var n=0;n<e.input.length;++n)t.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n)t.output[n]=String(e.output[n])}if(e.name!=null&&(t.name=String(e.name)),e.opType!=null&&(t.opType=String(e.opType)),e.domain!=null&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],n=0;n<e.attribute.length;++n){if(typeof e.attribute[n]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[n]=f.onnx.AttributeProto.fromObject(e.attribute[n])}}return e.docString!=null&&(t.docString=String(e.docString)),t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.input=[],n.output=[],n.attribute=[]),t.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),e.input&&e.input.length){n.input=[];for(var i=0;i<e.input.length;++i)n.input[i]=e.input[i]}if(e.output&&e.output.length)for(n.output=[],i=0;i<e.output.length;++i)n.output[i]=e.output[i];if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(n.opType=e.opType),e.attribute&&e.attribute.length)for(n.attribute=[],i=0;i<e.attribute.length;++i)n.attribute[i]=f.onnx.AttributeProto.toObject(e.attribute[i],t);return e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.ModelProto=function(){function r(e){if(this.opsetImport=[],this.metadataProps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.irVersion=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.opsetImport=p.emptyArray,r.prototype.producerName="",r.prototype.producerVersion="",r.prototype.domain="",r.prototype.modelVersion=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.docString="",r.prototype.graph=null,r.prototype.metadataProps=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.irVersion!=null&&e.hasOwnProperty("irVersion")&&t.uint32(8).int64(e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&t.uint32(18).string(e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&t.uint32(26).string(e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&t.uint32(40).int64(e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&f.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)f.onnx.OperatorSetIdProto.encode(e.opsetImport[n],t.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(n=0;n<e.metadataProps.length;++n)f.onnx.StringStringEntryProto.encode(e.metadataProps[n],t.uint32(114).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.ModelProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.irVersion=e.int64();break;case 8:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(f.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:i.producerName=e.string();break;case 3:i.producerVersion=e.string();break;case 4:i.domain=e.string();break;case 5:i.modelVersion=e.int64();break;case 6:i.docString=e.string();break;case 7:i.graph=f.onnx.GraphProto.decode(e,e.uint32());break;case 14:i.metadataProps&&i.metadataProps.length||(i.metadataProps=[]),i.metadataProps.push(f.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!(p.isInteger(e.irVersion)||e.irVersion&&p.isInteger(e.irVersion.low)&&p.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t)if(n=f.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+n}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!p.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!p.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!p.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!(p.isInteger(e.modelVersion)||e.modelVersion&&p.isInteger(e.modelVersion.low)&&p.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")&&(n=f.onnx.GraphProto.verify(e.graph)))return"graph."+n;if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t){var n;if(n=f.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+n}}return null},r.fromObject=function(e){if(e instanceof f.onnx.ModelProto)return e;var t=new f.onnx.ModelProto;if(e.irVersion!=null&&(p.Long?(t.irVersion=p.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?t.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?t.irVersion=e.irVersion:typeof e.irVersion=="object"&&(t.irVersion=new p.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if(typeof e.opsetImport[n]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[n]=f.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}if(e.producerName!=null&&(t.producerName=String(e.producerName)),e.producerVersion!=null&&(t.producerVersion=String(e.producerVersion)),e.domain!=null&&(t.domain=String(e.domain)),e.modelVersion!=null&&(p.Long?(t.modelVersion=p.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?t.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?t.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(t.modelVersion=new p.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(t.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=f.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],n=0;n<e.metadataProps.length;++n){if(typeof e.metadataProps[n]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[n]=f.onnx.StringStringEntryProto.fromObject(e.metadataProps[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.opsetImport=[],n.metadataProps=[]),t.defaults){if(p.Long){var i=new p.Long(0,0,!1);n.irVersion=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.irVersion=t.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",p.Long?(i=new p.Long(0,0,!1),n.modelVersion=t.longs===String?i.toString():t.longs===Number?i.toNumber():i):n.modelVersion=t.longs===String?"0":0,n.docString="",n.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?n.irVersion=t.longs===String?String(e.irVersion):e.irVersion:n.irVersion=t.longs===String?p.Long.prototype.toString.call(e.irVersion):t.longs===Number?new p.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(n.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(n.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?n.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:n.modelVersion=t.longs===String?p.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new p.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(n.graph=f.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var l=0;l<e.opsetImport.length;++l)n.opsetImport[l]=f.onnx.OperatorSetIdProto.toObject(e.opsetImport[l],t)}if(e.metadataProps&&e.metadataProps.length)for(n.metadataProps=[],l=0;l<e.metadataProps.length;++l)n.metadataProps[l]=f.onnx.StringStringEntryProto.toObject(e.metadataProps[l],t);return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.StringStringEntryProto=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=c.create()),e.key!=null&&e.hasOwnProperty("key")&&t.uint32(10).string(e.key),e.value!=null&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.StringStringEntryProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.key=e.string();break;case 2:i.value=e.string();break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!p.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!p.isString(e.value)?"value: string expected":null},r.fromObject=function(e){if(e instanceof f.onnx.StringStringEntryProto)return e;var t=new f.onnx.StringStringEntryProto;return e.key!=null&&(t.key=String(e.key)),e.value!=null&&(t.value=String(e.value)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=""),e.key!=null&&e.hasOwnProperty("key")&&(n.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(n.value=e.value),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.TensorAnnotation=function(){function r(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.tensorName="",r.prototype.quantParameterTensorNames=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&t.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var n=0;n<e.quantParameterTensorNames.length;++n)f.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[n],t.uint32(18).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.TensorAnnotation;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.tensorName=e.string();break;case 2:i.quantParameterTensorNames&&i.quantParameterTensorNames.length||(i.quantParameterTensorNames=[]),i.quantParameterTensorNames.push(f.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!p.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var n=f.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(n)return"quantParameterTensorNames."+n}}return null},r.fromObject=function(e){if(e instanceof f.onnx.TensorAnnotation)return e;var t=new f.onnx.TensorAnnotation;if(e.tensorName!=null&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n){if(typeof e.quantParameterTensorNames[n]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[n]=f.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.quantParameterTensorNames=[]),t.defaults&&(n.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(n.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var i=0;i<e.quantParameterTensorNames.length;++i)n.quantParameterTensorNames[i]=f.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[i],t)}return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.GraphProto=function(){function r(e){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.node=p.emptyArray,r.prototype.name="",r.prototype.initializer=p.emptyArray,r.prototype.docString="",r.prototype.input=p.emptyArray,r.prototype.output=p.emptyArray,r.prototype.valueInfo=p.emptyArray,r.prototype.quantizationAnnotation=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.node!=null&&e.node.length)for(var n=0;n<e.node.length;++n)f.onnx.NodeProto.encode(e.node[n],t.uint32(10).fork()).ldelim();if(e.name!=null&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(n=0;n<e.initializer.length;++n)f.onnx.TensorProto.encode(e.initializer[n],t.uint32(42).fork()).ldelim();if(e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(n=0;n<e.input.length;++n)f.onnx.ValueInfoProto.encode(e.input[n],t.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(n=0;n<e.output.length;++n)f.onnx.ValueInfoProto.encode(e.output[n],t.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(n=0;n<e.valueInfo.length;++n)f.onnx.ValueInfoProto.encode(e.valueInfo[n],t.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(n=0;n<e.quantizationAnnotation.length;++n)f.onnx.TensorAnnotation.encode(e.quantizationAnnotation[n],t.uint32(114).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.GraphProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.node&&i.node.length||(i.node=[]),i.node.push(f.onnx.NodeProto.decode(e,e.uint32()));break;case 2:i.name=e.string();break;case 5:i.initializer&&i.initializer.length||(i.initializer=[]),i.initializer.push(f.onnx.TensorProto.decode(e,e.uint32()));break;case 10:i.docString=e.string();break;case 11:i.input&&i.input.length||(i.input=[]),i.input.push(f.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:i.output&&i.output.length||(i.output=[]),i.output.push(f.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:i.valueInfo&&i.valueInfo.length||(i.valueInfo=[]),i.valueInfo.push(f.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:i.quantizationAnnotation&&i.quantizationAnnotation.length||(i.quantizationAnnotation=[]),i.quantizationAnnotation.push(f.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t)if(n=f.onnx.NodeProto.verify(e.node[t]))return"node."+n}if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t)if(n=f.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+n}if(e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t)if(n=f.onnx.ValueInfoProto.verify(e.input[t]))return"input."+n}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(n=f.onnx.ValueInfoProto.verify(e.output[t]))return"output."+n}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t)if(n=f.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+n}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var n;if(n=f.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+n}}return null},r.fromObject=function(e){if(e instanceof f.onnx.GraphProto)return e;var t=new f.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var n=0;n<e.node.length;++n){if(typeof e.node[n]!="object")throw TypeError(".onnx.GraphProto.node: object expected");t.node[n]=f.onnx.NodeProto.fromObject(e.node[n])}}if(e.name!=null&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],n=0;n<e.initializer.length;++n){if(typeof e.initializer[n]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[n]=f.onnx.TensorProto.fromObject(e.initializer[n])}}if(e.docString!=null&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],n=0;n<e.input.length;++n){if(typeof e.input[n]!="object")throw TypeError(".onnx.GraphProto.input: object expected");t.input[n]=f.onnx.ValueInfoProto.fromObject(e.input[n])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n){if(typeof e.output[n]!="object")throw TypeError(".onnx.GraphProto.output: object expected");t.output[n]=f.onnx.ValueInfoProto.fromObject(e.output[n])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],n=0;n<e.valueInfo.length;++n){if(typeof e.valueInfo[n]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[n]=f.onnx.ValueInfoProto.fromObject(e.valueInfo[n])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],n=0;n<e.quantizationAnnotation.length;++n){if(typeof e.quantizationAnnotation[n]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[n]=f.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),t.defaults&&(n.name="",n.docString=""),e.node&&e.node.length){n.node=[];for(var i=0;i<e.node.length;++i)n.node[i]=f.onnx.NodeProto.toObject(e.node[i],t)}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.initializer&&e.initializer.length)for(n.initializer=[],i=0;i<e.initializer.length;++i)n.initializer[i]=f.onnx.TensorProto.toObject(e.initializer[i],t);if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.input&&e.input.length)for(n.input=[],i=0;i<e.input.length;++i)n.input[i]=f.onnx.ValueInfoProto.toObject(e.input[i],t);if(e.output&&e.output.length)for(n.output=[],i=0;i<e.output.length;++i)n.output[i]=f.onnx.ValueInfoProto.toObject(e.output[i],t);if(e.valueInfo&&e.valueInfo.length)for(n.valueInfo=[],i=0;i<e.valueInfo.length;++i)n.valueInfo[i]=f.onnx.ValueInfoProto.toObject(e.valueInfo[i],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(n.quantizationAnnotation=[],i=0;i<e.quantizationAnnotation.length;++i)n.quantizationAnnotation[i]=f.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[i],t);return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o.TensorProto=function(){function r(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.dims=p.emptyArray,r.prototype.dataType=0,r.prototype.segment=null,r.prototype.floatData=p.emptyArray,r.prototype.int32Data=p.emptyArray,r.prototype.stringData=p.emptyArray,r.prototype.int64Data=p.emptyArray,r.prototype.name="",r.prototype.docString="",r.prototype.rawData=p.newBuffer([]),r.prototype.externalData=p.emptyArray,r.prototype.dataLocation=0,r.prototype.doubleData=p.emptyArray,r.prototype.uint64Data=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.dims!=null&&e.dims.length){t.uint32(10).fork();for(var n=0;n<e.dims.length;++n)t.int64(e.dims[n]);t.ldelim()}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&t.uint32(16).int32(e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&f.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){for(t.uint32(34).fork(),n=0;n<e.floatData.length;++n)t.float(e.floatData[n]);t.ldelim()}if(e.int32Data!=null&&e.int32Data.length){for(t.uint32(42).fork(),n=0;n<e.int32Data.length;++n)t.int32(e.int32Data[n]);t.ldelim()}if(e.stringData!=null&&e.stringData.length)for(n=0;n<e.stringData.length;++n)t.uint32(50).bytes(e.stringData[n]);if(e.int64Data!=null&&e.int64Data.length){for(t.uint32(58).fork(),n=0;n<e.int64Data.length;++n)t.int64(e.int64Data[n]);t.ldelim()}if(e.name!=null&&e.hasOwnProperty("name")&&t.uint32(66).string(e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&t.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){for(t.uint32(82).fork(),n=0;n<e.doubleData.length;++n)t.double(e.doubleData[n]);t.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){for(t.uint32(90).fork(),n=0;n<e.uint64Data.length;++n)t.uint64(e.uint64Data[n]);t.ldelim()}if(e.docString!=null&&e.hasOwnProperty("docString")&&t.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(n=0;n<e.externalData.length;++n)f.onnx.StringStringEntryProto.encode(e.externalData[n],t.uint32(106).fork()).ldelim();return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&t.uint32(112).int32(e.dataLocation),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.TensorProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:if(i.dims&&i.dims.length||(i.dims=[]),(7&l)==2)for(var m=e.uint32()+e.pos;e.pos<m;)i.dims.push(e.int64());else i.dims.push(e.int64());break;case 2:i.dataType=e.int32();break;case 3:i.segment=f.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(i.floatData&&i.floatData.length||(i.floatData=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.floatData.push(e.float());else i.floatData.push(e.float());break;case 5:if(i.int32Data&&i.int32Data.length||(i.int32Data=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.int32Data.push(e.int32());else i.int32Data.push(e.int32());break;case 6:i.stringData&&i.stringData.length||(i.stringData=[]),i.stringData.push(e.bytes());break;case 7:if(i.int64Data&&i.int64Data.length||(i.int64Data=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.int64Data.push(e.int64());else i.int64Data.push(e.int64());break;case 8:i.name=e.string();break;case 12:i.docString=e.string();break;case 9:i.rawData=e.bytes();break;case 13:i.externalData&&i.externalData.length||(i.externalData=[]),i.externalData.push(f.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:i.dataLocation=e.int32();break;case 10:if(i.doubleData&&i.doubleData.length||(i.doubleData=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.doubleData.push(e.double());else i.doubleData.push(e.double());break;case 11:if(i.uint64Data&&i.uint64Data.length||(i.uint64Data=[]),(7&l)==2)for(m=e.uint32()+e.pos;e.pos<m;)i.uint64Data.push(e.uint64());else i.uint64Data.push(e.uint64());break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(p.isInteger(e.dims[t])||e.dims[t]&&p.isInteger(e.dims[t].low)&&p.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!p.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")&&(n=f.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+n;if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if(typeof e.floatData[t]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!p.isInteger(e.int32Data[t]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&typeof e.stringData[t].length=="number"||p.isString(e.stringData[t])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(p.isInteger(e.int64Data[t])||e.int64Data[t]&&p.isInteger(e.int64Data[t].low)&&p.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!p.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||p.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var n;if(n=f.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+n}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if(typeof e.doubleData[t]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(p.isInteger(e.uint64Data[t])||e.uint64Data[t]&&p.isInteger(e.uint64Data[t].low)&&p.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected"}return null},r.fromObject=function(e){if(e instanceof f.onnx.TensorProto)return e;var t=new f.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var n=0;n<e.dims.length;++n)p.Long?(t.dims[n]=p.Long.fromValue(e.dims[n])).unsigned=!1:typeof e.dims[n]=="string"?t.dims[n]=parseInt(e.dims[n],10):typeof e.dims[n]=="number"?t.dims[n]=e.dims[n]:typeof e.dims[n]=="object"&&(t.dims[n]=new p.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}if(e.dataType!=null&&(t.dataType=0|e.dataType),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=f.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],n=0;n<e.floatData.length;++n)t.floatData[n]=Number(e.floatData[n])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],n=0;n<e.int32Data.length;++n)t.int32Data[n]=0|e.int32Data[n]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],n=0;n<e.stringData.length;++n)typeof e.stringData[n]=="string"?p.base64.decode(e.stringData[n],t.stringData[n]=p.newBuffer(p.base64.length(e.stringData[n])),0):e.stringData[n].length&&(t.stringData[n]=e.stringData[n])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],n=0;n<e.int64Data.length;++n)p.Long?(t.int64Data[n]=p.Long.fromValue(e.int64Data[n])).unsigned=!1:typeof e.int64Data[n]=="string"?t.int64Data[n]=parseInt(e.int64Data[n],10):typeof e.int64Data[n]=="number"?t.int64Data[n]=e.int64Data[n]:typeof e.int64Data[n]=="object"&&(t.int64Data[n]=new p.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber())}if(e.name!=null&&(t.name=String(e.name)),e.docString!=null&&(t.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?p.base64.decode(e.rawData,t.rawData=p.newBuffer(p.base64.length(e.rawData)),0):e.rawData.length&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],n=0;n<e.externalData.length;++n){if(typeof e.externalData[n]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[n]=f.onnx.StringStringEntryProto.fromObject(e.externalData[n])}}switch(e.dataLocation){case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],n=0;n<e.doubleData.length;++n)t.doubleData[n]=Number(e.doubleData[n])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],n=0;n<e.uint64Data.length;++n)p.Long?(t.uint64Data[n]=p.Long.fromValue(e.uint64Data[n])).unsigned=!0:typeof e.uint64Data[n]=="string"?t.uint64Data[n]=parseInt(e.uint64Data[n],10):typeof e.uint64Data[n]=="number"?t.uint64Data[n]=e.uint64Data[n]:typeof e.uint64Data[n]=="object"&&(t.uint64Data[n]=new p.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0))}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),t.defaults&&(n.dataType=0,n.segment=null,n.name="",t.bytes===String?n.rawData="":(n.rawData=[],t.bytes!==Array&&(n.rawData=p.newBuffer(n.rawData))),n.docString="",n.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){n.dims=[];for(var i=0;i<e.dims.length;++i)typeof e.dims[i]=="number"?n.dims[i]=t.longs===String?String(e.dims[i]):e.dims[i]:n.dims[i]=t.longs===String?p.Long.prototype.toString.call(e.dims[i]):t.longs===Number?new p.LongBits(e.dims[i].low>>>0,e.dims[i].high>>>0).toNumber():e.dims[i]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(n.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(n.segment=f.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(n.floatData=[],i=0;i<e.floatData.length;++i)n.floatData[i]=t.json&&!isFinite(e.floatData[i])?String(e.floatData[i]):e.floatData[i];if(e.int32Data&&e.int32Data.length)for(n.int32Data=[],i=0;i<e.int32Data.length;++i)n.int32Data[i]=e.int32Data[i];if(e.stringData&&e.stringData.length)for(n.stringData=[],i=0;i<e.stringData.length;++i)n.stringData[i]=t.bytes===String?p.base64.encode(e.stringData[i],0,e.stringData[i].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[i]):e.stringData[i];if(e.int64Data&&e.int64Data.length)for(n.int64Data=[],i=0;i<e.int64Data.length;++i)typeof e.int64Data[i]=="number"?n.int64Data[i]=t.longs===String?String(e.int64Data[i]):e.int64Data[i]:n.int64Data[i]=t.longs===String?p.Long.prototype.toString.call(e.int64Data[i]):t.longs===Number?new p.LongBits(e.int64Data[i].low>>>0,e.int64Data[i].high>>>0).toNumber():e.int64Data[i];if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(n.rawData=t.bytes===String?p.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(n.doubleData=[],i=0;i<e.doubleData.length;++i)n.doubleData[i]=t.json&&!isFinite(e.doubleData[i])?String(e.doubleData[i]):e.doubleData[i];if(e.uint64Data&&e.uint64Data.length)for(n.uint64Data=[],i=0;i<e.uint64Data.length;++i)typeof e.uint64Data[i]=="number"?n.uint64Data[i]=t.longs===String?String(e.uint64Data[i]):e.uint64Data[i]:n.uint64Data[i]=t.longs===String?p.Long.prototype.toString.call(e.uint64Data[i]):t.longs===Number?new p.LongBits(e.uint64Data[i].low>>>0,e.uint64Data[i].high>>>0).toNumber(!0):e.uint64Data[i];if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.externalData&&e.externalData.length)for(n.externalData=[],i=0;i<e.externalData.length;++i)n.externalData[i]=f.onnx.StringStringEntryProto.toObject(e.externalData[i],t);return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(n.dataLocation=t.enums===String?f.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t}(),r.Segment=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.begin=p.Long?p.Long.fromBits(0,0,!1):0,e.prototype.end=p.Long?p.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=c.create()),t.begin!=null&&t.hasOwnProperty("begin")&&n.uint32(8).int64(t.begin),t.end!=null&&t.hasOwnProperty("end")&&n.uint32(16).int64(t.end),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof h||(t=h.create(t));for(var i=n===void 0?t.len:t.pos+n,l=new f.onnx.TensorProto.Segment;t.pos<i;){var m=t.uint32();switch(m>>>3){case 1:l.begin=t.int64();break;case 2:l.end=t.int64();break;default:t.skipType(7&m)}}return l},e.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.begin!=null&&t.hasOwnProperty("begin")&&!(p.isInteger(t.begin)||t.begin&&p.isInteger(t.begin.low)&&p.isInteger(t.begin.high))?"begin: integer|Long expected":t.end!=null&&t.hasOwnProperty("end")&&!(p.isInteger(t.end)||t.end&&p.isInteger(t.end.low)&&p.isInteger(t.end.high))?"end: integer|Long expected":null},e.fromObject=function(t){if(t instanceof f.onnx.TensorProto.Segment)return t;var n=new f.onnx.TensorProto.Segment;return t.begin!=null&&(p.Long?(n.begin=p.Long.fromValue(t.begin)).unsigned=!1:typeof t.begin=="string"?n.begin=parseInt(t.begin,10):typeof t.begin=="number"?n.begin=t.begin:typeof t.begin=="object"&&(n.begin=new p.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),t.end!=null&&(p.Long?(n.end=p.Long.fromValue(t.end)).unsigned=!1:typeof t.end=="string"?n.end=parseInt(t.end,10):typeof t.end=="number"?n.end=t.end:typeof t.end=="object"&&(n.end=new p.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),n},e.toObject=function(t,n){n||(n={});var i={};if(n.defaults){if(p.Long){var l=new p.Long(0,0,!1);i.begin=n.longs===String?l.toString():n.longs===Number?l.toNumber():l}else i.begin=n.longs===String?"0":0;p.Long?(l=new p.Long(0,0,!1),i.end=n.longs===String?l.toString():n.longs===Number?l.toNumber():l):i.end=n.longs===String?"0":0}return t.begin!=null&&t.hasOwnProperty("begin")&&(typeof t.begin=="number"?i.begin=n.longs===String?String(t.begin):t.begin:i.begin=n.longs===String?p.Long.prototype.toString.call(t.begin):n.longs===Number?new p.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),t.end!=null&&t.hasOwnProperty("end")&&(typeof t.end=="number"?i.end=n.longs===String?String(t.end):t.end:i.end=n.longs===String?p.Long.prototype.toString.call(t.end):n.longs===Number?new p.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e}(),r.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),r}(),o.TensorShapeProto=function(){function r(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.dim=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=c.create()),e.dim!=null&&e.dim.length)for(var n=0;n<e.dim.length;++n)f.onnx.TensorShapeProto.Dimension.encode(e.dim[n],t.uint32(10).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.TensorShapeProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.dim&&i.dim.length||(i.dim=[]),i.dim.push(f.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var n=f.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(n)return"dim."+n}}return null},r.fromObject=function(e){if(e instanceof f.onnx.TensorShapeProto)return e;var t=new f.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var n=0;n<e.dim.length;++n){if(typeof e.dim[n]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[n]=f.onnx.TensorShapeProto.Dimension.fromObject(e.dim[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dim=[]),e.dim&&e.dim.length){n.dim=[];for(var i=0;i<e.dim.length;++i)n.dim[i]=f.onnx.TensorShapeProto.Dimension.toObject(e.dim[i],t)}return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r.Dimension=function(){function e(n){if(n)for(var i=Object.keys(n),l=0;l<i.length;++l)n[i[l]]!=null&&(this[i[l]]=n[i[l]])}var t;return e.prototype.dimValue=p.Long?p.Long.fromBits(0,0,!1):0,e.prototype.dimParam="",e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:p.oneOfGetter(t=["dimValue","dimParam"]),set:p.oneOfSetter(t)}),e.create=function(n){return new e(n)},e.encode=function(n,i){return i||(i=c.create()),n.dimValue!=null&&n.hasOwnProperty("dimValue")&&i.uint32(8).int64(n.dimValue),n.dimParam!=null&&n.hasOwnProperty("dimParam")&&i.uint32(18).string(n.dimParam),n.denotation!=null&&n.hasOwnProperty("denotation")&&i.uint32(26).string(n.denotation),i},e.encodeDelimited=function(n,i){return this.encode(n,i).ldelim()},e.decode=function(n,i){n instanceof h||(n=h.create(n));for(var l=i===void 0?n.len:n.pos+i,m=new f.onnx.TensorShapeProto.Dimension;n.pos<l;){var y=n.uint32();switch(y>>>3){case 1:m.dimValue=n.int64();break;case 2:m.dimParam=n.string();break;case 3:m.denotation=n.string();break;default:n.skipType(7&y)}}return m},e.decodeDelimited=function(n){return n instanceof h||(n=new h(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";var i={};if(n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(i.value=1,!(p.isInteger(n.dimValue)||n.dimValue&&p.isInteger(n.dimValue.low)&&p.isInteger(n.dimValue.high))))return"dimValue: integer|Long expected";if(n.dimParam!=null&&n.hasOwnProperty("dimParam")){if(i.value===1)return"value: multiple values";if(i.value=1,!p.isString(n.dimParam))return"dimParam: string expected"}return n.denotation!=null&&n.hasOwnProperty("denotation")&&!p.isString(n.denotation)?"denotation: string expected":null},e.fromObject=function(n){if(n instanceof f.onnx.TensorShapeProto.Dimension)return n;var i=new f.onnx.TensorShapeProto.Dimension;return n.dimValue!=null&&(p.Long?(i.dimValue=p.Long.fromValue(n.dimValue)).unsigned=!1:typeof n.dimValue=="string"?i.dimValue=parseInt(n.dimValue,10):typeof n.dimValue=="number"?i.dimValue=n.dimValue:typeof n.dimValue=="object"&&(i.dimValue=new p.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber())),n.dimParam!=null&&(i.dimParam=String(n.dimParam)),n.denotation!=null&&(i.denotation=String(n.denotation)),i},e.toObject=function(n,i){i||(i={});var l={};return i.defaults&&(l.denotation=""),n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(typeof n.dimValue=="number"?l.dimValue=i.longs===String?String(n.dimValue):n.dimValue:l.dimValue=i.longs===String?p.Long.prototype.toString.call(n.dimValue):i.longs===Number?new p.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber():n.dimValue,i.oneofs&&(l.value="dimValue")),n.dimParam!=null&&n.hasOwnProperty("dimParam")&&(l.dimParam=n.dimParam,i.oneofs&&(l.value="dimParam")),n.denotation!=null&&n.hasOwnProperty("denotation")&&(l.denotation=n.denotation),l},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e}(),r}(),o.TypeProto=function(){function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}var e;return r.prototype.tensorType=null,r.prototype.denotation="",Object.defineProperty(r.prototype,"value",{get:p.oneOfGetter(e=["tensorType"]),set:p.oneOfSetter(e)}),r.create=function(t){return new r(t)},r.encode=function(t,n){return n||(n=c.create()),t.tensorType!=null&&t.hasOwnProperty("tensorType")&&f.onnx.TypeProto.Tensor.encode(t.tensorType,n.uint32(10).fork()).ldelim(),t.denotation!=null&&t.hasOwnProperty("denotation")&&n.uint32(50).string(t.denotation),n},r.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},r.decode=function(t,n){t instanceof h||(t=h.create(t));for(var i=n===void 0?t.len:t.pos+n,l=new f.onnx.TypeProto;t.pos<i;){var m=t.uint32();switch(m>>>3){case 1:l.tensorType=f.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:l.denotation=t.string();break;default:t.skipType(7&m)}}return l},r.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},r.verify=function(t){if(typeof t!="object"||t===null)return"object expected";if(t.tensorType!=null&&t.hasOwnProperty("tensorType")){var n=f.onnx.TypeProto.Tensor.verify(t.tensorType);if(n)return"tensorType."+n}return t.denotation!=null&&t.hasOwnProperty("denotation")&&!p.isString(t.denotation)?"denotation: string expected":null},r.fromObject=function(t){if(t instanceof f.onnx.TypeProto)return t;var n=new f.onnx.TypeProto;if(t.tensorType!=null){if(typeof t.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");n.tensorType=f.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return t.denotation!=null&&(n.denotation=String(t.denotation)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.denotation=""),t.tensorType!=null&&t.hasOwnProperty("tensorType")&&(i.tensorType=f.onnx.TypeProto.Tensor.toObject(t.tensorType,n),n.oneofs&&(i.value="tensorType")),t.denotation!=null&&t.hasOwnProperty("denotation")&&(i.denotation=t.denotation),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r.Tensor=function(){function t(n){if(n)for(var i=Object.keys(n),l=0;l<i.length;++l)n[i[l]]!=null&&(this[i[l]]=n[i[l]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(n){return new t(n)},t.encode=function(n,i){return i||(i=c.create()),n.elemType!=null&&n.hasOwnProperty("elemType")&&i.uint32(8).int32(n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&f.onnx.TensorShapeProto.encode(n.shape,i.uint32(18).fork()).ldelim(),i},t.encodeDelimited=function(n,i){return this.encode(n,i).ldelim()},t.decode=function(n,i){n instanceof h||(n=h.create(n));for(var l=i===void 0?n.len:n.pos+i,m=new f.onnx.TypeProto.Tensor;n.pos<l;){var y=n.uint32();switch(y>>>3){case 1:m.elemType=n.int32();break;case 2:m.shape=f.onnx.TensorShapeProto.decode(n,n.uint32());break;default:n.skipType(7&y)}}return m},t.decodeDelimited=function(n){return n instanceof h||(n=new h(n)),this.decode(n,n.uint32())},t.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")&&!p.isInteger(n.elemType))return"elemType: integer expected";if(n.shape!=null&&n.hasOwnProperty("shape")){var i=f.onnx.TensorShapeProto.verify(n.shape);if(i)return"shape."+i}return null},t.fromObject=function(n){if(n instanceof f.onnx.TypeProto.Tensor)return n;var i=new f.onnx.TypeProto.Tensor;if(n.elemType!=null&&(i.elemType=0|n.elemType),n.shape!=null){if(typeof n.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");i.shape=f.onnx.TensorShapeProto.fromObject(n.shape)}return i},t.toObject=function(n,i){i||(i={});var l={};return i.defaults&&(l.elemType=0,l.shape=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(l.elemType=n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&(l.shape=f.onnx.TensorShapeProto.toObject(n.shape,i)),l},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),r}(),o.OperatorSetIdProto=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.domain="",r.prototype.version=p.Long?p.Long.fromBits(0,0,!1):0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=c.create()),e.domain!=null&&e.hasOwnProperty("domain")&&t.uint32(10).string(e.domain),e.version!=null&&e.hasOwnProperty("version")&&t.uint32(16).int64(e.version),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,i=new f.onnx.OperatorSetIdProto;e.pos<n;){var l=e.uint32();switch(l>>>3){case 1:i.domain=e.string();break;case 2:i.version=e.int64();break;default:e.skipType(7&l)}}return i},r.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!p.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!(p.isInteger(e.version)||e.version&&p.isInteger(e.version.low)&&p.isInteger(e.version.high))?"version: integer|Long expected":null},r.fromObject=function(e){if(e instanceof f.onnx.OperatorSetIdProto)return e;var t=new f.onnx.OperatorSetIdProto;return e.domain!=null&&(t.domain=String(e.domain)),e.version!=null&&(p.Long?(t.version=p.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?t.version=parseInt(e.version,10):typeof e.version=="number"?t.version=e.version:typeof e.version=="object"&&(t.version=new p.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},r.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.domain="",p.Long){var i=new p.Long(0,0,!1);n.version=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.version=t.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?n.version=t.longs===String?String(e.version):e.version:n.version=t.longs===String?p.Long.prototype.toString.call(e.version):t.longs===Number?new p.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},r}(),o}(),v.exports=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.reshape=s.WebGLReshape=void 0;var c=g(37),p=g(0),f=g(50),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){var n=p.ShapeUtil.calculateReshapedDims(t[0].dims,t[1].integerData);return[a(e,t[0],n)]},r}(c.Reshape);function a(o,r,e){var t=o.getOrCreateTextureData(r),n=e;t.channels===4&&(n=f.getPackedShape(e));var i={channels:t.channels,height:t.height,width:t.width,shape:n.length!==0?n:[1],strides:p.ShapeUtil.computeStrides(n),unpackedShape:e};return o.createSharedTextureData(i,r.type,t.texture,r.dataId).tensor}s.WebGLReshape=u,s.reshape=a},function(v,s,g){var d=this&&this.__values||function(c){var p=typeof Symbol=="function"&&Symbol.iterator,f=p&&c[p],u=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};function h(c,p){if(p.endsWith("+")){var f=Number.parseInt(p.substring(0,p.length-1),10);return!isNaN(f)&&f<=c}if(p.split("-").length===2){var u=p.split("-"),a=(f=Number.parseInt(u[0],10),Number.parseInt(u[1],10));return!isNaN(f)&&!isNaN(a)&&f<=c&&c<=a}return Number.parseInt(p,10)===c}Object.defineProperty(s,"__esModule",{value:!0}),s.resolveOperator=void 0,s.resolveOperator=function(c,p,f){var u,a,o,r;try{for(var e=d(f),t=e.next();!t.done;t=e.next()){var n=t.value,i=n[0],l=n[1],m=n[2],y=n[3];if(c.opType===i)try{for(var _=(o=void 0,d(p)),b=_.next();!b.done;b=_.next()){var w=b.value;if((w.domain===l||w.domain==="ai.onnx"&&l==="")&&h(w.version,m))return y(c)}}catch(x){o={error:x}}finally{try{b&&!b.done&&(r=_.return)&&r.call(_)}finally{if(o)throw o.error}}}}catch(x){u={error:x}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(u)throw u.error}}throw new TypeError("cannot resolve operator '"+c.opType+"' with opsets: "+p.map(function(x){return(x.domain||"ai.onnx")+" v"+x.version}).join(", "))}},function(v,s,g){(function(d){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var h=g(59),c=g(60),p=g(61);function f(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(O,D){if(f()<D)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(O=new Uint8Array(D)).__proto__=a.prototype:(O===null&&(O=new a(D)),O.length=D),O}function a(O,D,I){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(O,D,I);if(typeof O=="number"){if(typeof D=="string")throw new Error("If encoding is specified then the first argument must be a string");return e(this,O)}return o(this,O,D,I)}function o(O,D,I,U){if(typeof D=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&D instanceof ArrayBuffer?function(C,G,H,X){if(G.byteLength,H<0||G.byteLength<H)throw new RangeError("'offset' is out of bounds");if(G.byteLength<H+(X||0))throw new RangeError("'length' is out of bounds");return G=H===void 0&&X===void 0?new Uint8Array(G):X===void 0?new Uint8Array(G,H):new Uint8Array(G,H,X),a.TYPED_ARRAY_SUPPORT?(C=G).__proto__=a.prototype:C=t(C,G),C}(O,D,I,U):typeof D=="string"?function(C,G,H){if(typeof H=="string"&&H!==""||(H="utf8"),!a.isEncoding(H))throw new TypeError('"encoding" must be a valid string encoding');var X=0|i(G,H),ie=(C=u(C,X)).write(G,H);return ie!==X&&(C=C.slice(0,ie)),C}(O,D,I):function(C,G){if(a.isBuffer(G)){var H=0|n(G.length);return(C=u(C,H)).length===0||G.copy(C,0,0,H),C}if(G){if(typeof ArrayBuffer<"u"&&G.buffer instanceof ArrayBuffer||"length"in G)return typeof G.length!="number"||(X=G.length)!=X?u(C,0):t(C,G);if(G.type==="Buffer"&&p(G.data))return t(C,G.data)}var X;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(O,D)}function r(O){if(typeof O!="number")throw new TypeError('"size" argument must be a number');if(O<0)throw new RangeError('"size" argument must not be negative')}function e(O,D){if(r(D),O=u(O,D<0?0:0|n(D)),!a.TYPED_ARRAY_SUPPORT)for(var I=0;I<D;++I)O[I]=0;return O}function t(O,D){var I=D.length<0?0:0|n(D.length);O=u(O,I);for(var U=0;U<I;U+=1)O[U]=255&D[U];return O}function n(O){if(O>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|O}function i(O,D){if(a.isBuffer(O))return O.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(O)||O instanceof ArrayBuffer))return O.byteLength;typeof O!="string"&&(O=""+O);var I=O.length;if(I===0)return 0;for(var U=!1;;)switch(D){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":case void 0:return W(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*I;case"hex":return I>>>1;case"base64":return K(O).length;default:if(U)return W(O).length;D=(""+D).toLowerCase(),U=!0}}function l(O,D,I){var U=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0)<=(D>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return k(this,D,I);case"utf8":case"utf-8":return N(this,D,I);case"ascii":return M(this,D,I);case"latin1":case"binary":return j(this,D,I);case"base64":return E(this,D,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,D,I);default:if(U)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),U=!0}}function m(O,D,I){var U=O[D];O[D]=O[I],O[I]=U}function y(O,D,I,U,C){if(O.length===0)return-1;if(typeof I=="string"?(U=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,isNaN(I)&&(I=C?0:O.length-1),I<0&&(I=O.length+I),I>=O.length){if(C)return-1;I=O.length-1}else if(I<0){if(!C)return-1;I=0}if(typeof D=="string"&&(D=a.from(D,U)),a.isBuffer(D))return D.length===0?-1:_(O,D,I,U,C);if(typeof D=="number")return D&=255,a.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(O,D,I):Uint8Array.prototype.lastIndexOf.call(O,D,I):_(O,[D],I,U,C);throw new TypeError("val must be string, number or Buffer")}function _(O,D,I,U,C){var G,H=1,X=O.length,ie=D.length;if(U!==void 0&&((U=String(U).toLowerCase())==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(O.length<2||D.length<2)return-1;H=2,X/=2,ie/=2,I/=2}function $(Te,me){return H===1?Te[me]:Te.readUInt16BE(me*H)}if(C){var te=-1;for(G=I;G<X;G++)if($(O,G)===$(D,te===-1?0:G-te)){if(te===-1&&(te=G),G-te+1===ie)return te*H}else te!==-1&&(G-=G-te),te=-1}else for(I+ie>X&&(I=X-ie),G=I;G>=0;G--){for(var le=!0,J=0;J<ie;J++)if($(O,G+J)!==$(D,J)){le=!1;break}if(le)return G}return-1}function b(O,D,I,U){I=Number(I)||0;var C=O.length-I;U?(U=Number(U))>C&&(U=C):U=C;var G=D.length;if(G%2!=0)throw new TypeError("Invalid hex string");U>G/2&&(U=G/2);for(var H=0;H<U;++H){var X=parseInt(D.substr(2*H,2),16);if(isNaN(X))return H;O[I+H]=X}return H}function w(O,D,I,U){return ae(W(D,O.length-I),O,I,U)}function x(O,D,I,U){return ae(function(C){for(var G=[],H=0;H<C.length;++H)G.push(255&C.charCodeAt(H));return G}(D),O,I,U)}function S(O,D,I,U){return x(O,D,I,U)}function A(O,D,I,U){return ae(K(D),O,I,U)}function T(O,D,I,U){return ae(function(C,G){for(var H,X,ie,$=[],te=0;te<C.length&&!((G-=2)<0);++te)H=C.charCodeAt(te),X=H>>8,ie=H%256,$.push(ie),$.push(X);return $}(D,O.length-I),O,I,U)}function E(O,D,I){return D===0&&I===O.length?h.fromByteArray(O):h.fromByteArray(O.slice(D,I))}function N(O,D,I){I=Math.min(O.length,I);for(var U=[],C=D;C<I;){var G,H,X,ie,$=O[C],te=null,le=$>239?4:$>223?3:$>191?2:1;if(C+le<=I)switch(le){case 1:$<128&&(te=$);break;case 2:(192&(G=O[C+1]))==128&&(ie=(31&$)<<6|63&G)>127&&(te=ie);break;case 3:G=O[C+1],H=O[C+2],(192&G)==128&&(192&H)==128&&(ie=(15&$)<<12|(63&G)<<6|63&H)>2047&&(ie<55296||ie>57343)&&(te=ie);break;case 4:G=O[C+1],H=O[C+2],X=O[C+3],(192&G)==128&&(192&H)==128&&(192&X)==128&&(ie=(15&$)<<18|(63&G)<<12|(63&H)<<6|63&X)>65535&&ie<1114112&&(te=ie)}te===null?(te=65533,le=1):te>65535&&(te-=65536,U.push(te>>>10&1023|55296),te=56320|1023&te),U.push(te),C+=le}return function(J){var Te=J.length;if(Te<=4096)return String.fromCharCode.apply(String,J);for(var me="",he=0;he<Te;)me+=String.fromCharCode.apply(String,J.slice(he,he+=4096));return me}(U)}s.Buffer=a,s.SlowBuffer=function(O){return+O!=O&&(O=0),a.alloc(+O)},s.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=d.TYPED_ARRAY_SUPPORT!==void 0?d.TYPED_ARRAY_SUPPORT:function(){try{var O=new Uint8Array(1);return O.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},O.foo()===42&&typeof O.subarray=="function"&&O.subarray(1,1).byteLength===0}catch{return!1}}(),s.kMaxLength=f(),a.poolSize=8192,a._augment=function(O){return O.__proto__=a.prototype,O},a.from=function(O,D,I){return o(null,O,D,I)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(O,D,I){return function(U,C,G,H){return r(C),C<=0?u(U,C):G!==void 0?typeof H=="string"?u(U,C).fill(G,H):u(U,C).fill(G):u(U,C)}(null,O,D,I)},a.allocUnsafe=function(O){return e(null,O)},a.allocUnsafeSlow=function(O){return e(null,O)},a.isBuffer=function(O){return!(O==null||!O._isBuffer)},a.compare=function(O,D){if(!a.isBuffer(O)||!a.isBuffer(D))throw new TypeError("Arguments must be Buffers");if(O===D)return 0;for(var I=O.length,U=D.length,C=0,G=Math.min(I,U);C<G;++C)if(O[C]!==D[C]){I=O[C],U=D[C];break}return I<U?-1:U<I?1:0},a.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(O,D){if(!p(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return a.alloc(0);var I;if(D===void 0)for(D=0,I=0;I<O.length;++I)D+=O[I].length;var U=a.allocUnsafe(D),C=0;for(I=0;I<O.length;++I){var G=O[I];if(!a.isBuffer(G))throw new TypeError('"list" argument must be an Array of Buffers');G.copy(U,C),C+=G.length}return U},a.byteLength=i,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<O;D+=2)m(this,D,D+1);return this},a.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<O;D+=4)m(this,D,D+3),m(this,D+1,D+2);return this},a.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<O;D+=8)m(this,D,D+7),m(this,D+1,D+6),m(this,D+2,D+5),m(this,D+3,D+4);return this},a.prototype.toString=function(){var O=0|this.length;return O===0?"":arguments.length===0?N(this,0,O):l.apply(this,arguments)},a.prototype.equals=function(O){if(!a.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||a.compare(this,O)===0},a.prototype.inspect=function(){var O="",D=s.INSPECT_MAX_BYTES;return this.length>0&&(O=this.toString("hex",0,D).match(/.{2}/g).join(" "),this.length>D&&(O+=" ... ")),"<Buffer "+O+">"},a.prototype.compare=function(O,D,I,U,C){if(!a.isBuffer(O))throw new TypeError("Argument must be a Buffer");if(D===void 0&&(D=0),I===void 0&&(I=O?O.length:0),U===void 0&&(U=0),C===void 0&&(C=this.length),D<0||I>O.length||U<0||C>this.length)throw new RangeError("out of range index");if(U>=C&&D>=I)return 0;if(U>=C)return-1;if(D>=I)return 1;if(this===O)return 0;for(var G=(C>>>=0)-(U>>>=0),H=(I>>>=0)-(D>>>=0),X=Math.min(G,H),ie=this.slice(U,C),$=O.slice(D,I),te=0;te<X;++te)if(ie[te]!==$[te]){G=ie[te],H=$[te];break}return G<H?-1:H<G?1:0},a.prototype.includes=function(O,D,I){return this.indexOf(O,D,I)!==-1},a.prototype.indexOf=function(O,D,I){return y(this,O,D,I,!0)},a.prototype.lastIndexOf=function(O,D,I){return y(this,O,D,I,!1)},a.prototype.write=function(O,D,I,U){if(D===void 0)U="utf8",I=this.length,D=0;else if(I===void 0&&typeof D=="string")U=D,I=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D|=0,isFinite(I)?(I|=0,U===void 0&&(U="utf8")):(U=I,I=void 0)}var C=this.length-D;if((I===void 0||I>C)&&(I=C),O.length>0&&(I<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");for(var G=!1;;)switch(U){case"hex":return b(this,O,D,I);case"utf8":case"utf-8":return w(this,O,D,I);case"ascii":return x(this,O,D,I);case"latin1":case"binary":return S(this,O,D,I);case"base64":return A(this,O,D,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,O,D,I);default:if(G)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),G=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(O,D,I){var U="";I=Math.min(O.length,I);for(var C=D;C<I;++C)U+=String.fromCharCode(127&O[C]);return U}function j(O,D,I){var U="";I=Math.min(O.length,I);for(var C=D;C<I;++C)U+=String.fromCharCode(O[C]);return U}function k(O,D,I){var U=O.length;(!D||D<0)&&(D=0),(!I||I<0||I>U)&&(I=U);for(var C="",G=D;G<I;++G)C+=ne(O[G]);return C}function F(O,D,I){for(var U=O.slice(D,I),C="",G=0;G<U.length;G+=2)C+=String.fromCharCode(U[G]+256*U[G+1]);return C}function L(O,D,I){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+D>I)throw new RangeError("Trying to access beyond buffer length")}function B(O,D,I,U,C,G){if(!a.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>C||D<G)throw new RangeError('"value" argument is out of bounds');if(I+U>O.length)throw new RangeError("Index out of range")}function V(O,D,I,U){D<0&&(D=65535+D+1);for(var C=0,G=Math.min(O.length-I,2);C<G;++C)O[I+C]=(D&255<<8*(U?C:1-C))>>>8*(U?C:1-C)}function R(O,D,I,U){D<0&&(D=4294967295+D+1);for(var C=0,G=Math.min(O.length-I,4);C<G;++C)O[I+C]=D>>>8*(U?C:3-C)&255}function z(O,D,I,U,C,G){if(I+U>O.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function q(O,D,I,U,C){return C||z(O,0,I,4),c.write(O,D,I,U,23,4),I+4}function Z(O,D,I,U,C){return C||z(O,0,I,8),c.write(O,D,I,U,52,8),I+8}a.prototype.slice=function(O,D){var I,U=this.length;if((O=~~O)<0?(O+=U)<0&&(O=0):O>U&&(O=U),(D=D===void 0?U:~~D)<0?(D+=U)<0&&(D=0):D>U&&(D=U),D<O&&(D=O),a.TYPED_ARRAY_SUPPORT)(I=this.subarray(O,D)).__proto__=a.prototype;else{var C=D-O;I=new a(C,void 0);for(var G=0;G<C;++G)I[G]=this[G+O]}return I},a.prototype.readUIntLE=function(O,D,I){O|=0,D|=0,I||L(O,D,this.length);for(var U=this[O],C=1,G=0;++G<D&&(C*=256);)U+=this[O+G]*C;return U},a.prototype.readUIntBE=function(O,D,I){O|=0,D|=0,I||L(O,D,this.length);for(var U=this[O+--D],C=1;D>0&&(C*=256);)U+=this[O+--D]*C;return U},a.prototype.readUInt8=function(O,D){return D||L(O,1,this.length),this[O]},a.prototype.readUInt16LE=function(O,D){return D||L(O,2,this.length),this[O]|this[O+1]<<8},a.prototype.readUInt16BE=function(O,D){return D||L(O,2,this.length),this[O]<<8|this[O+1]},a.prototype.readUInt32LE=function(O,D){return D||L(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},a.prototype.readUInt32BE=function(O,D){return D||L(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},a.prototype.readIntLE=function(O,D,I){O|=0,D|=0,I||L(O,D,this.length);for(var U=this[O],C=1,G=0;++G<D&&(C*=256);)U+=this[O+G]*C;return U>=(C*=128)&&(U-=Math.pow(2,8*D)),U},a.prototype.readIntBE=function(O,D,I){O|=0,D|=0,I||L(O,D,this.length);for(var U=D,C=1,G=this[O+--U];U>0&&(C*=256);)G+=this[O+--U]*C;return G>=(C*=128)&&(G-=Math.pow(2,8*D)),G},a.prototype.readInt8=function(O,D){return D||L(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},a.prototype.readInt16LE=function(O,D){D||L(O,2,this.length);var I=this[O]|this[O+1]<<8;return 32768&I?4294901760|I:I},a.prototype.readInt16BE=function(O,D){D||L(O,2,this.length);var I=this[O+1]|this[O]<<8;return 32768&I?4294901760|I:I},a.prototype.readInt32LE=function(O,D){return D||L(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},a.prototype.readInt32BE=function(O,D){return D||L(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},a.prototype.readFloatLE=function(O,D){return D||L(O,4,this.length),c.read(this,O,!0,23,4)},a.prototype.readFloatBE=function(O,D){return D||L(O,4,this.length),c.read(this,O,!1,23,4)},a.prototype.readDoubleLE=function(O,D){return D||L(O,8,this.length),c.read(this,O,!0,52,8)},a.prototype.readDoubleBE=function(O,D){return D||L(O,8,this.length),c.read(this,O,!1,52,8)},a.prototype.writeUIntLE=function(O,D,I,U){O=+O,D|=0,I|=0,U||B(this,O,D,I,Math.pow(2,8*I)-1,0);var C=1,G=0;for(this[D]=255&O;++G<I&&(C*=256);)this[D+G]=O/C&255;return D+I},a.prototype.writeUIntBE=function(O,D,I,U){O=+O,D|=0,I|=0,U||B(this,O,D,I,Math.pow(2,8*I)-1,0);var C=I-1,G=1;for(this[D+C]=255&O;--C>=0&&(G*=256);)this[D+C]=O/G&255;return D+I},a.prototype.writeUInt8=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,1,255,0),a.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),this[D]=255&O,D+1},a.prototype.writeUInt16LE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[D]=255&O,this[D+1]=O>>>8):V(this,O,D,!0),D+2},a.prototype.writeUInt16BE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[D]=O>>>8,this[D+1]=255&O):V(this,O,D,!1),D+2},a.prototype.writeUInt32LE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[D+3]=O>>>24,this[D+2]=O>>>16,this[D+1]=O>>>8,this[D]=255&O):R(this,O,D,!0),D+4},a.prototype.writeUInt32BE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[D]=O>>>24,this[D+1]=O>>>16,this[D+2]=O>>>8,this[D+3]=255&O):R(this,O,D,!1),D+4},a.prototype.writeIntLE=function(O,D,I,U){if(O=+O,D|=0,!U){var C=Math.pow(2,8*I-1);B(this,O,D,I,C-1,-C)}var G=0,H=1,X=0;for(this[D]=255&O;++G<I&&(H*=256);)O<0&&X===0&&this[D+G-1]!==0&&(X=1),this[D+G]=(O/H>>0)-X&255;return D+I},a.prototype.writeIntBE=function(O,D,I,U){if(O=+O,D|=0,!U){var C=Math.pow(2,8*I-1);B(this,O,D,I,C-1,-C)}var G=I-1,H=1,X=0;for(this[D+G]=255&O;--G>=0&&(H*=256);)O<0&&X===0&&this[D+G+1]!==0&&(X=1),this[D+G]=(O/H>>0)-X&255;return D+I},a.prototype.writeInt8=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,1,127,-128),a.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),O<0&&(O=255+O+1),this[D]=255&O,D+1},a.prototype.writeInt16LE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[D]=255&O,this[D+1]=O>>>8):V(this,O,D,!0),D+2},a.prototype.writeInt16BE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[D]=O>>>8,this[D+1]=255&O):V(this,O,D,!1),D+2},a.prototype.writeInt32LE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[D]=255&O,this[D+1]=O>>>8,this[D+2]=O>>>16,this[D+3]=O>>>24):R(this,O,D,!0),D+4},a.prototype.writeInt32BE=function(O,D,I){return O=+O,D|=0,I||B(this,O,D,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),a.TYPED_ARRAY_SUPPORT?(this[D]=O>>>24,this[D+1]=O>>>16,this[D+2]=O>>>8,this[D+3]=255&O):R(this,O,D,!1),D+4},a.prototype.writeFloatLE=function(O,D,I){return q(this,O,D,!0,I)},a.prototype.writeFloatBE=function(O,D,I){return q(this,O,D,!1,I)},a.prototype.writeDoubleLE=function(O,D,I){return Z(this,O,D,!0,I)},a.prototype.writeDoubleBE=function(O,D,I){return Z(this,O,D,!1,I)},a.prototype.copy=function(O,D,I,U){if(I||(I=0),U||U===0||(U=this.length),D>=O.length&&(D=O.length),D||(D=0),U>0&&U<I&&(U=I),U===I||O.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("sourceStart out of bounds");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),O.length-D<U-I&&(U=O.length-D+I);var C,G=U-I;if(this===O&&I<D&&D<U)for(C=G-1;C>=0;--C)O[C+D]=this[C+I];else if(G<1e3||!a.TYPED_ARRAY_SUPPORT)for(C=0;C<G;++C)O[C+D]=this[C+I];else Uint8Array.prototype.set.call(O,this.subarray(I,I+G),D);return G},a.prototype.fill=function(O,D,I,U){if(typeof O=="string"){if(typeof D=="string"?(U=D,D=0,I=this.length):typeof I=="string"&&(U=I,I=this.length),O.length===1){var C=O.charCodeAt(0);C<256&&(O=C)}if(U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U)}else typeof O=="number"&&(O&=255);if(D<0||this.length<D||this.length<I)throw new RangeError("Out of range index");if(I<=D)return this;var G;if(D>>>=0,I=I===void 0?this.length:I>>>0,O||(O=0),typeof O=="number")for(G=D;G<I;++G)this[G]=O;else{var H=a.isBuffer(O)?O:W(new a(O,U).toString()),X=H.length;for(G=0;G<I-D;++G)this[G+D]=H[G%X]}return this};var oe=/[^+\/0-9A-Za-z-_]/g;function ne(O){return O<16?"0"+O.toString(16):O.toString(16)}function W(O,D){var I;D=D||1/0;for(var U=O.length,C=null,G=[],H=0;H<U;++H){if((I=O.charCodeAt(H))>55295&&I<57344){if(!C){if(I>56319){(D-=3)>-1&&G.push(239,191,189);continue}if(H+1===U){(D-=3)>-1&&G.push(239,191,189);continue}C=I;continue}if(I<56320){(D-=3)>-1&&G.push(239,191,189),C=I;continue}I=65536+(C-55296<<10|I-56320)}else C&&(D-=3)>-1&&G.push(239,191,189);if(C=null,I<128){if((D-=1)<0)break;G.push(I)}else if(I<2048){if((D-=2)<0)break;G.push(I>>6|192,63&I|128)}else if(I<65536){if((D-=3)<0)break;G.push(I>>12|224,I>>6&63|128,63&I|128)}else{if(!(I<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;G.push(I>>18|240,I>>12&63|128,I>>6&63|128,63&I|128)}}return G}function K(O){return h.toByteArray(function(D){if((D=function(I){return I.trim?I.trim():I.replace(/^\s+|\s+$/g,"")}(D).replace(oe,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(O))}function ae(O,D,I,U){for(var C=0;C<U&&!(C+I>=D.length||C>=O.length);++C)D[C+I]=O[C];return C}}).call(this,g(8))},function(v,s){v.exports=d;var g=null;try{g=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function d(E,N,M){this.low=0|E,this.high=0|N,this.unsigned=!!M}function h(E){return(E&&E.__isLong__)===!0}d.prototype.__isLong__,Object.defineProperty(d.prototype,"__isLong__",{value:!0}),d.isLong=h;var c={},p={};function f(E,N){var M,j,k;return N?(k=0<=(E>>>=0)&&E<256)&&(j=p[E])?j:(M=a(E,(0|E)<0?-1:0,!0),k&&(p[E]=M),M):(k=-128<=(E|=0)&&E<128)&&(j=c[E])?j:(M=a(E,E<0?-1:0,!1),k&&(c[E]=M),M)}function u(E,N){if(isNaN(E))return N?y:m;if(N){if(E<0)return y;if(E>=n)return S}else{if(E<=-i)return A;if(E+1>=i)return x}return E<0?u(-E,N).neg():a(E%t|0,E/t|0,N)}function a(E,N,M){return new d(E,N,M)}d.fromInt=f,d.fromNumber=u,d.fromBits=a;var o=Math.pow;function r(E,N,M){if(E.length===0)throw Error("empty string");if(E==="NaN"||E==="Infinity"||E==="+Infinity"||E==="-Infinity")return m;if(typeof N=="number"?(M=N,N=!1):N=!!N,(M=M||10)<2||36<M)throw RangeError("radix");var j;if((j=E.indexOf("-"))>0)throw Error("interior hyphen");if(j===0)return r(E.substring(1),N,M).neg();for(var k=u(o(M,8)),F=m,L=0;L<E.length;L+=8){var B=Math.min(8,E.length-L),V=parseInt(E.substring(L,L+B),M);if(B<8){var R=u(o(M,B));F=F.mul(R).add(u(V))}else F=(F=F.mul(k)).add(u(V))}return F.unsigned=N,F}function e(E,N){return typeof E=="number"?u(E,N):typeof E=="string"?r(E,N):a(E.low,E.high,typeof N=="boolean"?N:E.unsigned)}d.fromString=r,d.fromValue=e;var t=4294967296,n=t*t,i=n/2,l=f(1<<24),m=f(0);d.ZERO=m;var y=f(0,!0);d.UZERO=y;var _=f(1);d.ONE=_;var b=f(1,!0);d.UONE=b;var w=f(-1);d.NEG_ONE=w;var x=a(-1,2147483647,!1);d.MAX_VALUE=x;var S=a(-1,-1,!0);d.MAX_UNSIGNED_VALUE=S;var A=a(0,-2147483648,!1);d.MIN_VALUE=A;var T=d.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*t+(this.low>>>0):this.high*t+(this.low>>>0)},T.toString=function(E){if((E=E||10)<2||36<E)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var N=u(E),M=this.div(N),j=M.mul(N).sub(this);return M.toString(E)+j.toInt().toString(E)}return"-"+this.neg().toString(E)}for(var k=u(o(E,6),this.unsigned),F=this,L="";;){var B=F.div(k),V=(F.sub(B.mul(k)).toInt()>>>0).toString(E);if((F=B).isZero())return V+L;for(;V.length<6;)V="0"+V;L=""+V+L}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var E=this.high!=0?this.high:this.low,N=31;N>0&&!(E&1<<N);N--);return this.high!=0?N+33:N+1},T.isZero=function(){return this.high===0&&this.low===0},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(1&this.low)==1},T.isEven=function(){return(1&this.low)==0},T.equals=function(E){return h(E)||(E=e(E)),(this.unsigned===E.unsigned||this.high>>>31!=1||E.high>>>31!=1)&&this.high===E.high&&this.low===E.low},T.eq=T.equals,T.notEquals=function(E){return!this.eq(E)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(E){return this.comp(E)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(E){return this.comp(E)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(E){return this.comp(E)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(E){return this.comp(E)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(E){if(h(E)||(E=e(E)),this.eq(E))return 0;var N=this.isNegative(),M=E.isNegative();return N&&!M?-1:!N&&M?1:this.unsigned?E.high>>>0>this.high>>>0||E.high===this.high&&E.low>>>0>this.low>>>0?-1:1:this.sub(E).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(_)},T.neg=T.negate,T.add=function(E){h(E)||(E=e(E));var N=this.high>>>16,M=65535&this.high,j=this.low>>>16,k=65535&this.low,F=E.high>>>16,L=65535&E.high,B=E.low>>>16,V=0,R=0,z=0,q=0;return z+=(q+=k+(65535&E.low))>>>16,R+=(z+=j+B)>>>16,V+=(R+=M+L)>>>16,V+=N+F,a((z&=65535)<<16|(q&=65535),(V&=65535)<<16|(R&=65535),this.unsigned)},T.subtract=function(E){return h(E)||(E=e(E)),this.add(E.neg())},T.sub=T.subtract,T.multiply=function(E){if(this.isZero())return m;if(h(E)||(E=e(E)),g)return a(g.mul(this.low,this.high,E.low,E.high),g.get_high(),this.unsigned);if(E.isZero())return m;if(this.eq(A))return E.isOdd()?A:m;if(E.eq(A))return this.isOdd()?A:m;if(this.isNegative())return E.isNegative()?this.neg().mul(E.neg()):this.neg().mul(E).neg();if(E.isNegative())return this.mul(E.neg()).neg();if(this.lt(l)&&E.lt(l))return u(this.toNumber()*E.toNumber(),this.unsigned);var N=this.high>>>16,M=65535&this.high,j=this.low>>>16,k=65535&this.low,F=E.high>>>16,L=65535&E.high,B=E.low>>>16,V=65535&E.low,R=0,z=0,q=0,Z=0;return q+=(Z+=k*V)>>>16,z+=(q+=j*V)>>>16,q&=65535,z+=(q+=k*B)>>>16,R+=(z+=M*V)>>>16,z&=65535,R+=(z+=j*B)>>>16,z&=65535,R+=(z+=k*L)>>>16,R+=N*V+M*B+j*L+k*F,a((q&=65535)<<16|(Z&=65535),(R&=65535)<<16|(z&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(E){if(h(E)||(E=e(E)),E.isZero())throw Error("division by zero");var N,M,j;if(g)return this.unsigned||this.high!==-2147483648||E.low!==-1||E.high!==-1?a((this.unsigned?g.div_u:g.div_s)(this.low,this.high,E.low,E.high),g.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(E.unsigned||(E=E.toUnsigned()),E.gt(this))return y;if(E.gt(this.shru(1)))return b;j=y}else{if(this.eq(A))return E.eq(_)||E.eq(w)?A:E.eq(A)?_:(N=this.shr(1).div(E).shl(1)).eq(m)?E.isNegative()?_:w:(M=this.sub(E.mul(N)),j=N.add(M.div(E)));if(E.eq(A))return this.unsigned?y:m;if(this.isNegative())return E.isNegative()?this.neg().div(E.neg()):this.neg().div(E).neg();if(E.isNegative())return this.div(E.neg()).neg();j=m}for(M=this;M.gte(E);){N=Math.max(1,Math.floor(M.toNumber()/E.toNumber()));for(var k=Math.ceil(Math.log(N)/Math.LN2),F=k<=48?1:o(2,k-48),L=u(N),B=L.mul(E);B.isNegative()||B.gt(M);)B=(L=u(N-=F,this.unsigned)).mul(E);L.isZero()&&(L=_),j=j.add(L),M=M.sub(B)}return j},T.div=T.divide,T.modulo=function(E){return h(E)||(E=e(E)),g?a((this.unsigned?g.rem_u:g.rem_s)(this.low,this.high,E.low,E.high),g.get_high(),this.unsigned):this.sub(this.div(E).mul(E))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return a(~this.low,~this.high,this.unsigned)},T.and=function(E){return h(E)||(E=e(E)),a(this.low&E.low,this.high&E.high,this.unsigned)},T.or=function(E){return h(E)||(E=e(E)),a(this.low|E.low,this.high|E.high,this.unsigned)},T.xor=function(E){return h(E)||(E=e(E)),a(this.low^E.low,this.high^E.high,this.unsigned)},T.shiftLeft=function(E){return h(E)&&(E=E.toInt()),(E&=63)==0?this:E<32?a(this.low<<E,this.high<<E|this.low>>>32-E,this.unsigned):a(0,this.low<<E-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(E){return h(E)&&(E=E.toInt()),(E&=63)==0?this:E<32?a(this.low>>>E|this.high<<32-E,this.high>>E,this.unsigned):a(this.high>>E-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(E){if(h(E)&&(E=E.toInt()),(E&=63)===0)return this;var N=this.high;return E<32?a(this.low>>>E|N<<32-E,N>>>E,this.unsigned):a(E===32?N:N>>>E-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},T.toBytes=function(E){return E?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var E=this.high,N=this.low;return[255&N,N>>>8&255,N>>>16&255,N>>>24,255&E,E>>>8&255,E>>>16&255,E>>>24]},T.toBytesBE=function(){var E=this.high,N=this.low;return[E>>>24,E>>>16&255,E>>>8&255,255&E,N>>>24,N>>>16&255,N>>>8&255,255&N]},d.fromBytes=function(E,N,M){return M?d.fromBytesLE(E,N):d.fromBytesBE(E,N)},d.fromBytesLE=function(E,N){return new d(E[0]|E[1]<<8|E[2]<<16|E[3]<<24,E[4]|E[5]<<8|E[6]<<16|E[7]<<24,N)},d.fromBytesBE=function(E,N){return new d(E[4]<<24|E[5]<<16|E[6]<<8|E[7],E[0]<<24|E[1]<<16|E[2]<<8|E[3],N)}},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.BatchNormalization=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.epsilon=c.getFloat("epsilon",1e-5),this.momentum=c.getFloat("momentum",.9),this.spatial=c.getInt("spatial",1)},h.prototype.checkInputs=function(c){return!(!c||c.length!==5)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){var p=c[0],f=c[1],u=c[2],a=c[3],o=c[4];return!(p.dims.length<3||f.dims.length!==1||u.dims.length!==1||a.dims.length!==1||o.dims.length!==1)&&f.dims[0]===p.dims[1]&&u.dims[0]===p.dims[1]&&a.dims[0]===p.dims[1]&&o.dims[0]===p.dims[1]&&!(p.type!=="float32"&&p.type!=="float64"||f.type!=="float32"&&f.type!=="float64"||u.type!=="float32"&&u.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||o.type!=="float32"&&o.type!=="float64")},h}();s.BatchNormalization=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.BinaryOp=void 0;var d=function(){function h(c,p,f){this.typeConstraint=c,this.opType=p,this.resultType=f}return h.prototype.initialize=function(c){},h.prototype.checkInputs=function(c){return!(!c||c.length!==2)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return this.typeConstraint.indexOf(c[0].type)!==-1&&c[0].type===c[1].type},h}();s.BinaryOp=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Conv=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.autoPad=c.getString("auto_pad","NOTSET"),this.dilations=c.getInts("dilations",[1,1]),this.group=c.getInt("group",1),this.kernelShape=c.getInts("kernel_shape",[]),this.pads=c.getInts("pads",[0,0,0,0]),this.strides=c.getInts("strides",[1,1])},h.prototype.checkInputs=function(c){if(!c||c.length!==2&&c.length!==3||c[0].dims.length!==4||c[1].dims.length!==4||c[0].dims[1]!==c[1].dims[1]*this.group||c.length===3&&(c[2].dims.length!==1||c[1].dims[0]!==c[2].dims[0]))return!1;var p=c[0].dims.length-2;return this.dilations.length===p&&this.strides.length===p&&this.pads.length===2*p&&(this.kernelShape.length===0||this.kernelShape.length===c[1].dims.length-2)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"&&c[1].type==="float32"&&(c.length!==3||c[2].type==="float32")},h}();s.Conv=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var l in i)i.hasOwnProperty(l)&&(n[l]=i[l])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i,l,m=n.call(e),y=[];try{for(;(t===void 0||t-- >0)&&!(i=m.next()).done;)y.push(i.value)}catch(_){l={error:_}}finally{try{i&&!i.done&&(n=m.return)&&n.call(m)}finally{if(l)throw l.error}}return y};Object.defineProperty(s,"__esModule",{value:!0}),s.matMul2d=s.matMul=s.CpuMatMul=void 0;var p=g(18),f=g(1),u=g(0),a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return h(t,e),t.prototype.run=function(n,i){return[o(i[0],i[1])]},t}(p.MatMul);function o(e,t){var n=c(u.MatMulUtil.preprocessInputShapes(e.dims,t.dims),2),i=n[0],l=n[1],m=[i[i.length-2],l[l.length-1]],y=u.BroadcastUtil.calcShape(i,l,!0);if(!y)throw new Error("input dimensions do not match the requirement");for(var _=u.ShapeUtil.size(y)/(m[0]*m[1]),b=new f.Tensor(y,e.type==="float64"||t.type==="float64"?"float64":"float32"),w=0,x=new Array(y.length),S=new Array(e.dims.length),A=new Array(t.dims.length),T=0;T<_;T++){x[y.length-2]=0,x[y.length-1]=0;for(var E=T,N=y.length-3;N>=0;N--)x[N]=E%y[N],E=Math.floor(E/y[N]);u.BroadcastUtil.fillIndex(x,e.dims,S),u.BroadcastUtil.fillIndex(x,t.dims,A);var M=S.length<=2?0:u.ShapeUtil.indicesToOffset(S,e.strides,y.length-2),j=A.length<=2?0:u.ShapeUtil.indicesToOffset(A,t.strides,y.length-2);r(e.floatData.subarray(M),t.floatData.subarray(j),b.floatData.subarray(w),!1,!1,1,0,m[0],m[1],i[i.length-1]),w+=m[0]*m[1]}return b}function r(e,t,n,i,l,m,y,_,b,w){return i&&l?function(x,S,A,T,E,N,M,j){for(var k=0,F=0,L=0,B=0;B<N;B++){for(var V=0;V<M;V++){for(var R=0,z=0;z<j;z++)R+=x[k]*S[F],k+=N,F+=1;k-=N*j,F-=j,A[L]=T*R+E*A[L],L++,F+=j}F-=M*j,k++}}(e,t,n,m,y,_,b,w):i?function(x,S,A,T,E,N,M,j){for(var k=0,F=0,L=0,B=0;B<N;B++){for(var V=0;V<M;V++){for(var R=0,z=0;z<j;z++)R+=x[k]*S[F],k+=N,F+=M;k-=N*j,F-=M*j,A[L]=T*R+E*A[L],L++,F++}F-=M,k++}}(e,t,n,m,y,_,b,w):l?function(x,S,A,T,E,N,M,j){for(var k=0,F=0,L=0,B=0;B<N;B++){for(var V=0;V<M;V++){for(var R=0,z=0;z<j;z++)R+=x[k]*S[F],k+=1,F+=1;k-=j,F-=j,A[L]=T*R+E*A[L],L++,F+=j}F-=M*j,k+=j}}(e,t,n,m,y,_,b,w):function(x,S,A,T,E,N,M,j){for(var k=0,F=0,L=0,B=0;B<N;B++){for(var V=0;V<M;V++){for(var R=0,z=0;z<j;z++)R+=x[k]*S[F],k+=1,F+=M;k-=j,F-=M*j,A[L]=T*R+E*A[L],L++,F++}F-=M,k+=j}}(e,t,n,m,y,_,b,w)}s.CpuMatMul=a,s.matMul=o,s.matMul2d=r},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.MatMul=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){},h.prototype.checkInputs=function(c){return!(!c||c.length!==2)&&c[0].dims[c[0].dims.length-1]===c[1].dims[c[1].dims.length-2]&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return(c[0].type==="float32"||c[0].type==="float64")&&(c[1].type==="float32"||c[1].type==="float64")&&c[0].type===c[1].type},h}();s.MatMul=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Gemm=void 0;var d=function(){function h(c){this.isOptionalC=c}return h.prototype.initialize=function(c){this.transA=c.getInt("transA",0)!==0,this.transB=c.getInt("transB",0)!==0,this.alpha=c.getFloat("alpha",1),this.beta=c.getFloat("beta",1)},h.prototype.checkInputs=function(c){return!!c&&(!this.isOptionalC||!(c.length<2||c.length>3))&&!(!this.isOptionalC&&c.length!==3)&&(c.length!==3||c[2].dims.length===1||c[2].dims.length===2)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return!(c[0].type!=="float32"&&c[0].type!=="float64"||c[1].type!=="float32"&&c[1].type!=="float64"||c.length===3&&c[2].type!=="float32"&&c[2].type!=="float64")&&c[0].type===c[1].type&&(c.length!==3||c[0].type===c[2].type)},h}();s.Gemm=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.InstanceNormalization=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.epsilon=c.getFloat("epsilon",1e-5)},h.prototype.checkInputs=function(c){return!(!c||c.length!==3)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){var p=c[0],f=c[1],u=c[2];return!(p.dims.length<3||f.dims.length!==1||u.dims.length!==1)&&f.dims[0]===p.dims[1]&&u.dims[0]===p.dims[1]&&!(p.type!=="float32"&&p.type!=="float64"||f.type!=="float32"&&f.type!=="float64"||u.type!=="float32"&&u.type!=="float64")},h}();s.InstanceNormalization=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalMaxPool=s.MaxPool=s.GlobalAveragePool=s.AveragePool=void 0;var c=function(){function o(){}return o.prototype.checkInputs=function(r){return!(!r||r.length!==1)&&this.checkInputTypes(r)},o.prototype.checkInputTypes=function(r){return r[0].type==="float32"||r[0].type==="float64"},o}(),p=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.initialize=function(e){if(this.autoPad=e.getString("auto_pad","NOTSET"),this.kernelShape=e.getInts("kernel_shape"),this.strides=e.getInts("strides",[]),this.pads=e.getInts("pads",[]),this.countIncludePad=e.getInt("count_include_pad",0)!==0,this.ceilMode=e.getInt("ceil_mode",0),this.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool")},r}(c);s.AveragePool=p;var f=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.initialize=function(e){this.countIncludePad=e.getInt("count_include_pad",0)!==0},r}(c);s.GlobalAveragePool=f;var u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.initialize=function(e){if(this.autoPad=e.getString("auto_pad","NOTSET"),this.kernelShape=e.getInts("kernel_shape"),this.strides=e.getInts("strides",[]),this.pads=e.getInts("pads",[]),this.ceilMode=e.getInt("ceil_mode",0),this.storageOrder=e.getInt("storage_order",0),this.storageOrder!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(this.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool")},r}(c);s.MaxPool=u;var a=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.initialize=function(e){},r}(c);s.GlobalMaxPool=a},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Softmax=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.axis=c.getInt("axis",1)},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Softmax=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Sum=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){},h.prototype.checkInputs=function(c){if(!c||c.length===0)return!1;for(var p=c[0].dims.length,f=1;f<c.length;f++){if(p!==c[f].dims.length)return!1;for(var u=0;u<p;u++)if(c[0].dims[u]!==c[f].dims[u])return!1}return this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){if(c[0].type!=="float32"&&c[0].type!=="float64")return!1;for(var p=1;p<c.length;p++)if(c[0].type!==c[p].type)return!1;return!0},h}();s.Sum=d},function(v,s){var g,d,h=v.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function f(l){if(g===setTimeout)return setTimeout(l,0);if((g===c||!g)&&setTimeout)return g=setTimeout,setTimeout(l,0);try{return g(l,0)}catch{try{return g.call(null,l,0)}catch{return g.call(this,l,0)}}}(function(){try{g=typeof setTimeout=="function"?setTimeout:c}catch{g=c}try{d=typeof clearTimeout=="function"?clearTimeout:p}catch{d=p}})();var u,a=[],o=!1,r=-1;function e(){o&&u&&(o=!1,u.length?a=u.concat(a):r=-1,a.length&&t())}function t(){if(!o){var l=f(e);o=!0;for(var m=a.length;m;){for(u=a,a=[];++r<m;)u&&u[r].run();r=-1,m=a.length}u=null,o=!1,function(y){if(d===clearTimeout)return clearTimeout(y);if((d===p||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(y);try{d(y)}catch{try{return d.call(null,y)}catch{return d.call(this,y)}}}(l)}}function n(l,m){this.fun=l,this.array=m}function i(){}h.nextTick=function(l){var m=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)m[y-1]=arguments[y];a.push(new n(l,m)),a.length!==1||o||f(t)},n.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=i,h.addListener=i,h.once=i,h.off=i,h.removeListener=i,h.removeAllListeners=i,h.emit=i,h.prependListener=i,h.prependOnceListener=i,h.listeners=function(l){return[]},h.binding=function(l){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(l){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(a,o,r,e){e===void 0&&(e=r),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[r]}})}:function(a,o,r,e){e===void 0&&(e=r),a[e]=o[r]}),h=this&&this.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),c=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var r in a)r!=="default"&&Object.hasOwnProperty.call(a,r)&&d(o,a,r);return h(o,a),o};Object.defineProperty(s,"__esModule",{value:!0}),s.env=void 0;var p=c(g(46)),f=c(g(26)),u=function(){this.onnx=f,this.backend=f.backend,this.platform=p,this.debug=!1};s.env=new u},function(v,s,g){(function(d){var h=this&&this.__createBinding||(Object.create?function(u,a,o,r){r===void 0&&(r=o),Object.defineProperty(u,r,{enumerable:!0,get:function(){return a[o]}})}:function(u,a,o,r){r===void 0&&(r=o),u[r]=a[o]}),c=this&&this.__setModuleDefault||(Object.create?function(u,a){Object.defineProperty(u,"default",{enumerable:!0,value:a})}:function(u,a){u.default=a}),p=(this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var a={};if(u!=null)for(var o in u)o!=="default"&&Object.hasOwnProperty.call(u,o)&&h(a,u,o);return c(a,u),a})(g(53)),f=p;(typeof window<"u"?window:d).onnx=f,v.exports=p}).call(this,g(8))},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(V,R,z,q){q===void 0&&(q=z),Object.defineProperty(V,q,{enumerable:!0,get:function(){return R[z]}})}:function(V,R,z,q){q===void 0&&(q=z),V[q]=R[z]}),h=this&&this.__setModuleDefault||(Object.create?function(V,R){Object.defineProperty(V,"default",{enumerable:!0,value:R})}:function(V,R){V.default=R}),c=this&&this.__importStar||function(V){if(V&&V.__esModule)return V;var R={};if(V!=null)for(var z in V)z!=="default"&&Object.hasOwnProperty.call(V,z)&&d(R,V,z);return h(R,V),R};Object.defineProperty(s,"__esModule",{value:!0}),s.CPU_OP_RESOLVE_RULES=void 0;var p=g(7),f=g(57),u=g(77),a=g(78),o=g(79),r=g(80),e=g(81),t=g(82),n=g(83),i=g(84),l=g(85),m=g(86),y=g(87),_=g(17),b=g(89),w=g(90),x=c(g(91)),S=g(92),A=g(93),T=g(94),E=g(95),N=g(96),M=g(97),j=g(98),k=c(g(42)),F=g(42),L=g(99),B=g(100);s.CPU_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new F.CpuUnaryOp(p.NUMBER_TYPES,k.abs)}],["Acos","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.acos)}],["Acosh","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.acosh)}],["Add","","7+",function(){return new a.CpuBinaryOp(p.NUMBER_TYPES,function(V,R){return V+R})}],["And","","7+",function(){return new a.CpuBinaryOp(["bool"],function(V,R){return V&&R})}],["ArgMax","","1-11",function(){return new f.CpuArgMax}],["Asin","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.asin)}],["Asinh","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.asinh)}],["Atan","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.atan)}],["Atanh","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.atanh)}],["AveragePool","","7-10",function(){return new w.CpuAveragePool}],["BatchNormalization","","7+",function(){return new u.CpuBatchNormalization}],["Ceil","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.ceil)}],["Clip","","6-10",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.clip,k.clipInitializer)}],["Concat","","4+",function(){return new o.CpuConcat}],["Conv","","1+",function(){return new r.CpuConv}],["Cos","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.cos)}],["Cosh","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.cosh)}],["Div","","7+",function(){return new a.CpuBinaryOp(p.NUMBER_TYPES,function(V,R){return V/R})}],["Dropout","","7+",function(){return new e.CpuDropout}],["Elu","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.elu,k.eluInitializer)}],["Exp","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.exp)}],["Flatten","","1+",function(){return new t.CpuFlatten}],["Floor","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.floor)}],["Gather","","1+",function(){return new n.CpuGather}],["Gemm","","7-10",function(){return new i.CpuGemm(!1)}],["Gemm","","11+",function(){return new i.CpuGemm(!0)}],["GlobalAveragePool","","1+",function(){return new w.CpuGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new w.CpuGlobalMaxPool}],["ImageScaler","","1+",function(){return new l.CpuImageScaler}],["InstanceNormalization","","6+",function(){return new m.CpuInstanceNormalization}],["IsNaN","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.isNan,void 0,"bool")}],["LeakyRelu","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.leakyRelu,k.leakyReluInitializer)}],["Log","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.log)}],["LRN","","1+",function(){return new y.CpuLrn}],["MatMul","","1+",function(){return new _.CpuMatMul}],["MaxPool","","1-9",function(){return new w.CpuMaxPool}],["Mul","","7+",function(){return new a.CpuBinaryOp(p.NUMBER_TYPES,function(V,R){return V*R})}],["Neg","","6+",function(){return new F.CpuUnaryOp(p.NUMBER_TYPES,k.neg)}],["Not","","1+",function(){return new F.CpuUnaryOp(["bool"],k.not,void 0,"bool")}],["Or","","7+",function(){return new a.CpuBinaryOp(["bool"],function(V,R){return V||R})}],["PRelu","","7+",function(){return new a.CpuBinaryOp(p.NUMBER_TYPES,function(V,R){return V>=0?V:V*R})}],["Pad","","2-10",function(){return new b.CpuPad}],["Reciprocal","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.reciprocal)}],["ReduceLogSum","","1+",function(){return new x.CpuReduceLogSum}],["ReduceMax","","1+",function(){return new x.CpuReduceMax}],["ReduceMean","","1+",function(){return new x.CpuReduceMean}],["ReduceMin","","1+",function(){return new x.CpuReduceMin}],["ReduceProd","","1+",function(){return new x.CpuReduceProd}],["ReduceSum","","1+",function(){return new x.CpuReduceSum}],["ReduceSumSquare","","1+",function(){return new x.CpuReduceSumSquare}],["Relu","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.relu)}],["Reshape","","5+",function(){return new S.CpuReshape}],["Sigmoid","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.sigmoid)}],["Sign","","9+",function(){return new F.CpuUnaryOp(p.NUMBER_TYPES,k.sign)}],["Sin","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.sin)}],["Sinh","","9+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.sinh)}],["Slice","","10+",function(){return new A.CpuSliceV10}],["Slice","","1-9",function(){return new A.CpuSlice}],["Softmax","","1+",function(){return new T.CpuSoftmax}],["Sqrt","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.sqrt)}],["Squeeze","","1+",function(){return new E.CpuSqueeze}],["Sub","","7+",function(){return new a.CpuBinaryOp(p.NUMBER_TYPES,function(V,R){return V-R})}],["Sum","","6+",function(){return new N.CpuSum}],["Tan","","7+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.tan)}],["Tanh","","6+",function(){return new F.CpuUnaryOp(p.FLOAT_TYPES,k.tanh)}],["Tile","","6+",function(){return new M.CpuTile}],["Transpose","","1+",function(){return new j.CpuTranspose}],["Unsqueeze","","1+",function(){return new L.CpuUnsqueeze}],["Upsample","","7-8",function(){return new B.CpuUpsample}],["Xor","","7+",function(){return new a.CpuBinaryOp(["bool"],function(V,R){return V^R})}]]},function(v,s,g){v.exports=r;var d,h=g(6),c=h.LongBits,p=h.base64,f=h.utf8;function u(y,_,b){this.fn=y,this.len=_,this.next=void 0,this.val=b}function a(){}function o(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function r(){this.len=0,this.head=new u(a,0,0),this.tail=this.head,this.states=null}var e=function(){return h.Buffer?function(){return(r.create=function(){return new d})()}:function(){return new r}};function t(y,_,b){_[b]=255&y}function n(y,_){this.len=y,this.next=void 0,this.val=_}function i(y,_,b){for(;y.hi;)_[b++]=127&y.lo|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[b++]=127&y.lo|128,y.lo=y.lo>>>7;_[b++]=y.lo}function l(y,_,b){_[b]=255&y,_[b+1]=y>>>8&255,_[b+2]=y>>>16&255,_[b+3]=y>>>24}r.create=e(),r.alloc=function(y){return new h.Array(y)},h.Array!==Array&&(r.alloc=h.pool(r.alloc,h.Array.prototype.subarray)),r.prototype._push=function(y,_,b){return this.tail=this.tail.next=new u(y,_,b),this.len+=_,this},n.prototype=Object.create(u.prototype),n.prototype.fn=function(y,_,b){for(;y>127;)_[b++]=127&y|128,y>>>=7;_[b]=y},r.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new n((y>>>=0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},r.prototype.int32=function(y){return y<0?this._push(i,10,c.fromNumber(y)):this.uint32(y)},r.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)},r.prototype.uint64=function(y){var _=c.from(y);return this._push(i,_.length(),_)},r.prototype.int64=r.prototype.uint64,r.prototype.sint64=function(y){var _=c.from(y).zzEncode();return this._push(i,_.length(),_)},r.prototype.bool=function(y){return this._push(t,1,y?1:0)},r.prototype.fixed32=function(y){return this._push(l,4,y>>>0)},r.prototype.sfixed32=r.prototype.fixed32,r.prototype.fixed64=function(y){var _=c.from(y);return this._push(l,4,_.lo)._push(l,4,_.hi)},r.prototype.sfixed64=r.prototype.fixed64,r.prototype.float=function(y){return this._push(h.float.writeFloatLE,4,y)},r.prototype.double=function(y){return this._push(h.float.writeDoubleLE,8,y)};var m=h.Array.prototype.set?function(y,_,b){_.set(y,b)}:function(y,_,b){for(var w=0;w<y.length;++w)_[b+w]=y[w]};r.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(t,1,0);if(h.isString(y)){var b=r.alloc(_=p.length(y));p.decode(y,b,0),y=b}return this.uint32(_)._push(m,_,y)},r.prototype.string=function(y){var _=f.length(y);return _?this.uint32(_)._push(f.write,_,y):this._push(t,1,0)},r.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new u(a,0,0),this.len=0,this},r.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(a,0,0),this.len=0),this},r.prototype.ldelim=function(){var y=this.head,_=this.tail,b=this.len;return this.reset().uint32(b),b&&(this.tail.next=y.next,this.tail=_,this.len+=b),this},r.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),b=0;y;)y.fn(y.val,_,b),b+=y.len,y=y.next;return _},r._configure=function(y){d=y,r.create=e(),d._configure()}},function(v,s,g){v.exports=u;var d,h=g(6),c=h.LongBits,p=h.utf8;function f(i,l){return RangeError("index out of range: "+i.pos+" + "+(l||1)+" > "+i.len)}function u(i){this.buf=i,this.pos=0,this.len=i.length}var a,o=typeof Uint8Array<"u"?function(i){if(i instanceof Uint8Array||Array.isArray(i))return new u(i);throw Error("illegal buffer")}:function(i){if(Array.isArray(i))return new u(i);throw Error("illegal buffer")},r=function(){return h.Buffer?function(i){return(u.create=function(l){return h.Buffer.isBuffer(l)?new d(l):o(l)})(i)}:o};function e(){var i=new c(0,0),l=0;if(!(this.len-this.pos>4)){for(;l<3;++l){if(this.pos>=this.len)throw f(this);if(i.lo=(i.lo|(127&this.buf[this.pos])<<7*l)>>>0,this.buf[this.pos++]<128)return i}return i.lo=(i.lo|(127&this.buf[this.pos++])<<7*l)>>>0,i}for(;l<4;++l)if(i.lo=(i.lo|(127&this.buf[this.pos])<<7*l)>>>0,this.buf[this.pos++]<128)return i;if(i.lo=(i.lo|(127&this.buf[this.pos])<<28)>>>0,i.hi=(i.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return i;if(l=0,this.len-this.pos>4){for(;l<5;++l)if(i.hi=(i.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,this.buf[this.pos++]<128)return i}else for(;l<5;++l){if(this.pos>=this.len)throw f(this);if(i.hi=(i.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,this.buf[this.pos++]<128)return i}throw Error("invalid varint encoding")}function t(i,l){return(i[l-4]|i[l-3]<<8|i[l-2]<<16|i[l-1]<<24)>>>0}function n(){if(this.pos+8>this.len)throw f(this,8);return new c(t(this.buf,this.pos+=4),t(this.buf,this.pos+=4))}u.create=r(),u.prototype._slice=h.Array.prototype.subarray||h.Array.prototype.slice,u.prototype.uint32=(a=4294967295,function(){if(a=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(a=(a|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(a=(a|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(a=(a|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(a=(a|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return a;if((this.pos+=5)>this.len)throw this.pos=this.len,f(this,10);return a}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var i=this.uint32();return i>>>1^-(1&i)|0},u.prototype.bool=function(){return this.uint32()!==0},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw f(this,4);return t(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw f(this,4);return 0|t(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw f(this,4);var i=h.float.readFloatLE(this.buf,this.pos);return this.pos+=4,i},u.prototype.double=function(){if(this.pos+8>this.len)throw f(this,4);var i=h.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,i},u.prototype.bytes=function(){var i=this.uint32(),l=this.pos,m=this.pos+i;if(m>this.len)throw f(this,i);return this.pos+=i,Array.isArray(this.buf)?this.buf.slice(l,m):l===m?new this.buf.constructor(0):this._slice.call(this.buf,l,m)},u.prototype.string=function(){var i=this.bytes();return p.read(i,0,i.length)},u.prototype.skip=function(i){if(typeof i=="number"){if(this.pos+i>this.len)throw f(this,i);this.pos+=i}else do if(this.pos>=this.len)throw f(this);while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=7&this.uint32())!=4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this},u._configure=function(i){d=i,u.create=r(),d._configure();var l=h.Long?"toLong":"toNumber";h.merge(u.prototype,{int64:function(){return e.call(this)[l](!1)},uint64:function(){return e.call(this)[l](!0)},sint64:function(){return e.call(this).zzDecode()[l](!1)},fixed64:function(){return n.call(this)[l](!0)},sfixed64:function(){return n.call(this)[l](!1)}})}},function(v,s,g){var d=this&&this.__values||function(c){var p=typeof Symbol=="function"&&Symbol.iterator,f=p&&c[p],u=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.Concat=void 0;var h=function(){function c(){}return c.prototype.initialize=function(p){this.axis=p.getInt("axis")},c.prototype.checkInputs=function(p){return!(!p||p.length<1)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){var f,u,a=p[0].type,o=p[0].dims.length;if(a==="string")return!1;try{for(var r=d(p),e=r.next();!e.done;e=r.next()){var t=e.value;if(t.type!==a||t.dims.length!==o)return!1}}catch(n){f={error:n}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(f)throw f.error}}return!0},c}();s.Concat=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Dropout=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.ratio=c.getFloat("ratio",.5),this.testMode=!0},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Dropout=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Flatten=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.axis=c.getInt("axis",1)},h.prototype.checkInputs=function(c){if(!c||c.length!==1)return!1;var p=c[0].dims.length;return p!==0&&!(this.axis<-p||this.axis>p)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type!=="string"},h}();s.Flatten=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Gather=void 0;var d=g(7),h=function(){function c(){}return c.prototype.initialize=function(p){this.axis=p.getInt("axis",0)},c.prototype.checkInputs=function(p){if(!p||p.length!==2)return!1;var f=p[0].dims.length;return!(f<1)&&!(this.axis<-f||this.axis>f-1)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return d.NUMBER_TYPES.indexOf(p[0].type)!==-1&&(p[1].type==="int32"||p[1].type==="int16")},c}();s.Gather=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.ImageScaler=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.scale=c.getFloat("scale"),this.bias=c.getFloats("bias")},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&c[0].dims.length===4&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.ImageScaler=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Pad=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.mode=c.getString("mode","constant"),this.value=c.getFloat("value",0),this.pads=c.getInts("pads")},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Pad=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.ReduceBase=void 0;var d=g(7),h=function(){function c(){}return c.prototype.initialize=function(p){this.axes=p.getInts("axes",[]),this.keepDims=p.getInt("keepdims",1)===1},c.prototype.checkInputs=function(p){return!(!p||p.length!==1)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return d.NUMBER_TYPES.indexOf(p[0].type)!==-1},c}();s.ReduceBase=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Reshape=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){},h.prototype.checkInputs=function(c){return!(!c||c.length!==2||c[1].dims.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return(c[0].type==="float32"||c[0].type==="float64")&&c[1].type==="int32"},h}();s.Reshape=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.SliceV10=s.Slice=void 0;var d=function(){function c(){}return c.prototype.initialize=function(p){this.starts=p.getInts("starts"),this.ends=p.getInts("ends"),this.axes=p.getInts("axes",[])},c.prototype.checkInputs=function(p){return!(!p||p.length!==1)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return p[0].type==="float32"||p[0].type==="float64"},c}();s.Slice=d;var h=function(){function c(){}return c.prototype.initialize=function(p){},c.prototype.checkInputs=function(p){return!(!p||p.length<3||p.length>5)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return p[1].type==="int32"&&p[1].dims.length===1&&p[2].type==="int32"&&p[2].dims.length===1&&(!(p.length>=4)||p[3].type==="int32"&&p[3].dims.length===1)&&(!(p.length>=5)||p[4].type==="int32"&&p[4].dims.length===1)},c}();s.SliceV10=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Squeeze=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.axes=c.getInts("axes")},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type!=="string"},h}();s.Squeeze=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Tile=void 0;var d=g(7),h=function(){function c(){}return c.prototype.initialize=function(p){},c.prototype.checkInputs=function(p){return!(!p||p.length!==2)&&p[1].dims.length===1&&p[1].dims[0]===p[0].dims.length&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return d.NUMBER_TYPES.indexOf(p[0].type)!==-1&&(p[1].type==="int32"||p[1].type==="int16")},c}();s.Tile=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Transpose=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.perm=c.getInts("perm",[])},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Transpose=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.tanh=s.tan=s.sqrt=s.sinh=s.sin=s.sign=s.sigmoid=s.relu=s.reciprocal=s.not=s.neg=s.log=s.leakyRelu=s.leakyReluInitializer=s.isNan=s.floor=s.exp=s.elu=s.eluInitializer=s.cosh=s.cos=s.clip=s.clipInitializer=s.ceil=s.atanh=s.atan=s.asinh=s.asin=s.acosh=s.acos=s.abs=s.unaryOp=s.CpuUnaryOp=void 0;var c=g(43),p=g(1),f=function(a){function o(r,e,t,n){var i=a.call(this,r,n)||this;return i.func=e,i.attributesInitializer=t,i}return h(o,a),o.prototype.initialize=function(r){this.attributesInitializer&&(this.attributes=this.attributesInitializer(r))},o.prototype.run=function(r,e){return[u(e[0],this.func,this.attributes,this.resultType)]},o}(c.UnaryOp);function u(a,o,r,e){var t=new p.Tensor(a.dims,e||a.type);return o(a.data,t.data,r),t}s.CpuUnaryOp=f,s.unaryOp=u,s.abs=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.abs(a[r])},s.acos=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.acos(a[r])},s.acosh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.acosh(a[r])},s.asin=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.asin(a[r])},s.asinh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.asinh(a[r])},s.atan=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.atan(a[r])},s.atanh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.atanh(a[r])},s.ceil=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.ceil(a[r])},s.clipInitializer=function(a){return{min:a.getFloat("min",-34028234663852886e22),max:a.getFloat("max",34028234663852886e22)}},s.clip=function(a,o,r){for(var e=r.min,t=r.max,n=0;n<a.length;n++){var i=a[n];o[n]=i<e?e:i>t?t:i}},s.cos=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.cos(a[r])},s.cosh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.cosh(a[r])},s.eluInitializer=function(a){return a.getFloat("alpha",1)},s.elu=function(a,o,r){for(var e=r,t=0;t<a.length;t++){var n=a[t];o[t]=n>=0?n:e*(Math.exp(n)-1)}},s.exp=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.exp(a[r])},s.floor=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.floor(a[r])},s.isNan=function(a,o){for(var r=0;r<a.length;r++)o[r]=Number.isNaN(a[r])?1:0},s.leakyReluInitializer=function(a){return a.getFloat("alpha",.01)},s.leakyRelu=function(a,o,r){for(var e=r,t=0;t<a.length;t++){var n=a[t];o[t]=n>=0?n:e*n}},s.log=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.log(a[r])},s.neg=function(a,o){for(var r=0;r<a.length;r++)o[r]=-a[r]},s.not=function(a,o){for(var r=0;r<a.length;r++)o[r]=a[r]?0:1},s.reciprocal=function(a,o){for(var r=0;r<a.length;r++)o[r]=1/a[r]},s.relu=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.max(0,a[r])},s.sigmoid=function(a,o){for(var r=0;r<a.length;r++)o[r]=1/(1+Math.exp(-a[r]))},s.sign=function(a,o){for(var r=0;r<a.length;r++)o[r]=a[r]>0?1:a[r]<0?-1:0},s.sin=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.sin(a[r])},s.sinh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.sinh(a[r])},s.sqrt=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.sqrt(a[r])},s.tan=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.tan(a[r])},s.tanh=function(a,o){for(var r=0;r<a.length;r++)o[r]=Math.tanh(a[r])}},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.UnaryOp=void 0;var d=function(){function h(c,p){this.typeConstraint=c,this.resultType=p}return h.prototype.initialize=function(c){},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return this.typeConstraint.indexOf(c[0].type)!==-1},h}();s.UnaryOp=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Unsqueeze=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.axes=c.getInts("axes")},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type!=="string"},h}();s.Unsqueeze=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Upsample=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){if(this.mode=c.getString("mode","nearest"),this.scales=c.getFloats("scales"),this.mode!=="nearest"&&this.mode!=="linear")throw new Error("unrecognized mode: "+this.mode);if(this.mode==="linear"&&this.scales.length!==2&&this.scales.length!==4)throw new Error("only support 2-D or 4-D upsampling for linear mode");this.roi=new Array(2*this.scales.length).fill(0)},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&c[0].dims.length===this.scales.length&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type!=="string"},h}();s.Upsample=d},function(v,s,g){(function(d,h){var c;/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */(function(){var p={function:!0,object:!0},f=p[typeof window]&&window||this,u=p[typeof s]&&s,a=p[typeof d]&&d&&!d.nodeType&&d,o=u&&a&&typeof h=="object"&&h;!o||o.global!==o&&o.window!==o&&o.self!==o||(f=o);var r=Math.pow(2,53)-1,e=/\bOpera/,t=Object.prototype,n=t.hasOwnProperty,i=t.toString;function l(A){return(A=String(A)).charAt(0).toUpperCase()+A.slice(1)}function m(A){return A=x(A),/^(?:webOS|i(?:OS|P))/.test(A)?A:l(A)}function y(A,T){for(var E in A)n.call(A,E)&&T(A[E],E,A)}function _(A){return A==null?l(A):i.call(A).slice(8,-1)}function b(A){return String(A).replace(/([ -])(?!$)/g,"$1?")}function w(A,T){var E=null;return function(N,M){var j=-1,k=N?N.length:0;if(typeof k=="number"&&k>-1&&k<=r)for(;++j<k;)M(N[j],j,N);else y(N,M)}(A,function(N,M){E=T(E,N,M,A)}),E}function x(A){return String(A).replace(/^ +| +$/g,"")}var S=function A(T){var E=f,N=T&&typeof T=="object"&&_(T)!="String";N&&(E=T,T=null);var M=E.navigator||{},j=M.userAgent||"";T||(T=j);var k,F,L,B,V,R=N?!!M.likeChrome:/\bChrome\b/.test(T)&&!/internal|\n/i.test(i.toString()),z=N?"Object":"ScriptBridgingProxyObject",q=N?"Object":"Environment",Z=N&&E.java?"JavaPackage":_(E.java),oe=N?"Object":"RuntimeObject",ne=/\bJava/.test(Z)&&E.java,W=ne&&_(E.environment)==q,K=ne?"a":"",ae=ne?"b":"",O=E.document||{},D=E.operamini||E.opera,I=e.test(I=N&&D?D["[[Class]]"]:_(D))?I:D=null,U=T,C=[],G=null,H=T==j,X=H&&D&&typeof D.version=="function"&&D.version(),ie=w([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(ye,fe){return ye||RegExp("\\b"+(fe.pattern||b(fe))+"\\b","i").exec(T)&&(fe.label||fe)}),$=function(ye){return w(ye,function(fe,ce){return fe||RegExp("\\b"+(ce.pattern||b(ce))+"\\b","i").exec(T)&&(ce.label||ce)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),te=Te([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),le=function(ye){return w(ye,function(fe,ce,we){return fe||(ce[te]||ce[/^[a-z]+(?: +[a-z]+\b)*/i.exec(te)]||RegExp("\\b"+b(we)+"(?:\\b|\\w*\\d)","i").exec(T))&&we})}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),J=function(ye){return w(ye,function(fe,ce){var we=ce.pattern||b(ce);return!fe&&(fe=RegExp("\\b"+we+"(?:/[\\d.]+|[ \\w.]*)","i").exec(T))&&(fe=function(xe,Ee,Ae){var De={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Ee&&Ae&&/^Win/i.test(xe)&&!/^Windows Phone /i.test(xe)&&(De=De[/[\d.]+$/.exec(xe)])&&(xe="Windows "+De),xe=String(xe),Ee&&Ae&&(xe=xe.replace(RegExp(Ee,"i"),Ae)),xe=m(xe.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(fe,we,ce.label||ce)),fe})}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Te(ye){return w(ye,function(fe,ce){var we=ce.pattern||b(ce);return!fe&&(fe=RegExp("\\b"+we+" *\\d+[.\\w_]*","i").exec(T)||RegExp("\\b"+we+" *\\w+-[\\w]*","i").exec(T)||RegExp("\\b"+we+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(T))&&((fe=String(ce.label&&!RegExp(we,"i").test(ce.label)?ce.label:fe).split("/"))[1]&&!/[\d.]+/.test(fe[0])&&(fe[0]+=" "+fe[1]),ce=ce.label||ce,fe=m(fe[0].replace(RegExp(we,"i"),ce).replace(RegExp("; *(?:"+ce+"[_-])?","i")," ").replace(RegExp("("+ce+")[-_.]?(\\w)","i"),"$1 $2"))),fe})}function me(ye){return w(ye,function(fe,ce){return fe||(RegExp(ce+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(T)||0)[1]||null})}if(ie&&(ie=[ie]),/\bAndroid\b/.test(J)&&!te&&(k=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(T))&&(te=x(k[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),le&&!te?te=Te([le]):le&&te&&(te=te.replace(RegExp("^("+b(le)+")[-_.\\s]","i"),le+" ").replace(RegExp("^("+b(le)+")[-_.]?(\\w)","i"),le+" $2")),(k=/\bGoogle TV\b/.exec(te))&&(te=k[0]),/\bSimulator\b/i.test(T)&&(te=(te?te+" ":"")+"Simulator"),$=="Opera Mini"&&/\bOPiOS\b/.test(T)&&C.push("running in Turbo/Uncompressed mode"),$=="IE"&&/\blike iPhone OS\b/.test(T)?(le=(k=A(T.replace(/like iPhone OS/,""))).manufacturer,te=k.product):/^iP/.test(te)?($||($="Safari"),J="iOS"+((k=/ OS ([\d_]+)/i.exec(T))?" "+k[1].replace(/_/g,"."):"")):$=="Konqueror"&&/^Linux\b/i.test(J)?J="Kubuntu":le&&le!="Google"&&(/Chrome/.test($)&&!/\bMobile Safari\b/i.test(T)||/\bVita\b/.test(te))||/\bAndroid\b/.test(J)&&/^Chrome/.test($)&&/\bVersion\//i.test(T)?($="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):$=="Silk"?(/\bMobi/i.test(T)||(J="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(T)&&C.unshift("accelerated")):$=="UC Browser"&&/\bUCWEB\b/.test(T)?C.push("speed mode"):$=="PaleMoon"&&(k=/\bFirefox\/([\d.]+)\b/.exec(T))?C.push("identifying as Firefox "+k[1]):$=="Firefox"&&(k=/\b(Mobile|Tablet|TV)\b/i.exec(T))?(J||(J="Firefox OS"),te||(te=k[1])):!$||(k=!/\bMinefield\b/i.test(T)&&/\b(?:Firefox|Safari)\b/.exec($))?($&&!te&&/[\/,]|^[^(]+?\)/.test(T.slice(T.indexOf(k+"/")+8))&&($=null),(k=te||le||J)&&(te||le||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&($=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:k)+" Browser")):$=="Electron"&&(k=(/\bChrome\/([\d.]+)\b/.exec(T)||0)[1])&&C.push("Chromium "+k),X||(X=me(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b($),"(?:Firefox|Minefield|NetFront)"])),(k=(ie=="iCab"&&parseFloat(X)>3?"WebKit":/\bOpera\b/.test($)&&(/\bOPR\b/.test(T)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(T)&&!/^(?:Trident|EdgeHTML)$/.test(ie)&&"WebKit"||!ie&&/\bMSIE\b/i.test(T)&&(J=="Mac OS"?"Tasman":"Trident")||ie=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test($)&&"NetFront")&&(ie=[k]),$=="IE"&&(k=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(T)||0)[1])?($+=" Mobile",J="Windows Phone "+(/\+$/.test(k)?k:k+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(T)?($="IE Mobile",J="Windows Phone 8.x",C.unshift("desktop mode"),X||(X=(/\brv:([\d.]+)/.exec(T)||0)[1])):$!="IE"&&ie=="Trident"&&(k=/\brv:([\d.]+)/.exec(T))&&($&&C.push("identifying as "+$+(X?" "+X:"")),$="IE",X=k[1]),H){if(B="global",V=(L=E)!=null?typeof L[B]:"number",/^(?:boolean|number|string|undefined)$/.test(V)||V=="object"&&!L[B])_(k=E.runtime)==z?($="Adobe AIR",J=k.flash.system.Capabilities.os):_(k=E.phantom)==oe?($="PhantomJS",X=(k=k.version||null)&&k.major+"."+k.minor+"."+k.patch):typeof O.documentMode=="number"&&(k=/\bTrident\/(\d+)/i.exec(T))?(X=[X,O.documentMode],(k=+k[1]+4)!=X[1]&&(C.push("IE "+X[1]+" mode"),ie&&(ie[1]=""),X[1]=k),X=$=="IE"?String(X[1].toFixed(1)):X[0]):typeof O.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test($)&&(C.push("masking as "+$+" "+X),$="IE",X="11.0",ie=["Trident"],J="Windows");else if(ne&&(U=(k=ne.lang.System).getProperty("os.arch"),J=J||k.getProperty("os.name")+" "+k.getProperty("os.version")),W){try{X=E.require("ringo/engine").version.join("."),$="RingoJS"}catch{(k=E.system)&&k.global.system==E.system&&($="Narwhal",J||(J=k[0].os||null))}$||($="Rhino")}else typeof E.process=="object"&&!E.process.browser&&(k=E.process)&&(typeof k.versions=="object"&&(typeof k.versions.electron=="string"?(C.push("Node "+k.versions.node),$="Electron",X=k.versions.electron):typeof k.versions.nw=="string"&&(C.push("Chromium "+X,"Node "+k.versions.node),$="NW.js",X=k.versions.nw)),$||($="Node.js",U=k.arch,J=k.platform,X=(X=/[\d.]+/.exec(k.version))?X[0]:null));J=J&&m(J)}if(X&&(k=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(X)||/(?:alpha|beta)(?: ?\d)?/i.exec(T+";"+(H&&M.appMinorVersion))||/\bMinefield\b/i.test(T)&&"a")&&(G=/b/i.test(k)?"beta":"alpha",X=X.replace(RegExp(k+"\\+?$"),"")+(G=="beta"?ae:K)+(/\d+\+?/.exec(k)||"")),$=="Fennec"||$=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(J))$="Firefox Mobile";else if($=="Maxthon"&&X)X=X.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(te))te=="Xbox 360"&&(J=null),te=="Xbox 360"&&/\bIEMobile\b/.test(T)&&C.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test($)&&(!$||te||/Browser|Mobi/.test($))||J!="Windows CE"&&!/Mobi/i.test(T))if($=="IE"&&H)try{E.external===null&&C.unshift("platform preview")}catch{C.unshift("embedded")}else(/\bBlackBerry\b/.test(te)||/\bBB10\b/.test(T))&&(k=(RegExp(te.replace(/ +/g," *")+"/([.\\d]+)","i").exec(T)||0)[1]||X)?(J=((k=[k,/BB10/.test(T)])[1]?(te=null,le="BlackBerry"):"Device Software")+" "+k[0],X=null):this!=y&&te!="Wii"&&(H&&D||/Opera/.test($)&&/\b(?:MSIE|Firefox)\b/i.test(T)||$=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(J)||$=="IE"&&(J&&!/^Win/.test(J)&&X>5.5||/\bWindows XP\b/.test(J)&&X>8||X==8&&!/\bTrident\b/.test(T)))&&!e.test(k=A.call(y,T.replace(e,"")+";"))&&k.name&&(k="ing as "+k.name+((k=k.version)?" "+k:""),e.test($)?(/\bIE\b/.test(k)&&J=="Mac OS"&&(J=null),k="identify"+k):(k="mask"+k,$=I?m(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(k)&&(J=null),H||(X=null)),ie=["Presto"],C.push(k));else $+=" Mobile";(k=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(T)||0)[1])&&(k=[parseFloat(k.replace(/\.(\d)$/,".0$1")),k],$=="Safari"&&k[1].slice(-1)=="+"?($="WebKit Nightly",G="alpha",X=k[1].slice(0,-1)):X!=k[1]&&X!=(k[2]=(/\bSafari\/([\d.]+\+?)/i.exec(T)||0)[1])||(X=null),k[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(T)||0)[1],k[0]==537.36&&k[2]==537.36&&parseFloat(k[1])>=28&&ie=="WebKit"&&(ie=["Blink"]),H&&(R||k[1])?(ie&&(ie[1]="like Chrome"),k=k[1]||((k=k[0])<530?1:k<532?2:k<532.05?3:k<533?4:k<534.03?5:k<534.07?6:k<534.1?7:k<534.13?8:k<534.16?9:k<534.24?10:k<534.3?11:k<535.01?12:k<535.02?"13+":k<535.07?15:k<535.11?16:k<535.19?17:k<536.05?18:k<536.1?19:k<537.01?20:k<537.11?"21+":k<537.13?23:k<537.18?24:k<537.24?25:k<537.36?26:ie!="Blink"?"27":"28")):(ie&&(ie[1]="like Safari"),k=(k=k[0])<400?1:k<500?2:k<526?3:k<533?4:k<534?"4+":k<535?5:k<537?6:k<538?7:k<601?8:k<602?9:k<604?10:k<606?11:k<608?12:"12"),ie&&(ie[1]+=" "+(k+=typeof k=="number"?".x":/[.+]/.test(k)?"":"+")),$=="Safari"&&(!X||parseInt(X)>45)?X=k:$=="Chrome"&&/\bHeadlessChrome/i.test(T)&&C.unshift("headless")),$=="Opera"&&(k=/\bzbov|zvav$/.exec(J))?($+=" ",C.unshift("desktop mode"),k=="zvav"?($+="Mini",X=null):$+="Mobile",J=J.replace(RegExp(" *"+k+"$"),"")):$=="Safari"&&/\bChrome\b/.exec(ie&&ie[1])?(C.unshift("desktop mode"),$="Chrome Mobile",X=null,/\bOS X\b/.test(J)?(le="Apple",J="iOS 4.3+"):J=null):/\bSRWare Iron\b/.test($)&&!X&&(X=me("Chrome")),X&&X.indexOf(k=/[\d.]+$/.exec(J))==0&&T.indexOf("/"+k+"-")>-1&&(J=x(J.replace(k,""))),J&&J.indexOf($)!=-1&&!RegExp($+" OS").test(J)&&(J=J.replace(RegExp(" *"+b($)+" *"),"")),ie&&!/\b(?:Avant|Nook)\b/.test($)&&(/Browser|Lunascape|Maxthon/.test($)||$!="Safari"&&/^iOS/.test(J)&&/\bSafari\b/.test(ie[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test($)&&ie[1])&&(k=ie[ie.length-1])&&C.push(k),C.length&&(C=["("+C.join("; ")+")"]),le&&te&&te.indexOf(le)<0&&C.push("on "+le),te&&C.push((/^on /.test(C[C.length-1])?"":"on ")+te),J&&(k=/ ([\d.+]+)$/.exec(J),F=k&&J.charAt(J.length-k[0].length-1)=="/",J={architecture:32,family:k&&!F?J.replace(k[0],""):J,version:k?k[1]:null,toString:function(){var ye=this.version;return this.family+(ye&&!F?" "+ye:"")+(this.architecture==64?" 64-bit":"")}}),(k=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+k),"")),$&&(/\bWOW64\b/i.test(T)||H&&/\w(?:86|32)$/.test(M.cpuClass||M.platform)&&!/\bWin64; x64\b/i.test(T))&&C.unshift("32-bit")):J&&/^OS X/.test(J.family)&&$=="Chrome"&&parseFloat(X)>=39&&(J.architecture=64),T||(T=null);var he={};return he.description=T,he.layout=ie&&ie[0],he.manufacturer=le,he.name=$,he.prerelease=G,he.product=te,he.ua=T,he.version=$&&X,he.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},he.parse=A,he.toString=function(){return this.description||""},he.version&&C.unshift(X),he.name&&C.unshift($),J&&$&&(J!=String(J).split(" ")[0]||J!=$.split(" ")[0]&&!te)&&C.push(te?"("+J+")":"on "+J),C.length&&(he.description=C.join(" ")),he}();f.platform=S,(c=function(){return S}.call(s,g,s,d))===void 0||(d.exports=c)}).call(this)}).call(this,g(102)(v),g(8))},function(v,s,g){(function(d){function h(f,u){for(var a=0,o=f.length-1;o>=0;o--){var r=f[o];r==="."?f.splice(o,1):r===".."?(f.splice(o,1),a++):a&&(f.splice(o,1),a--)}if(u)for(;a--;a)f.unshift("..");return f}function c(f,u){if(f.filter)return f.filter(u);for(var a=[],o=0;o<f.length;o++)u(f[o],o,f)&&a.push(f[o]);return a}s.resolve=function(){for(var f="",u=!1,a=arguments.length-1;a>=-1&&!u;a--){var o=a>=0?arguments[a]:d.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(f=o+"/"+f,u=o.charAt(0)==="/")}return(u?"/":"")+(f=h(c(f.split("/"),function(r){return!!r}),!u).join("/"))||"."},s.normalize=function(f){var u=s.isAbsolute(f),a=p(f,-1)==="/";return(f=h(c(f.split("/"),function(o){return!!o}),!u).join("/"))||u||(f="."),f&&a&&(f+="/"),(u?"/":"")+f},s.isAbsolute=function(f){return f.charAt(0)==="/"},s.join=function(){var f=Array.prototype.slice.call(arguments,0);return s.normalize(c(f,function(u,a){if(typeof u!="string")throw new TypeError("Arguments to path.join must be strings");return u}).join("/"))},s.relative=function(f,u){function a(l){for(var m=0;m<l.length&&l[m]==="";m++);for(var y=l.length-1;y>=0&&l[y]==="";y--);return m>y?[]:l.slice(m,y-m+1)}f=s.resolve(f).substr(1),u=s.resolve(u).substr(1);for(var o=a(f.split("/")),r=a(u.split("/")),e=Math.min(o.length,r.length),t=e,n=0;n<e;n++)if(o[n]!==r[n]){t=n;break}var i=[];for(n=t;n<o.length;n++)i.push("..");return(i=i.concat(r.slice(t))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var u=f.charCodeAt(0),a=u===47,o=-1,r=!0,e=f.length-1;e>=1;--e)if((u=f.charCodeAt(e))===47){if(!r){o=e;break}}else r=!1;return o===-1?a?"/":".":a&&o===1?"/":f.slice(0,o)},s.basename=function(f,u){var a=function(o){typeof o!="string"&&(o+="");var r,e=0,t=-1,n=!0;for(r=o.length-1;r>=0;--r)if(o.charCodeAt(r)===47){if(!n){e=r+1;break}}else t===-1&&(n=!1,t=r+1);return t===-1?"":o.slice(e,t)}(f);return u&&a.substr(-1*u.length)===u&&(a=a.substr(0,a.length-u.length)),a},s.extname=function(f){typeof f!="string"&&(f+="");for(var u=-1,a=0,o=-1,r=!0,e=0,t=f.length-1;t>=0;--t){var n=f.charCodeAt(t);if(n!==47)o===-1&&(r=!1,o=t+1),n===46?u===-1?u=t:e!==1&&(e=1):u!==-1&&(e=-1);else if(!r){a=t+1;break}}return u===-1||o===-1||e===0||e===1&&u===o-1&&u===a+1?"":f.slice(u,o)};var p="ab".substr(-1)==="b"?function(f,u,a){return f.substr(u,a)}:function(f,u,a){return u<0&&(u=f.length+u),f.substr(u,a)}}).call(this,g(24))},function(v,s){},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Clip=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.min=c.getFloat("min",-34028234663852886e22),this.max=c.getFloat("max",34028234663852886e22)},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Clip=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.getPackedShape=void 0,s.getPackedShape=function(d){var h=d.length;return d.slice(0,h-1).concat(d[h-1]/4)}},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),h=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),c=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&d(e,r,t);return h(e,r),e},p=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m},f=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(p(arguments[e]));return r};Object.defineProperty(s,"__esModule",{value:!0}),s.Tensor=void 0;var u=g(1),a=c(g(52)),o=function(){function r(e,t,n){var i=n||[e.length];if(e.length===0)throw new RangeError("Tensor data should contain at least one element.");Array.isArray(e)&&t!=="string"?t==="float32"?this.data=Float32Array.from(e):t==="bool"?this.data=new Uint8Array(e):t==="int32"&&(this.data=Int32Array.from(e)):this.data=e,this.dims=i,this.type=t,this.internalTensor=new u.Tensor(this.dims,this.type,void 0,void 0,this.data),this.size=this.internalTensor.size}return r.prototype.get=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var l=[];if(typeof e=="number")l=f([e],n);else{if(!e)throw new Error("Input index array is undefined. ");l=e}if(a.validateIndices(l),l.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");l.forEach(function(y,_){if(y>=t.dims[_])throw new RangeError("Input index array dims don't match the tensor dims.")});var m=this.internalTensor.get(l);return this.type==="bool"?m===1:m},r.prototype.set=function(e,t){for(var n=this,i=[],l=2;l<arguments.length;l++)i[l-2]=arguments[l];a.matchElementType(this.type,e);var m=[];if(typeof t=="number")m=f([t],i);else{if(!t)throw new Error("Input index array is undefined.");m=t}if(a.validateIndices(m),m.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");m.forEach(function(y,_){if(y>=n.dims[_])throw new RangeError("Input index array dims don't match the tensor dims.")}),typeof e=="boolean"?this.internalTensor.set(m,e?1:0):this.internalTensor.set(m,e)},r}();s.Tensor=o},function(v,s,g){var d=this&&this.__values||function(p){var f=typeof Symbol=="function"&&Symbol.iterator,u=f&&p[f],a=0;if(u)return u.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&a>=p.length&&(p=void 0),{value:p&&p[a++],done:!p}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.validateIndices=s.matchElementType=s.toInternalTensor=s.fromInternalTensor=void 0;var h=g(1),c=g(51);s.fromInternalTensor=function(p){switch(p.type){case"bool":return new c.Tensor(new Uint8Array(p.integerData),"bool",p.dims);case"float32":return new c.Tensor(p.floatData,"float32",p.dims);case"float64":return new c.Tensor(new Float32Array(p.floatData),"float32",p.dims);case"string":return new c.Tensor(p.stringData,"string",p.dims);case"int8":return new c.Tensor(new Int32Array(p.integerData),"int32",p.dims);case"int32":return new c.Tensor(p.integerData,"int32",p.dims);default:throw new TypeError("Tensor type is not supported. ")}},s.toInternalTensor=function(p){return new h.Tensor(p.dims,p.type,void 0,void 0,p.data)},s.matchElementType=function(p,f){switch(typeof f){case"string":if(p!=="string")throw new TypeError("The new element type doesn't match the tensor data type.");break;case"number":if(p!=="float32"&&p!=="int32")throw new TypeError("The new element type doesn't match the tensor data type.");if(p==="float32"&&Number.isInteger(f))throw new TypeError("The new element type doesn't match the tensor data type.");if(p==="int32"&&!Number.isInteger(f))throw new TypeError("The new element type doesn't match the tensor data type.");break;case"boolean":if(p!=="bool")throw new TypeError("The new element type doesn't match the tensor data type.");break;default:throw new TypeError("The new element type is not supported.")}},s.validateIndices=function(p){var f,u;if(p.length<0||p.length>6)throw new RangeError("Only rank 0 to 6 is supported for tensor shape.");try{for(var a=d(p),o=a.next();!o.done;o=a.next()){var r=o.value;if(!Number.isInteger(r))throw new TypeError("Invalid index: "+r+" is not an integer");if(r<0||r>2147483647)throw new TypeError("Invalid index: length "+r+" is not allowed")}}catch(e){f={error:e}}finally{try{o&&!o.done&&(u=a.return)&&u.call(a)}finally{if(f)throw f.error}}}},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(a,o,r,e){e===void 0&&(e=r),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[r]}})}:function(a,o,r,e){e===void 0&&(e=r),a[e]=o[r]}),h=this&&this.__exportStar||function(a,o){for(var r in a)r==="default"||o.hasOwnProperty(r)||d(o,a,r)};Object.defineProperty(s,"__esModule",{value:!0}),s.ENV=s.backend=void 0;var c=g(54),p=g(101),f=g(119),u=g(168);h(g(169),s),h(g(170),s),h(g(171),s),h(g(172),s),s.backend={cpu:new c.CpuBackend,wasm:new p.WasmBackend,webgl:new f.WebGLBackend},s.ENV=u.envImpl},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.CpuBackend=void 0;var d=g(55),h=function(){function c(){}return c.prototype.initialize=function(){return!0},c.prototype.createSessionHandler=function(p){return new d.CpuSessionHandler(this,p)},c.prototype.dispose=function(){},c}();s.CpuBackend=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.CpuSessionHandler=void 0;var d=g(11),h=g(56),c=g(27),p=function(){function f(u,a){this.backend=u,this.context=a}return f.prototype.createInferenceHandler=function(){return new h.CpuInferenceHandler(this,this.context.profiler)},f.prototype.dispose=function(){},f.prototype.resolve=function(u,a){var o=d.resolveOperator(u,a,c.CPU_OP_RESOLVE_RULES);return o.initialize(u.attributes),o},f}();s.CpuSessionHandler=p},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.CpuInferenceHandler=void 0;var d=function(){function h(c,p){this.session=c,this.profiler=p}return h.prototype.dispose=function(){},h}();s.CpuInferenceHandler=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.argMax=s.CpuArgMax=void 0;var c=g(58),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.axis,this.keepDims)]},r}(c.ArgMax);function a(o,r,e){var t=o.dims?o.dims.length:1;r=f.ShapeUtil.normalizeAxis(r,t);for(var n=f.ReduceUtil.calcReduceShape(o.dims,[r],!0),i=o.data,l=new Int32Array(f.ShapeUtil.size(n)),m=f.ShapeUtil.sizeFromDimension(o.dims,r+1),y=f.ShapeUtil.computeStrides(n),_=f.ShapeUtil.computeStrides(o.dims),b=new Array(o.dims.length),w=0;w<l.length;w++){var x=f.ShapeUtil.offsetToIndices(w,y);f.BroadcastUtil.fillIndex(x,o.dims,b);for(var S=f.ShapeUtil.indicesToOffset(b,_),A=o.data[S],T=0,E=0;E<o.dims[r];++E){var N=i[S+E*m];N>A&&(A=N,T=E)}l[w]=T}return new p.Tensor(e?n:f.ReduceUtil.calcReduceShape(o.dims,[r],e),"int32",void 0,void 0,l)}s.CpuArgMax=u,s.argMax=a},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.ArgMax=void 0;var d=g(7),h=function(){function c(){}return c.prototype.initialize=function(p){this.axis=p.getInt("axis",0),this.keepDims=p.getInt("keepdims",1)===1},c.prototype.checkInputs=function(p){return!(!p||p.length!==1)&&this.checkInputTypes(p)},c.prototype.checkInputTypes=function(p){return d.NUMBER_TYPES.indexOf(p[0].type)!==-1},c}();s.ArgMax=h},function(v,s,g){s.byteLength=function(r){var e=a(r),t=e[0],n=e[1];return 3*(t+n)/4-n},s.toByteArray=function(r){var e,t,n=a(r),i=n[0],l=n[1],m=new c(function(b,w,x){return 3*(w+x)/4-x}(0,i,l)),y=0,_=l>0?i-4:i;for(t=0;t<_;t+=4)e=h[r.charCodeAt(t)]<<18|h[r.charCodeAt(t+1)]<<12|h[r.charCodeAt(t+2)]<<6|h[r.charCodeAt(t+3)],m[y++]=e>>16&255,m[y++]=e>>8&255,m[y++]=255&e;return l===2&&(e=h[r.charCodeAt(t)]<<2|h[r.charCodeAt(t+1)]>>4,m[y++]=255&e),l===1&&(e=h[r.charCodeAt(t)]<<10|h[r.charCodeAt(t+1)]<<4|h[r.charCodeAt(t+2)]>>2,m[y++]=e>>8&255,m[y++]=255&e),m},s.fromByteArray=function(r){for(var e,t=r.length,n=t%3,i=[],l=0,m=t-n;l<m;l+=16383)i.push(o(r,l,l+16383>m?m:l+16383));return n===1?(e=r[t-1],i.push(d[e>>2]+d[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(d[e>>10]+d[e>>4&63]+d[e<<2&63]+"=")),i.join("")};for(var d=[],h=[],c=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,u=p.length;f<u;++f)d[f]=p[f],h[p.charCodeAt(f)]=f;function a(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function o(r,e,t){for(var n,i,l=[],m=e;m<t;m+=3)n=(r[m]<<16&16711680)+(r[m+1]<<8&65280)+(255&r[m+2]),l.push(d[(i=n)>>18&63]+d[i>>12&63]+d[i>>6&63]+d[63&i]);return l.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(v,s){s.read=function(g,d,h,c,p){var f,u,a=8*p-c-1,o=(1<<a)-1,r=o>>1,e=-7,t=h?p-1:0,n=h?-1:1,i=g[d+t];for(t+=n,f=i&(1<<-e)-1,i>>=-e,e+=a;e>0;f=256*f+g[d+t],t+=n,e-=8);for(u=f&(1<<-e)-1,f>>=-e,e+=c;e>0;u=256*u+g[d+t],t+=n,e-=8);if(f===0)f=1-r;else{if(f===o)return u?NaN:1/0*(i?-1:1);u+=Math.pow(2,c),f-=r}return(i?-1:1)*u*Math.pow(2,f-c)},s.write=function(g,d,h,c,p,f){var u,a,o,r=8*f-p-1,e=(1<<r)-1,t=e>>1,n=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=c?0:f-1,l=c?1:-1,m=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(a=isNaN(d)?1:0,u=e):(u=Math.floor(Math.log(d)/Math.LN2),d*(o=Math.pow(2,-u))<1&&(u--,o*=2),(d+=u+t>=1?n/o:n*Math.pow(2,1-t))*o>=2&&(u++,o/=2),u+t>=e?(a=0,u=e):u+t>=1?(a=(d*o-1)*Math.pow(2,p),u+=t):(a=d*Math.pow(2,t-1)*Math.pow(2,p),u=0));p>=8;g[h+i]=255&a,i+=l,a/=256,p-=8);for(u=u<<p|a,r+=p;r>0;g[h+i]=255&u,i+=l,u/=256,r-=8);g[h+i-l]|=128*m}},function(v,s){var g={}.toString;v.exports=Array.isArray||function(d){return g.call(d)=="[object Array]"}},function(v,s,g){v.exports=g(63)},function(v,s,g){var d=s;function h(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}d.build="minimal",d.Writer=g(28),d.BufferWriter=g(72),d.Reader=g(29),d.BufferReader=g(73),d.util=g(6),d.rpc=g(74),d.roots=g(76),d.configure=h,h()},function(v,s,g){v.exports=function(d,h){for(var c=new Array(arguments.length-1),p=0,f=2,u=!0;f<arguments.length;)c[p++]=arguments[f++];return new Promise(function(a,o){c[p]=function(r){if(u)if(u=!1,r)o(r);else{for(var e=new Array(arguments.length-1),t=0;t<e.length;)e[t++]=arguments[t];a.apply(null,e)}};try{d.apply(h||null,c)}catch(r){u&&(u=!1,o(r))}})}},function(v,s,g){var d=s;d.length=function(f){var u=f.length;if(!u)return 0;for(var a=0;--u%4>1&&f.charAt(u)==="=";)++a;return Math.ceil(3*f.length)/4-a};for(var h=new Array(64),c=new Array(123),p=0;p<64;)c[h[p]=p<26?p+65:p<52?p+71:p<62?p-4:p-59|43]=p++;d.encode=function(f,u,a){for(var o,r=null,e=[],t=0,n=0;u<a;){var i=f[u++];switch(n){case 0:e[t++]=h[i>>2],o=(3&i)<<4,n=1;break;case 1:e[t++]=h[o|i>>4],o=(15&i)<<2,n=2;break;case 2:e[t++]=h[o|i>>6],e[t++]=h[63&i],n=0}t>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,e)),t=0)}return n&&(e[t++]=h[o],e[t++]=61,n===1&&(e[t++]=61)),r?(t&&r.push(String.fromCharCode.apply(String,e.slice(0,t))),r.join("")):String.fromCharCode.apply(String,e.slice(0,t))},d.decode=function(f,u,a){for(var o,r=a,e=0,t=0;t<f.length;){var n=f.charCodeAt(t++);if(n===61&&e>1)break;if((n=c[n])===void 0)throw Error("invalid encoding");switch(e){case 0:o=n,e=1;break;case 1:u[a++]=o<<2|(48&n)>>4,o=n,e=2;break;case 2:u[a++]=(15&o)<<4|(60&n)>>2,o=n,e=3;break;case 3:u[a++]=(3&o)<<6|n,e=0}}if(e===1)throw Error("invalid encoding");return a-r},d.test=function(f){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(f)}},function(v,s,g){function d(){this._listeners={}}v.exports=d,d.prototype.on=function(h,c,p){return(this._listeners[h]||(this._listeners[h]=[])).push({fn:c,ctx:p||this}),this},d.prototype.off=function(h,c){if(h===void 0)this._listeners={};else if(c===void 0)this._listeners[h]=[];else for(var p=this._listeners[h],f=0;f<p.length;)p[f].fn===c?p.splice(f,1):++f;return this},d.prototype.emit=function(h){var c=this._listeners[h];if(c){for(var p=[],f=1;f<arguments.length;)p.push(arguments[f++]);for(f=0;f<c.length;)c[f].fn.apply(c[f++].ctx,p)}return this}},function(v,s,g){function d(u){return typeof Float32Array<"u"?function(){var a=new Float32Array([-0]),o=new Uint8Array(a.buffer),r=o[3]===128;function e(l,m,y){a[0]=l,m[y]=o[0],m[y+1]=o[1],m[y+2]=o[2],m[y+3]=o[3]}function t(l,m,y){a[0]=l,m[y]=o[3],m[y+1]=o[2],m[y+2]=o[1],m[y+3]=o[0]}function n(l,m){return o[0]=l[m],o[1]=l[m+1],o[2]=l[m+2],o[3]=l[m+3],a[0]}function i(l,m){return o[3]=l[m],o[2]=l[m+1],o[1]=l[m+2],o[0]=l[m+3],a[0]}u.writeFloatLE=r?e:t,u.writeFloatBE=r?t:e,u.readFloatLE=r?n:i,u.readFloatBE=r?i:n}():function(){function a(r,e,t,n){var i=e<0?1:0;if(i&&(e=-e),e===0)r(1/e>0?0:2147483648,t,n);else if(isNaN(e))r(2143289344,t,n);else if(e>34028234663852886e22)r((i<<31|2139095040)>>>0,t,n);else if(e<11754943508222875e-54)r((i<<31|Math.round(e/1401298464324817e-60))>>>0,t,n);else{var l=Math.floor(Math.log(e)/Math.LN2);r((i<<31|l+127<<23|8388607&Math.round(e*Math.pow(2,-l)*8388608))>>>0,t,n)}}function o(r,e,t){var n=r(e,t),i=2*(n>>31)+1,l=n>>>23&255,m=8388607&n;return l===255?m?NaN:i*(1/0):l===0?1401298464324817e-60*i*m:i*Math.pow(2,l-150)*(m+8388608)}u.writeFloatLE=a.bind(null,h),u.writeFloatBE=a.bind(null,c),u.readFloatLE=o.bind(null,p),u.readFloatBE=o.bind(null,f)}(),typeof Float64Array<"u"?function(){var a=new Float64Array([-0]),o=new Uint8Array(a.buffer),r=o[7]===128;function e(l,m,y){a[0]=l,m[y]=o[0],m[y+1]=o[1],m[y+2]=o[2],m[y+3]=o[3],m[y+4]=o[4],m[y+5]=o[5],m[y+6]=o[6],m[y+7]=o[7]}function t(l,m,y){a[0]=l,m[y]=o[7],m[y+1]=o[6],m[y+2]=o[5],m[y+3]=o[4],m[y+4]=o[3],m[y+5]=o[2],m[y+6]=o[1],m[y+7]=o[0]}function n(l,m){return o[0]=l[m],o[1]=l[m+1],o[2]=l[m+2],o[3]=l[m+3],o[4]=l[m+4],o[5]=l[m+5],o[6]=l[m+6],o[7]=l[m+7],a[0]}function i(l,m){return o[7]=l[m],o[6]=l[m+1],o[5]=l[m+2],o[4]=l[m+3],o[3]=l[m+4],o[2]=l[m+5],o[1]=l[m+6],o[0]=l[m+7],a[0]}u.writeDoubleLE=r?e:t,u.writeDoubleBE=r?t:e,u.readDoubleLE=r?n:i,u.readDoubleBE=r?i:n}():function(){function a(r,e,t,n,i,l){var m=n<0?1:0;if(m&&(n=-n),n===0)r(0,i,l+e),r(1/n>0?0:2147483648,i,l+t);else if(isNaN(n))r(0,i,l+e),r(2146959360,i,l+t);else if(n>17976931348623157e292)r(0,i,l+e),r((m<<31|2146435072)>>>0,i,l+t);else{var y;if(n<22250738585072014e-324)r((y=n/5e-324)>>>0,i,l+e),r((m<<31|y/4294967296)>>>0,i,l+t);else{var _=Math.floor(Math.log(n)/Math.LN2);_===1024&&(_=1023),r(4503599627370496*(y=n*Math.pow(2,-_))>>>0,i,l+e),r((m<<31|_+1023<<20|1048576*y&1048575)>>>0,i,l+t)}}}function o(r,e,t,n,i){var l=r(n,i+e),m=r(n,i+t),y=2*(m>>31)+1,_=m>>>20&2047,b=4294967296*(1048575&m)+l;return _===2047?b?NaN:y*(1/0):_===0?5e-324*y*b:y*Math.pow(2,_-1075)*(b+4503599627370496)}u.writeDoubleLE=a.bind(null,h,0,4),u.writeDoubleBE=a.bind(null,c,4,0),u.readDoubleLE=o.bind(null,p,0,4),u.readDoubleBE=o.bind(null,f,4,0)}(),u}function h(u,a,o){a[o]=255&u,a[o+1]=u>>>8&255,a[o+2]=u>>>16&255,a[o+3]=u>>>24}function c(u,a,o){a[o]=u>>>24,a[o+1]=u>>>16&255,a[o+2]=u>>>8&255,a[o+3]=255&u}function p(u,a){return(u[a]|u[a+1]<<8|u[a+2]<<16|u[a+3]<<24)>>>0}function f(u,a){return(u[a]<<24|u[a+1]<<16|u[a+2]<<8|u[a+3])>>>0}v.exports=d(d)},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(v){}return null}module.exports=inquire},function(v,s,g){var d=s;d.length=function(h){for(var c=0,p=0,f=0;f<h.length;++f)(p=h.charCodeAt(f))<128?c+=1:p<2048?c+=2:(64512&p)==55296&&(64512&h.charCodeAt(f+1))==56320?(++f,c+=4):c+=3;return c},d.read=function(h,c,p){if(p-c<1)return"";for(var f,u=null,a=[],o=0;c<p;)(f=h[c++])<128?a[o++]=f:f>191&&f<224?a[o++]=(31&f)<<6|63&h[c++]:f>239&&f<365?(f=((7&f)<<18|(63&h[c++])<<12|(63&h[c++])<<6|63&h[c++])-65536,a[o++]=55296+(f>>10),a[o++]=56320+(1023&f)):a[o++]=(15&f)<<12|(63&h[c++])<<6|63&h[c++],o>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,a)),o=0);return u?(o&&u.push(String.fromCharCode.apply(String,a.slice(0,o))),u.join("")):String.fromCharCode.apply(String,a.slice(0,o))},d.write=function(h,c,p){for(var f,u,a=p,o=0;o<h.length;++o)(f=h.charCodeAt(o))<128?c[p++]=f:f<2048?(c[p++]=f>>6|192,c[p++]=63&f|128):(64512&f)==55296&&(64512&(u=h.charCodeAt(o+1)))==56320?(f=65536+((1023&f)<<10)+(1023&u),++o,c[p++]=f>>18|240,c[p++]=f>>12&63|128,c[p++]=f>>6&63|128,c[p++]=63&f|128):(c[p++]=f>>12|224,c[p++]=f>>6&63|128,c[p++]=63&f|128);return p-a}},function(v,s,g){v.exports=function(d,h,c){var p=c||8192,f=p>>>1,u=null,a=p;return function(o){if(o<1||o>f)return d(o);a+o>p&&(u=d(p),a=0);var r=h.call(u,a,a+=o);return 7&a&&(a=1+(7|a)),r}}},function(v,s,g){v.exports=h;var d=g(6);function h(u,a){this.lo=u>>>0,this.hi=a>>>0}var c=h.zero=new h(0,0);c.toNumber=function(){return 0},c.zzEncode=c.zzDecode=function(){return this},c.length=function(){return 1};var p=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=function(u){if(u===0)return c;var a=u<0;a&&(u=-u);var o=u>>>0,r=(u-o)/4294967296>>>0;return a&&(r=~r>>>0,o=~o>>>0,++o>4294967295&&(o=0,++r>4294967295&&(r=0))),new h(o,r)},h.from=function(u){if(typeof u=="number")return h.fromNumber(u);if(d.isString(u)){if(!d.Long)return h.fromNumber(parseInt(u,10));u=d.Long.fromString(u)}return u.low||u.high?new h(u.low>>>0,u.high>>>0):c},h.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var a=1+~this.lo>>>0,o=~this.hi>>>0;return a||(o=o+1>>>0),-(a+4294967296*o)}return this.lo+4294967296*this.hi},h.prototype.toLong=function(u){return d.Long?new d.Long(0|this.lo,0|this.hi,!!u):{low:0|this.lo,high:0|this.hi,unsigned:!!u}};var f=String.prototype.charCodeAt;h.fromHash=function(u){return u===p?c:new h((f.call(u,0)|f.call(u,1)<<8|f.call(u,2)<<16|f.call(u,3)<<24)>>>0,(f.call(u,4)|f.call(u,5)<<8|f.call(u,6)<<16|f.call(u,7)<<24)>>>0)},h.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},h.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},h.prototype.zzDecode=function(){var u=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},h.prototype.length=function(){var u=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?a===0?u<16384?u<128?1:2:u<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:o<128?9:10}},function(v,s,g){v.exports=c;var d=g(28);(c.prototype=Object.create(d.prototype)).constructor=c;var h=g(6);function c(){d.call(this)}function p(f,u,a){f.length<40?h.utf8.write(f,u,a):u.utf8Write?u.utf8Write(f,a):u.write(f,a)}c._configure=function(){c.alloc=h._Buffer_allocUnsafe,c.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?function(f,u,a){u.set(f,a)}:function(f,u,a){if(f.copy)f.copy(u,a,0,f.length);else for(var o=0;o<f.length;)u[a++]=f[o++]}},c.prototype.bytes=function(f){h.isString(f)&&(f=h._Buffer_from(f,"base64"));var u=f.length>>>0;return this.uint32(u),u&&this._push(c.writeBytesBuffer,u,f),this},c.prototype.string=function(f){var u=h.Buffer.byteLength(f);return this.uint32(u),u&&this._push(p,u,f),this},c._configure()},function(v,s,g){v.exports=c;var d=g(29);(c.prototype=Object.create(d.prototype)).constructor=c;var h=g(6);function c(p){d.call(this,p)}c._configure=function(){h.Buffer&&(c.prototype._slice=h.Buffer.prototype.slice)},c.prototype.string=function(){var p=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+p,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+p,this.len))},c._configure()},function(v,s,g){s.Service=g(75)},function(v,s,g){v.exports=h;var d=g(6);function h(c,p,f){if(typeof c!="function")throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=c,this.requestDelimited=!!p,this.responseDelimited=!!f}(h.prototype=Object.create(d.EventEmitter.prototype)).constructor=h,h.prototype.rpcCall=function c(p,f,u,a,o){if(!a)throw TypeError("request must be specified");var r=this;if(!o)return d.asPromise(c,r,p,f,u,a);if(r.rpcImpl)try{return r.rpcImpl(p,f[r.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(e,t){if(e)return r.emit("error",e,p),o(e);if(t!==null){if(!(t instanceof u))try{t=u[r.responseDelimited?"decodeDelimited":"decode"](t)}catch(n){return r.emit("error",n,p),o(n)}return r.emit("data",t,p),o(null,t)}r.end(!0)})}catch(e){return r.emit("error",e,p),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},h.prototype.end=function(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(v,s,g){v.exports={}},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.batchNormalization=s.CpuBatchNormalization=void 0;var c=g(14),p=g(1),f=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){return[u(e[0],e[1],e[2],e[3],e[4],this.epsilon,this.momentum,this.spatial)]},o}(c.BatchNormalization);function u(a,o,r,e,t,n,i,l){for(var m=a.dims,y=m[0],_=m[1],b=1,w=2;w<m.length;w++)b*=m[w];for(var x=new p.Tensor(a.dims,a.type),S=a.floatData,A=x.floatData,T=o.numberData,E=r.numberData,N=e.numberData,M=t.numberData,j=0;j<y*_;j++){var k=j*b;for(w=0;w<b;w++)A[k+w]=T[j%_]*((S[k+w]-N[j%_])/Math.sqrt(M[j%_]+n))+E[j%_]}return x}s.CpuBatchNormalization=f,s.batchNormalization=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.CpuBinaryOp=void 0;var c=g(15),p=g(0),f=function(u){function a(o,r,e,t){var n=u.call(this,o,e,t)||this;return n.opLambda=r,n}return h(a,u),a.prototype.initialize=function(o){if(!this.opType&&!this.opLambda)throw new Error("Both opType and opLambda cannot be missing for a binary op");if(!this.opLambda)throw this.opType,new Error("Binary op could not be initialized. Missing op lambda.")},a.prototype.run=function(o,r){return[function(e,t,n,i,l){var m=p.BroadcastUtil.calc(e,t,n,i,l);if(!m)throw new Error("not broadcastable");return m}(r[0],r[1],this.opLambda,!1,this.resultType)]},a}(c.BinaryOp);s.CpuBinaryOp=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var m in l)l.hasOwnProperty(m)&&(i[m]=l[m])})(t,n)},function(t,n){function i(){this.constructor=t}d(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}),c=this&&this.__createBinding||(Object.create?function(t,n,i,l){l===void 0&&(l=i),Object.defineProperty(t,l,{enumerable:!0,get:function(){return n[i]}})}:function(t,n,i,l){l===void 0&&(l=i),t[l]=n[i]}),p=this&&this.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)i!=="default"&&Object.hasOwnProperty.call(t,i)&&c(n,t,i);return p(n,t),n};Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.CpuConcat=void 0;var u=g(30),a=g(1),o=f(g(0)),r=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return h(n,t),n.prototype.run=function(i,l){return[e(l,this.axis)]},n}(u.Concat);function e(t,n){var i=t[0],l=i.dims;if(n>=l.length||n<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=l.length+n);for(var m=l[n],y=new Array(l.length),_=1;_<t.length;_++)for(var b=(N=t[_]).dims,w=0;w<l.length;w++){if(w===n)m+=b[w];else if(l[w]!==b[w])throw new Error("non concat dimensions must match");y[w]=b[w]}y[n]=m;var x=new a.Tensor(y,i.type),S=x.numberData,A=1;for(_=y.length-1;_>=n;_--)A*=y[_];for(var T=0,E=0;E<t.length;E++){var N,M=1;for(_=(N=t[E]).dims.length-1;_>=n;_--)M*=N.dims[_];for(var j=N.numberData,k=o.ShapeUtil.size(N.dims),F=T,L=(_=0,0);_<k;_++)S[F+_]=j[_],++L===M&&(F+=A-M,L=0);T+=M}return x}s.CpuConcat=r,s.concat=e},function(v,s,g){var d,h=this&&this.__extends||(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var l in i)i.hasOwnProperty(l)&&(n[l]=i[l])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(s,"__esModule",{value:!0}),s.conv2d=s.CpuConv=void 0;var c=g(16),p=g(1),f=g(0),u=g(17),a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return h(t,e),t.prototype.run=function(n,i){var l=i[0],m=i[1],y=i.length===3?i[2]:void 0;if(this.kernelShape.length===0)for(var _=i[1].dims,b=2;b<_.length;++b)this.kernelShape.push(_[b]);var w=f.PoolConvUtil.computeConvOutputShape(l.dims,m.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),x=new p.Tensor(w,l.type);return o(x,l,m,y,this.dilations,this.group,this.pads,this.strides),[x]},t}(c.Conv);function o(e,t,n,i,l,m,y,_){for(var b=t.dims[0],w=t.dims[1],x=t.dims[2],S=t.dims[3],A=n.dims[0],T=n.dims[1],E=n.dims[2],N=n.dims[3],M=A*T*E*N,j=[E,N],k=e.dims[0],F=e.dims[1],L=e.dims[2],B=e.dims[3],V=L*B,R=w/m*(x*S),z=k*F*L*B/k/m,q=M/m,Z=w/m*(j[0]*j[1]),oe=new Float32Array(Z*V),ne=0;ne<b;++ne){for(var W=0,K=0,ae=0;ae<m;++ae)r(t.floatData.subarray(W+ae*R),oe,w/m,x,S,j[0],j[1],l[0],l[1],y[0],y[1],y[2],y[3],_[0],_[1]),u.matMul2d(n.floatData.subarray(ae*q),oe,e.floatData.subarray(K+ae*z),!1,!1,1,0,A/m,V,Z);W+=R*m,K+=z*m}if(i)for(var O=i.floatData,D=e.floatData,I=e.dims[0],U=e.dims[1],C=e.dims[2]*e.dims[3],G=U*C,H=0;H<I;++H)for(var X=0;X<U;++X)for(var ie=H*G+X*C,$=0;$<C;++$)D[ie+$]+=O[X]}function r(e,t,n,i,l,m,y,_,b,w,x,S,A,T,E){var N=1+~~((i+S+w-(_*(m-1)+1))/T),M=1+~~((l+x+A-(b*(y-1)+1))/E);if(_!==1||b!==1||x!==0||A!==0||w!==0||S!==0)for(var j=1+~~((i+w+S-(_*(m-1)+1))/T),k=1+~~((l+x+A-(b*(y-1)+1))/E),F=n*m*y,L=0;L<F;++L)for(var B=L%y,V=~~(L/y)%m,R=~~(L/(m*y)),z=0;z<j;++z)for(var q=0;q<k;++q){var Z=z*T-w+V*_,oe=q*E-x+B*b;t[(L*j+z)*k+q]=Z>=0&&Z<i&&oe>=0&&oe<l?e[(R*i+Z)*l+oe]:0}else for(var ne=0;ne<n*m*y;ne++)for(var W=~~(ne/(m*y)),K=ne%(m*y),ae=~~(K/y),O=K%y,D=W*(m*y*N*M)+ae*(y*N*M)+O*(N*M),I=W*(i*l),U=0;U<N;U++){var C=U*T+ae,G=O;if(E===1)t.set(e.subarray(I+C*l+G,I+C*l+G+M),D+U*M);else for(var H=0;H<M;H++)t[D+(U*M+H)]=e[I+(C*l+G+H*E)]}}s.CpuConv=a,s.conv2d=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.dropout=s.CpuDropout=void 0;var c=g(31),p=g(1),f=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){return[u(e[0],this.ratio,this.testMode)]},o}(c.Dropout);function u(a,o,r){if(!r)throw new Error("only test mode is supported");var e=new p.Tensor(a.dims,a.type),t=a.floatData;return e.numberData.set(t),e}s.CpuDropout=f,s.dropout=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.flatten=s.CpuFlatten=void 0;var c=g(32),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.axis)]},r}(c.Flatten);function a(o,r){var e=f.ShapeUtil.flattenShape(o.dims,r),t=new p.Tensor(e,o.type),n=o.numberData;return t.numberData.set(n),t}s.CpuFlatten=u,s.flatten=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.gather=s.CpuGather=void 0;var c=g(33),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],t[1],this.axis)]},r}(c.Gather);function a(o,r,e){e=f.ShapeUtil.normalizeAxis(e,o.dims.length);var t=o.dims.slice(),n=t.slice(),i=r.data;n[e]=i.length;for(var l=f.ShapeUtil.computeStrides(t),m=f.ShapeUtil.computeStrides(n),y=new p.Tensor(n,o.type).numberData,_=o.data,b=0;b<y.length;++b){var w=f.ShapeUtil.offsetToIndices(b,m),x=w.slice(),S=i[w[e]];x[e]=S<0?S+t[e]:S;var A=f.ShapeUtil.indicesToOffset(x,l);y[b]=_[A]}var T=t.slice(0,e).concat(r.dims).concat(t.slice(e+1));return new p.Tensor(T,o.type,void 0,void 0,y)}s.CpuGather=u,s.gather=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(i,l){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var _ in y)y.hasOwnProperty(_)&&(m[_]=y[_])})(i,l)},function(i,l){function m(){this.constructor=i}d(i,l),i.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}),c=this&&this.__createBinding||(Object.create?function(i,l,m,y){y===void 0&&(y=m),Object.defineProperty(i,y,{enumerable:!0,get:function(){return l[m]}})}:function(i,l,m,y){y===void 0&&(y=m),i[y]=l[m]}),p=this&&this.__setModuleDefault||(Object.create?function(i,l){Object.defineProperty(i,"default",{enumerable:!0,value:l})}:function(i,l){i.default=l}),f=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var l={};if(i!=null)for(var m in i)m!=="default"&&Object.hasOwnProperty.call(i,m)&&c(l,i,m);return p(l,i),l},u=this&&this.__read||function(i,l){var m=typeof Symbol=="function"&&i[Symbol.iterator];if(!m)return i;var y,_,b=m.call(i),w=[];try{for(;(l===void 0||l-- >0)&&!(y=b.next()).done;)w.push(y.value)}catch(x){_={error:x}}finally{try{y&&!y.done&&(m=b.return)&&m.call(b)}finally{if(_)throw _.error}}return w};Object.defineProperty(s,"__esModule",{value:!0}),s.gemm=s.CpuGemm=void 0;var a=g(19),o=g(1),r=f(g(0)),e=g(17),t=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.run=function(m,y){return[n(y[0],y[1],this.alpha,this.beta,this.transA,this.transB,y.length===3?y[2]:void 0)]},l}(a.Gemm);function n(i,l,m,y,_,b,w){var x=u(r.GemmUtil.getShapeOfGemmResult(i.dims,_,l.dims,b,w==null?void 0:w.dims),3),S=x[0],A=x[1],T=x[2],E=new o.Tensor([S,A],i.type);if(w&&r.BroadcastUtil.calc(E,w,function(N,M){return M},!0)!==E)throw new Error("tensor C is not broadcastable to [M,N]");return e.matMul2d(i.floatData,l.floatData,E.floatData,_,b,m,y,S,A,T),E}s.CpuGemm=t,s.gemm=n},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),c=this&&this.__read||function(o,r){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var t,n,i=e.call(o),l=[];try{for(;(r===void 0||r-- >0)&&!(t=i.next()).done;)l.push(t.value)}catch(m){n={error:m}}finally{try{t&&!t.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return l};Object.defineProperty(s,"__esModule",{value:!0}),s.imageScaler=s.CpuImageScaler=void 0;var p=g(34),f=g(1),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.bias,this.scale)]},r}(p.ImageScaler);function a(o,r,e){for(var t=c(o.dims,4),n=t[0],i=t[1],l=t[2],m=t[3],y=new f.Tensor([n,i,l,m],o.type),_=o.floatData,b=y.floatData,w=0;w<n*i;w++)for(var x=0;x<l*m;x++){var S=w*l*m+x;b[S]=_[S]*e+r[w%i]}return y}s.CpuImageScaler=u,s.imageScaler=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.instanceNormalization=s.CpuInstanceNormalization=void 0;var c=g(20),p=g(1),f=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){return[u(e[0],e[1],e[2],this.epsilon)]},o}(c.InstanceNormalization);function u(a,o,r,e){for(var t=a.dims,n=t[0],i=t[1],l=1,m=2;m<t.length;m++)l*=t[m];for(var y,_,b,w,x,S,A=new p.Tensor(a.dims,a.type),T=a.floatData,E=A.floatData,N=o.numberData,M=r.numberData,j=0;j<n*i;j++){for(x=(w=j*l)+l,S=j%i,y=0,m=w;m<x;++m)y+=T[m];for(_=y/l,y=0,m=w;m<x;++m)y+=Math.pow(T[m]-_,2);for(b=y/l,m=w;m<x;++m)E[m]=N[S]*((T[m]-_)/Math.sqrt(b+e))+M[S]}return A}s.CpuInstanceNormalization=f,s.instanceNormalization=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var m in l)l.hasOwnProperty(m)&&(i[m]=l[m])})(t,n)},function(t,n){function i(){this.constructor=t}d(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}),c=this&&this.__createBinding||(Object.create?function(t,n,i,l){l===void 0&&(l=i),Object.defineProperty(t,l,{enumerable:!0,get:function(){return n[i]}})}:function(t,n,i,l){l===void 0&&(l=i),t[l]=n[i]}),p=this&&this.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)i!=="default"&&Object.hasOwnProperty.call(t,i)&&c(n,t,i);return p(n,t),n};Object.defineProperty(s,"__esModule",{value:!0}),s.lrn=s.CpuLrn=void 0;var u=g(88),a=g(1),o=f(g(0)),r=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return h(n,t),n.prototype.run=function(i,l){return[e(l[0],this.alpha,this.beta,this.bias,this.size)]},n}(u.Lrn);function e(t,n,i,l,m){for(var y=t.dims[0],_=t.dims[1],b=t.floatData,w=1,x=2;x<t.dims.length;++x)w*=t.dims[x];var S=w*_,A=new a.Tensor(t.dims,t.type),T=new Array(o.ShapeUtil.size(t.dims));for(x=0;x<T.length;++x)T[x]=l;for(var E=new Float64Array((_+m-1)*w),N=n/m,M=(m-1)/2,j=0;j<y;++j){o.MathUtil.sqr(E,b,M*w,S*j,S);for(var k=0;k<m;++k)o.MathUtil.axpy(T,E,S*j,k*w,w,N);for(k=1;k<_;++k){var F=j*S+k*w;o.arrayCopyHelper(T,T,F,F-w,w),o.MathUtil.axpy(T,E,F,(k+m-1)*w,w,N),o.MathUtil.axpy(T,E,F,(k-1)*w,w,-N)}}return o.MathUtil.powx(T,T,0,0,o.ShapeUtil.size(t.dims),-i),o.MathUtil.mul(T,b,0,0,o.ShapeUtil.size(t.dims)),A.floatData.set(T),A}s.CpuLrn=r,s.lrn=e},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Lrn=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.alpha=c.getFloat("alpha",1e-4),this.beta=c.getFloat("beta",.75),this.bias=c.getFloat("bias",1),this.size=c.getInt("size")},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&!(c[0].dims.length<3)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Lrn=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(n,i){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,m){l.__proto__=m}||function(l,m){for(var y in m)m.hasOwnProperty(y)&&(l[y]=m[y])})(n,i)},function(n,i){function l(){this.constructor=n}d(n,i),n.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}),c=this&&this.__read||function(n,i){var l=typeof Symbol=="function"&&n[Symbol.iterator];if(!l)return n;var m,y,_=l.call(n),b=[];try{for(;(i===void 0||i-- >0)&&!(m=_.next()).done;)b.push(m.value)}catch(w){y={error:w}}finally{try{m&&!m.done&&(l=_.return)&&l.call(_)}finally{if(y)throw y.error}}return b},p=this&&this.__spread||function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(c(arguments[i]));return n};Object.defineProperty(s,"__esModule",{value:!0}),s.pad=s.CpuPad=void 0;var f=g(35),u=g(1),a=function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return h(i,n),i.prototype.run=function(l,m){return[o(m[0],this.mode,this.value,this.pads)]},i}(f.Pad);function o(n,i,l,m){var y=n.dims,_=function(S,A){var T=Array(S.length);Object.assign(T,S);for(var E=0;E<S.length;E++)T[E]+=A[E]+A[E+T.length];return T}(y,m),b=new u.Tensor(_,n.type);switch(i){case"constant":for(var w=0;w<_.reduce(function(S,A){return S*A},1);w++){var x=t(w,_);b.set(x,l)}for(w=0;w<y.reduce(function(S,A){return S*A},1);w++)x=t(w,y),b.set(x.map(function(S,A){return S+m[A]}),n.get(x));break;case"reflect":for(w=0;w<_.reduce(function(S,A){return S*A},1);w++)x=t(w,_),b.set(x,n.get(x.map(function(S,A){return r(S,m[A],y[A])})));break;case"edge":for(w=0;w<_.reduce(function(S,A){return S*A},1);w++)x=t(w,_),b.set(x,n.get(x.map(function(S,A){return e(S,m[A],y[A])})));break;default:throw Error("Illegal pad mode.")}return b}function r(n,i,l){if(n<i){var m=(i-n-1)%(l-1);return Math.floor((i-n-1)/(l-1))%2===1?l-m-2:m+1}return n<i+l?n-i:(m=(n-(i+l))%(l-1),Math.floor((n-(i+l))/(l-1))%2===0?l-m-2:m+1)}function e(n,i,l){return n<i?0:n<i+l?n-i:l-1}function t(n,i){if(n<0||i.some(function(m){return m<0}))throw Error("Array index out of range");var l=p(i);return l.reverse(),l.map(function(m,y,_){return Math.floor(n/function(b){return b.reduce(function(w,x){return w*x},1)}(_.slice(0,y)))%m}).reverse()}s.CpuPad=a,s.pad=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(m,y){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var w in b)b.hasOwnProperty(w)&&(_[w]=b[w])})(m,y)},function(m,y){function _(){this.constructor=m}d(m,y),m.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)});Object.defineProperty(s,"__esModule",{value:!0}),s.pool=s.globalMaxPool=s.maxPool=s.globalAveragePool=s.averagePool=s.CpuGlobalMaxPool=s.CpuMaxPool=s.CpuGlobalAveragePool=s.CpuAveragePool=void 0;var c=g(21),p=g(1),f=g(0),u=function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return h(y,m),y.prototype.run=function(_,b){return[e(b[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]},y}(c.AveragePool);s.CpuAveragePool=u;var a=function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return h(y,m),y.prototype.run=function(_,b){return[t(b[0])]},y}(c.GlobalAveragePool);s.CpuGlobalAveragePool=a;var o=function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return h(y,m),y.prototype.run=function(_,b){return[n(b[0],this.autoPad,this.kernelShape,this.pads,this.strides)]},y}(c.MaxPool);s.CpuMaxPool=o;var r=function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return h(y,m),y.prototype.run=function(_,b){return[i(b[0])]},y}(c.GlobalMaxPool);function e(m,y,_,b,w,x){return l(!1,m,y,_,b,w,x,0,function(S,A){return S+A},function(S,A){return S/A})}function t(m){return l(!0,m,"NOTSET",!1,[],[],[],0,function(y,_){return y+_},function(y,_){return y/_})}function n(m,y,_,b,w){return l(!1,m,y,!1,_,b,w,Number.MIN_SAFE_INTEGER,function(x,S){return Math.max(x,S)},function(x,S){return x})}function i(m){return l(!0,m,"NOTSET",!1,[],[],[],Number.MIN_SAFE_INTEGER,function(y,_){return Math.max(y,_)},function(y,_){return y})}function l(m,y,_,b,w,x,S,A,T,E){f.PoolConvUtil.adjustPoolAttributes(m,y.dims,w,S,x);for(var N=f.PoolConvUtil.computePoolOutputShape(m,y.dims,S,w,x,_),M=f.ShapeUtil.size(w),j=f.ShapeUtil.computeStrides(w),k=j.length,F=N.length,L=f.ShapeUtil.size(N),B=new p.Tensor(N,y.type),V=f.ShapeUtil.computeStrides(N),R=0;R<L;R++){for(var z=f.ShapeUtil.offsetToIndices(R,V),q=z.slice(0),Z=z.slice(0),oe=0;oe<k;oe++)q[F-k+oe]=z[F-k+oe]*S[oe];var ne=A,W=0,K=!1;for(oe=0;oe<M;oe++){var ae=f.ShapeUtil.offsetToIndices(oe,j);K=!1;for(var O=F-k;O<F;O++)if(Z[O]=q[O]+ae[O-F+k]-x[O-2],Z[O]>=y.dims[O]||Z[O]<0){W++,K=!0;break}ne=K?ne:T(ne,y.get(Z))}ne=E(ne,b?M:M-W),B.set(z,ne)}return B}s.CpuGlobalMaxPool=r,s.averagePool=e,s.globalAveragePool=t,s.maxPool=n,s.globalMaxPool=i,s.pool=l},function(v,s,g){var d,h=this&&this.__extends||(d=function(w,x){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,A){S.__proto__=A}||function(S,A){for(var T in A)A.hasOwnProperty(T)&&(S[T]=A[T])})(w,x)},function(w,x){function S(){this.constructor=w}d(w,x),w.prototype=x===null?Object.create(x):(S.prototype=x.prototype,new S)});Object.defineProperty(s,"__esModule",{value:!0}),s.reduceProd=s.reduceMean=s.reduceMin=s.reduceMax=s.reduceLogSum=s.reduceSumSquare=s.reduceSum=s.CpuReduceProd=s.CpuReduceMean=s.CpuReduceMin=s.CpuReduceMax=s.CpuReduceLogSum=s.CpuReduceSumSquare=s.CpuReduceSum=void 0;var c=g(36),p=g(0),f=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[n(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceSum=f;var u=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[i(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceSumSquare=u;var a=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[l(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceLogSum=a;var o=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[m(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceMax=o;var r=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[y(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceMin=r;var e=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[_(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);s.CpuReduceMean=e;var t=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.run=function(S,A){return[b(A[0],p.ShapeUtil.normalizeAxes(this.axes,A[0].dims.length),this.keepDims)]},x}(c.ReduceBase);function n(w,x,S){return p.ReduceUtil.calcReduce(w,x,S,function(A){return A},function(A,T){return A+T})}function i(w,x,S){return p.ReduceUtil.calcReduce(w,x,S,function(A){return A*A},function(A,T){return A+T})}function l(w,x,S){for(var A=p.ReduceUtil.calcReduce(w,x,S,function(N){return N},function(N,M){return N+M}),T=A.floatData.length,E=0;E<T;E++)A.floatData[E]=Math.log(A.floatData[E]);return A}function m(w,x,S){return p.ReduceUtil.calcReduce(w,x,S,function(A){return A},function(A,T){return Math.max(A,T)})}function y(w,x,S){return p.ReduceUtil.calcReduce(w,x,S,function(A){return A},function(A,T){return Math.min(A,T)})}function _(w,x,S){for(var A=p.ReduceUtil.calcReduce(w,x,S,function(j){return j},function(j,k){return j+k}),T=p.ReduceUtil.calcReduceShape(w.dims,x,S),E=p.ShapeUtil.size(w.dims)/p.ShapeUtil.size(T),N=A.floatData.length,M=0;M<N;M++)A.floatData[M]=A.floatData[M]/E;return A}function b(w,x,S){return p.ReduceUtil.calcReduce(w,x,S,function(A){return A},function(A,T){return A*T})}s.CpuReduceProd=t,s.reduceSum=n,s.reduceSumSquare=i,s.reduceLogSum=l,s.reduceMax=m,s.reduceMin=y,s.reduceMean=_,s.reduceProd=b},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.reshape=s.CpuReshape=void 0;var c=g(37),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],t[1])]},r}(c.Reshape);function a(o,r){var e=f.ShapeUtil.calculateReshapedDims(o.dims,r.integerData),t=new p.Tensor(e,o.type);return t.floatData.set(o.floatData),t}s.CpuReshape=u,s.reshape=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(s,"__esModule",{value:!0}),s.slice=s.CpuSliceV10=s.CpuSlice=void 0;var c=g(38),p=g(1),f=g(0),u=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){return[o(n[0],this.starts,this.ends,this.axes)]},e}(c.Slice);s.CpuSlice=u;var a=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){if(n.length>=5&&n[4].integerData.some(function(y){return y!==1}))throw new Error("currently non-1 steps is not supported for Slice");var i=Array.from(n[1].integerData),l=Array.from(n[2].integerData),m=n.length>=4?Array.from(n[3].integerData):[];return[o(n[0],i,l,m)]},e}(c.SliceV10);function o(r,e,t,n){n.length===0&&(n=r.dims.map(function(T,E){return E})),n=f.ShapeUtil.normalizeAxes(n,r.dims.length),e=e.map(function(T,E){return T>r.dims[n[E]]-1?r.dims[n[E]]:f.ShapeUtil.normalizeAxis(T,r.dims[n[E]])}),t=t.map(function(T,E){return T>r.dims[n[E]]-1?r.dims[n[E]]:f.ShapeUtil.normalizeAxis(T,r.dims[n[E]])});var i=[],l=[];n.forEach(function(T,E){i[T]=t[E]-e[E],l[T]=e[E]});for(var m=0;m<r.dims.length;m++)i[m]=i[m]||r.dims[m],l[m]=l[m]||0;var y=f.ShapeUtil.computeStrides(i),_=f.ShapeUtil.computeStrides(r.dims?r.dims:[r.data.length]),b=r.data,w=new p.Tensor(i,r.type),x=w.data;for(m=0;m<x.length;++m){var S=f.ShapeUtil.offsetToIndices(m,y).map(function(T,E){return T+l[E]}),A=f.ShapeUtil.indicesToOffset(S,_);x[m]=b[A]}return w}s.CpuSliceV10=a,s.slice=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var m in l)l.hasOwnProperty(m)&&(i[m]=l[m])})(t,n)},function(t,n){function i(){this.constructor=t}d(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}),c=this&&this.__createBinding||(Object.create?function(t,n,i,l){l===void 0&&(l=i),Object.defineProperty(t,l,{enumerable:!0,get:function(){return n[i]}})}:function(t,n,i,l){l===void 0&&(l=i),t[l]=n[i]}),p=this&&this.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)i!=="default"&&Object.hasOwnProperty.call(t,i)&&c(n,t,i);return p(n,t),n};Object.defineProperty(s,"__esModule",{value:!0}),s.softmax=s.CpuSoftmax=void 0;var u=g(22),a=g(1),o=f(g(0)),r=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return h(n,t),n.prototype.run=function(i,l){return[e(l[0],this.axis)]},n}(u.Softmax);function e(t,n){var i=t.dims,l=i.length;n=o.ShapeUtil.normalizeAxis(n,l);for(var m=o.ShapeUtil.sizeToDimension(i,n),y=o.ShapeUtil.sizeFromDimension(i,n),_=t.numberData,b=new a.Tensor(t.dims,t.type),w=b.numberData,x=0;x<m;x++){for(var S=x*y,A=Number.MIN_VALUE,T=0;T<y;T++)_[S+T]>A&&(A=_[S+T]);var E=0;for(T=0;T<y;T++){var N=_[S+T]-A;w[S+T]=Math.exp(N),E+=Math.exp(N)}for(T=0;T<y;T++)E===0?w[S+T]=0:w[S+T]/=E}return b}s.CpuSoftmax=r,s.softmax=e},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.squeeze=s.CpuSqueeze=void 0;var c=g(39),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.axes)]},r}(c.Squeeze);function a(o,r){var e=f.ShapeUtil.squeezeShape(o.dims,r),t=new p.Tensor(e,o.type),n=o.numberData;return t.numberData.set(n),t}s.CpuSqueeze=u,s.squeeze=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.sum=s.CpuSum=void 0;var c=g(23),p=g(1),f=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){return[u(e)]},o}(c.Sum);function u(a){for(var o=new p.Tensor(a[0].dims,a[0].type),r=a[0].floatData.length,e=o.floatData,t=0;t<a.length;t++)for(var n=a[t].floatData,i=0;i<r;++i)e[i]+=n[i];return o}s.CpuSum=f,s.sum=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.tile=s.CpuTile=void 0;var c=g(40),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],t[1])]},r}(c.Tile);function a(o,r){for(var e=o.dims?o.dims:[o.data.length],t=e.length,n=new Array(t),i=0;i<t;i++)n[i]=e[i]*r.numberData[i];var l=f.ShapeUtil.computeStrides(e),m=f.ShapeUtil.computeStrides(n),y=new p.Tensor(n,o.type),_=y.numberData,b=o.data;for(i=0;i<_.length;++i){for(var w=f.ShapeUtil.offsetToIndices(i,m),x=new Array(t),S=0;S<t;++S)x[S]=w[S]%o.dims[S];var A=f.ShapeUtil.indicesToOffset(x,l);_[i]=b[A]}return y}s.CpuTile=u,s.tile=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.transpose=s.CpuTranspose=void 0;var c=g(41),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.perm)]},r}(c.Transpose);function a(o,r){var e=o.dims,t=e.length,n=new Array(t);if(r.length===t)n=r;else for(var i=0;i<t;i++)n[i]=t-i-1;var l=new Array(t),m=new Array(t);for(i=0;i<t;i++){var y=n[i];l[i]=e[y],m[i]=y+1<t?f.ShapeUtil.sizeFromDimension(e,y+1):1}var _,b,w,x=new p.Tensor(l,o.type),S=o.floatData,A=x.floatData,T=0,E=1,N=1,M=!0;for(i=t-1;i>=0;--i){var j=n[i];M&&j===i?E*=e[j]:(M=!1,N*=e[j],++T)}return N===1?(_=E,b=A,w=S,f.arrayCopyHelper(b,w,0,0,_)):E===1?function(k,F,L,B,V,R){for(var z=new Array(k).fill(0),q=0,Z=0;Z<L;++Z){var oe=f.ShapeUtil.indicesToOffset(z,B,k);V[q++]=R[oe],f.ShapeUtil.incrementIndex(z,F,k)}}(T,l,N,m,A,S):function(k,F,L,B,V,R,z){for(var q=new Array(k).fill(0),Z=0,oe=0;oe<L;++oe){var ne=f.ShapeUtil.indicesToOffset(q,V,k);f.arrayCopyHelper(R,z,Z,0+ne,B),f.ShapeUtil.incrementIndex(q,F,k),Z+=B}}(T,l,N,E,m,A,S),x}s.CpuTranspose=u,s.transpose=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.unsqueeze=s.CpuUnsqueeze=void 0;var c=g(44),p=g(1),f=g(0),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return[a(t[0],this.axes)]},r}(c.Unsqueeze);function a(o,r){var e=f.ShapeUtil.unsqueezeShape(o.dims,r),t=new p.Tensor(e,o.type),n=o.numberData;return t.numberData.set(n),t}s.CpuUnsqueeze=u,s.unsqueeze=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.CpuUpsample=void 0;var c=g(45),p=g(1),f=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=this,n=e[0].dims,i=n.map(function(m,y){return Math.floor(m*t.scales[y])}),l=new p.Tensor(i,e[0].type);return this.mode==="nearest"?function(m,y,_,b,w){var x=_.length,S=new Array(x);S.fill(0);var A=new Array(x);A[x-1]=1;for(var T=x-2;T>=0;T--)A[T]=A[T+1]*_[T+1];var E=new Array(x);E.fill(0),E[x-1]=-1;for(var N=0,M=0;N<y.length;N++){for(var j=x-1;j>=0;j--){if(++E[j]<b[j]){var k=0,F=u(E[j],w[j]);k=Math.floor(F),(k=Math.max(0,Math.min(k,_[j]-1)))!==S[j]&&(M+=(k-S[j])*A[j],S[j]=k);break}E[j]=0,M+=(0-S[j])*A[j],S[j]=0}y[N]=m[M]}}(e[0].data,l.data,n,i,this.scales):function(m,y,_,b,w){var x=_.length===2,S=x?1:_[0],A=x?1:_[1],T=x?_[0]:_[2],E=x?_[1]:_[3],N=x?b[0]:b[2],M=x?b[1]:b[3];(function(j,k,F,L,B,V,R,z,q,Z){for(var oe=[],ne=[],W=new Array(R),K=new Array(R),ae=new Array(z),O=new Array(z),D=new Array(R),I=new Array(R),U=new Array(z),C=new Array(z),G=0;G<R;++G){var H=u(G,q);oe.push(H),H=Math.max(0,Math.min(H,B-1));var X=Math.min(Math.floor(H),B-1),ie=Math.min(X+1,B-1);X===ie?(D[G]=.5,I[G]=.5):(D[G]=Math.abs(H-X),I[G]=Math.abs(H-ie)),W[G]=V*X,K[G]=V*ie}for(var $=0;$<z;++$){var te=u($,Z);ne.push(te),te=Math.max(0,Math.min(te,V-1)),ae[$]=Math.min(Math.floor(te),V-1),O[$]=Math.min(ae[$]+1,V-1),ae[$]===O[$]?(U[$]=.5,C[$]=.5):(U[$]=Math.abs(te-ae[$]),C[$]=Math.abs(te-O[$]))}for(var le=0,J=0,Te=0;Te<F;++Te)for(var me=0;me<L;++me){for(G=0;G<R;++G)for($=0;$<z;++$){var he=j[le+W[G]+ae[$]],ye=j[le+W[G]+O[$]],fe=j[le+K[G]+ae[$]],ce=j[le+K[G]+O[$]];k[J+z*G+$]=C[$]*I[G]*he+U[$]*I[G]*ye+C[$]*D[G]*fe+U[$]*D[G]*ce}le+=B*V,J+=z*R}})(m,y,S,A,T,E,N,M,x?w[0]:w[2],x?w[1]:w[3])}(e[0].data,l.data,n,i,this.scales),[l]},o}(c.Upsample);function u(a,o){return a/o}s.CpuUpsample=f},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(t,n,i,l){l===void 0&&(l=i),Object.defineProperty(t,l,{enumerable:!0,get:function(){return n[i]}})}:function(t,n,i,l){l===void 0&&(l=i),t[l]=n[i]}),h=this&&this.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)i!=="default"&&Object.hasOwnProperty.call(t,i)&&d(n,t,i);return h(n,t),n},p=this&&this.__awaiter||function(t,n,i,l){return new(i||(i=Promise))(function(m,y){function _(x){try{w(l.next(x))}catch(S){y(S)}}function b(x){try{w(l.throw(x))}catch(S){y(S)}}function w(x){var S;x.done?m(x.value):(S=x.value,S instanceof i?S:new i(function(A){A(S)})).then(_,b)}w((l=l.apply(t,n||[])).next())})},f=this&&this.__generator||function(t,n){var i,l,m,y,_={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(x){return function(S){if(i)throw new TypeError("Generator is already executing.");for(;_;)try{if(i=1,l&&(m=2&S[0]?l.return:S[0]?l.throw||((m=l.return)&&m.call(l),0):l.next)&&!(m=m.call(l,S[1])).done)return m;switch(l=0,m&&(S=[2&S[0],m.value]),S[0]){case 0:case 1:m=S;break;case 4:return _.label++,{value:S[1],done:!1};case 5:_.label++,l=S[1],S=[0];continue;case 7:S=_.ops.pop(),_.trys.pop();continue;default:if(m=_.trys,!((m=m.length>0&&m[m.length-1])||S[0]!==6&&S[0]!==2)){_=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){_.label=S[1];break}if(S[0]===6&&_.label<m[1]){_.label=m[1],m=S;break}if(m&&_.label<m[2]){_.label=m[2],_.ops.push(S);break}m[2]&&_.ops.pop(),_.trys.pop();continue}S=n.call(t,_)}catch(A){S=[6,A],l=0}finally{i=m=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([w,x])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmBackend=s.bindingInitPromise=void 0;var u=c(g(46)),a=g(3),o=c(g(4)),r=g(106),e=function(){function t(){this.cpuFallback=!0,this.worker=function(){if(typeof navigator<"u"&&navigator){if(typeof navigator.hardwareConcurrency=="number")return Math.max(Math.ceil(navigator.hardwareConcurrency/2)-1,0);if(u.name==="Safari"&&u.os&&(u.os.family==="iOS"||u.os.family==="OS X"))return 1}return 0}(),this.initTimeout=5e3}return t.prototype.initialize=function(){return p(this,void 0,void 0,function(){return f(this,function(n){switch(n.label){case 0:return function(i){if(!Number.isFinite(i)||Number.isNaN(i))throw new Error(i+" is not valid number of workers");if(!Number.isInteger(i))throw new Error(i+" is not an integer and hence not valid number of workers")}(this.worker),[4,this.isWasmSupported()];case 1:return n.sent()?[2,!0]:[2,!1]}})})},t.prototype.createSessionHandler=function(n){return new r.WasmSessionHandler(this,n,this.cpuFallback)},t.prototype.dispose=function(){},t.prototype.isWasmSupported=function(){return p(this,void 0,void 0,function(){var n;return f(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,o.init(this.worker,this.initTimeout)];case 1:return i.sent(),[2,!0];case 2:return n=i.sent(),a.Logger.warning("WebAssembly","Unable to initialize WebAssembly backend. "+n),[2,!1];case 3:return[2]}})})},t}();s.WasmBackend=e},function(v,s){v.exports=function(g){return g.webpackPolyfill||(g.deprecate=function(){},g.paths=[],g.children||(g.children=[]),Object.defineProperty(g,"loaded",{enumerable:!0,get:function(){return g.l}}),Object.defineProperty(g,"id",{enumerable:!0,get:function(){return g.i}}),g.webpackPolyfill=1),g}},function(v,s,g){var d;Object.defineProperty(s,"__esModule",{value:!0}),s.now=s.WasmBinding=s.init=void 0;var h=!1,c=!1;s.init=function(){if(h)return Promise.resolve();if(c)throw new Error("multiple calls to 'init()' detected.");return c=!0,new Promise(function(f,u){(d=g(104))(d).then(function(){f(),c=!1,h=!0},function(a){c=!1,u(a)})})};var p=function(){function f(){this.ptr8=0,this.numBytesAllocated=0}return f.prototype.ccall=function(u){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];if(!h)throw new Error("wasm not initialized. please ensure 'init()' is called.");var r=s.now(),e=[],t=f.calculateOffsets(e,a);t>this.numBytesAllocated&&this.expandMemory(t),f.ccallSerialize(d.HEAPU8.subarray(this.ptr8,this.ptr8+t),e,a);var n=s.now();this.func(u,this.ptr8);var i=s.now();f.ccallDeserialize(d.HEAPU8.subarray(this.ptr8,this.ptr8+t),e,a);var l=s.now();return{startTime:r,endTime:l,startTimeFunc:n,endTimeFunc:i}},f.prototype.ccallRaw=function(u,a){if(!h)throw new Error("wasm not initialized. please ensure 'init()' is called.");var o=s.now(),r=a.byteLength;r>this.numBytesAllocated&&this.expandMemory(r),d.HEAPU8.subarray(this.ptr8,this.ptr8+r).set(a);var e=s.now();this.func(u,this.ptr8);var t=s.now();return a.set(d.HEAPU8.subarray(this.ptr8,this.ptr8+r)),{startTime:o,endTime:s.now(),startTimeFunc:e,endTimeFunc:t}},f.prototype.func=function(u,a){(0,d[u])(a)},f.calculateOffsets=function(u,a){for(var o=4+4*a.length,r=0;r<a.length;r++){var e=a[r],t=e[0],n=e[1],i=e[2],l=0;switch(n){case"bool":case"int32":case"float32":l=4;break;case"float64":l=8;break;case"boolptr":if(!t){u.push(0);continue}if(!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("boolptr requires boolean array or Uint8Array");l=4*Math.ceil(t.length/4);break;case"int32ptr":case"float32ptr":if(!t){u.push(0);continue}if(Array.isArray(t)){if(i==="inout"||i==="out")throw new TypeError("inout/out parameters must be ArrayBufferView for ptr types.");l=4*t.length}else{if(!ArrayBuffer.isView(t))throw new TypeError("unsupported data type in 'ccall()'");l=t.byteLength}break;default:throw new Error("not supported parameter type: "+n)}u.push(o),o+=l}return o},f.ccallSerialize=function(u,a,o){var r=new Int32Array(u.buffer,u.byteOffset),e=new Uint32Array(u.buffer,u.byteOffset),t=new Float32Array(u.buffer,u.byteOffset);e[0]=o.length;for(var n=0;n<o.length;n++){var i=o[n],l=i[0],m=i[1],y=i[2],_=a[n],b=_>>2;if(e[n+1]=_,y!=="out"&&_!==0)switch(m){case"bool":u[_]=l===!0?1:0;break;case"int32":r[b]=l;break;case"float32":t[b]=l;break;case"boolptr":var w=l;u.subarray(_,_+w.length).set(l);break;case"int32ptr":var x=l;r.subarray(b,b+x.length).set(x);break;case"float32ptr":var S=l;t.subarray(b,b+S.length).set(S);break;default:throw new Error("not supported parameter type: "+m)}}},f.ccallDeserialize=function(u,a,o){for(var r=new Float32Array(u.buffer,u.byteOffset),e=new Uint8Array(u.buffer,u.byteOffset),t=0;t<o.length;t++){var n=o[t],i=n[0],l=n[1],m=n[2],y=a[t],_=y>>2;if(m==="out"||m==="inout")switch(l){case"float32ptr":var b=i;b.set(r.subarray(_,_+b.length));break;case"boolptr":var w=i;w.set(e.subarray(y,y+w.length));break;default:throw new Error("not supported parameter type: "+l)}}},f.prototype.expandMemory=function(u){if(this.ptr8!==0&&d._free(this.ptr8),this.numBytesAllocated=2*u,this.ptr8=d._malloc(this.numBytesAllocated),this.ptr8===0)throw new Error("Unable to allocate requested amount of memory. Failing.")},f.prototype.dispose=function(){if(!h)throw new Error("wasm not initialized. please ensure 'init()' is called.");this.ptr8!==0&&d._free(this.ptr8)},f}();s.WasmBinding=p,s.now=typeof performance<"u"&&performance.now?function(){return performance.now()}:Date.now},function(v,s,g){(function(d,h,c){var p,f=(p=(p=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||d,function(u){u=(u=u||{})!==void 0?u:{};var a,o={};for(a in u)u.hasOwnProperty(a)&&(o[a]=u[a]);var r=!1,e=!1,t=!1,n=!1;r=typeof window=="object",e=typeof importScripts=="function",t=typeof h=="object"&&typeof h.versions=="object"&&typeof h.versions.node=="string",n=!r&&!t&&!e;var i,l,m,y,_="";function b(Y){return u.locateFile?u.locateFile(Y,_):_+Y}t?(_=e?g(47).dirname(_)+"/":c+"/",i=function(Y,ee){return m||(m=g(48)),y||(y=g(47)),Y=y.normalize(Y),m.readFileSync(Y,ee?null:"utf8")},l=function(Y){var ee=i(Y,!0);return ee.buffer||(ee=new Uint8Array(ee)),N(ee.buffer),ee},h.argv.length>1&&h.argv[1].replace(/\\/g,"/"),h.argv.slice(2),h.on("uncaughtException",function(Y){if(!(Y instanceof ge))throw Y}),h.on("unhandledRejection",le),u.inspect=function(){return"[Emscripten Module object]"}):n?(typeof read<"u"&&(i=function(Y){return read(Y)}),l=function(Y){var ee;return typeof readbuffer=="function"?new Uint8Array(readbuffer(Y)):(N(typeof(ee=read(Y,"binary"))=="object"),ee)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(r||e)&&(e?_=self.location.href:document.currentScript&&(_=document.currentScript.src),p&&(_=p),_=_.indexOf("blob:")!==0?_.substr(0,_.lastIndexOf("/")+1):"",i=function(Y){var ee=new XMLHttpRequest;return ee.open("GET",Y,!1),ee.send(null),ee.responseText},e&&(l=function(Y){var ee=new XMLHttpRequest;return ee.open("GET",Y,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}));var w=u.print||void 0,x=u.printErr||void 0;for(a in o)o.hasOwnProperty(a)&&(u[a]=o[a]);o=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&u.quit;var S,A;u.wasmBinary&&(S=u.wasmBinary),u.noExitRuntime&&u.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var T=new WebAssembly.Table({initial:31,maximum:31,element:"anyfunc"}),E=!1;function N(Y,ee){Y||le("Assertion failed: "+ee)}var M=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function j(Y,ee,de){for(var be=ee+de,ve=ee;Y[ve]&&!(ve>=be);)++ve;if(ve-ee>16&&Y.subarray&&M)return M.decode(Y.subarray(ee,ve));for(var _e="";ee<ve;){var Pe=Y[ee++];if(128&Pe){var ke=63&Y[ee++];if((224&Pe)!=192){var Ie=63&Y[ee++];if((Pe=(240&Pe)==224?(15&Pe)<<12|ke<<6|Ie:(7&Pe)<<18|ke<<12|Ie<<6|63&Y[ee++])<65536)_e+=String.fromCharCode(Pe);else{var Ce=Pe-65536;_e+=String.fromCharCode(55296|Ce>>10,56320|1023&Ce)}}else _e+=String.fromCharCode((31&Pe)<<6|ke)}else _e+=String.fromCharCode(Pe)}return _e}function k(Y,ee){return Y?j(L,Y,ee):""}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var F,L,B,V=65536;function R(Y,ee){return Y%ee>0&&(Y+=ee-Y%ee),Y}function z(Y){F=Y,u.HEAP8=new Int8Array(Y),u.HEAP16=new Int16Array(Y),u.HEAP32=B=new Int32Array(Y),u.HEAPU8=L=new Uint8Array(Y),u.HEAPU16=new Uint16Array(Y),u.HEAPU32=new Uint32Array(Y),u.HEAPF32=new Float32Array(Y),u.HEAPF64=new Float64Array(Y)}var q=5248800,Z=5760,oe=u.INITIAL_MEMORY||16777216;function ne(Y){for(;Y.length>0;){var ee=Y.shift();if(typeof ee!="function"){var de=ee.func;typeof de=="number"?ee.arg===void 0?u.dynCall_v(de):u.dynCall_vi(de,ee.arg):de(ee.arg===void 0?null:ee.arg)}else ee()}}(A=u.wasmMemory?u.wasmMemory:new WebAssembly.Memory({initial:oe/V}))&&(F=A.buffer),oe=F.byteLength,z(F),B[Z>>2]=q;var W=[],K=[],ae=[],O=[];function D(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)G(u.preRun.shift());ne(W)}function I(){ne(K)}function U(){ne(ae)}function C(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)H(u.postRun.shift());ne(O)}function G(Y){W.unshift(Y)}function H(Y){O.unshift(Y)}var X=0,ie=null;function $(Y){X++,u.monitorRunDependencies&&u.monitorRunDependencies(X)}function te(Y){if(X--,u.monitorRunDependencies&&u.monitorRunDependencies(X),X==0&&ie){var ee=ie;ie=null,ee()}}function le(Y){throw u.onAbort&&u.onAbort(Y),w(Y+=""),x(Y),E=!0,Y="abort("+Y+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(Y)}u.preloadedImages={},u.preloadedAudios={};var J="data:application/octet-stream;base64,";function Te(Y){return String.prototype.startsWith?Y.startsWith(J):Y.indexOf(J)===0}var me="onnx-wasm.wasm";function he(){try{if(S)return new Uint8Array(S);if(l)return l(me);throw"both async and sync fetching of the wasm failed"}catch(Y){le(Y)}}function ye(){return S||!r&&!e||typeof fetch!="function"?new Promise(function(Y,ee){Y(he())}):fetch(me,{credentials:"same-origin"}).then(function(Y){if(!Y.ok)throw"failed to load wasm binary file at '"+me+"'";return Y.arrayBuffer()}).catch(function(){return he()})}function fe(){var Y={env:re,wasi_snapshot_preview1:re};function ee(ve,_e){var Pe=ve.exports;u.asm=Pe,te()}function de(ve){ee(ve.instance)}function be(ve){return ye().then(function(_e){return WebAssembly.instantiate(_e,Y)}).then(ve,function(_e){x("failed to asynchronously prepare wasm: "+_e),le(_e)})}if($(),u.instantiateWasm)try{return u.instantiateWasm(Y,ee)}catch(ve){return x("Module.instantiateWasm callback failed with error: "+ve),!1}return function(){if(S||typeof WebAssembly.instantiateStreaming!="function"||Te(me)||typeof fetch!="function")return be(de);fetch(me,{credentials:"same-origin"}).then(function(ve){return WebAssembly.instantiateStreaming(ve,Y).then(de,function(_e){x("wasm streaming compile failed: "+_e),x("falling back to ArrayBuffer instantiation"),be(de)})})}(),{}}function ce(Y,ee,de,be){le("Assertion failed: "+k(Y)+", at: "+[ee?k(ee):"unknown filename",de,be?k(be):"unknown function"])}function we(Y){return pe(Y)}Te(me)||(me=b(me)),K.push({func:function(){ue()}});function xe(){return xe.uncaught_exceptions>0}function Ee(Y,ee,de){throw"uncaught_exception"in xe?xe.uncaught_exceptions++:xe.uncaught_exceptions=1,Y}function Ae(){le()}function De(){return L.length}function Le(){return 5760}function Oe(Y,ee,de){L.copyWithin(Y,ee,ee+de)}function Me(Y){try{return A.grow(Y-F.byteLength+65535>>16),z(A.buffer),1}catch{}}function je(Y){var ee=De();if(Y>2147418112)return!1;for(var de=1;de<=4;de*=2){var be=ee*(1+.2/de);if(be=Math.min(be,Y+100663296),Me(Math.min(2147418112,R(Math.max(16777216,Y,be),65536))))return!0}return!1}var Ne={mappings:{},buffers:[null,[],[]],printChar:function(Y,ee){var de=Ne.buffers[Y];ee===0||ee===10?((Y===1?w:x)(j(de,0)),de.length=0):de.push(ee)},varargs:void 0,get:function(){return Ne.varargs+=4,B[Ne.varargs-4>>2]},getStr:function(Y){return k(Y)},get64:function(Y,ee){return Y}};function Re(Y){return 0}function Ve(Y,ee,de,be,ve){}function Be(Y,ee,de,be){for(var ve=0,_e=0;_e<de;_e++){for(var Pe=B[ee+8*_e>>2],ke=B[ee+(8*_e+4)>>2],Ie=0;Ie<ke;Ie++)Ne.printChar(Y,L[Pe+Ie]);ve+=ke}return B[be>>2]=ve,0}function Fe(Y){}var re={__assert_fail:ce,__cxa_allocate_exception:we,__cxa_throw:Ee,abort:Ae,emscripten_get_sbrk_ptr:Le,emscripten_memcpy_big:Oe,emscripten_resize_heap:je,fd_close:Re,fd_seek:Ve,fd_write:Be,memory:A,setTempRet0:Fe,table:T},Q=fe();u.asm=Q;var se,ue=u.___wasm_call_ctors=function(){return(ue=u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},pe=(u._batch_normalization_f32=function(){return(u._batch_normalization_f32=u.asm.batch_normalization_f32).apply(null,arguments)},u._add_f32=function(){return(u._add_f32=u.asm.add_f32).apply(null,arguments)},u._sub_f32=function(){return(u._sub_f32=u.asm.sub_f32).apply(null,arguments)},u._mul_f32=function(){return(u._mul_f32=u.asm.mul_f32).apply(null,arguments)},u._div_f32=function(){return(u._div_f32=u.asm.div_f32).apply(null,arguments)},u._prelu_f32=function(){return(u._prelu_f32=u.asm.prelu_f32).apply(null,arguments)},u._xor_u8=function(){return(u._xor_u8=u.asm.xor_u8).apply(null,arguments)},u._or_u8=function(){return(u._or_u8=u.asm.or_u8).apply(null,arguments)},u._and_u8=function(){return(u._and_u8=u.asm.and_u8).apply(null,arguments)},u._clip_f32=function(){return(u._clip_f32=u.asm.clip_f32).apply(null,arguments)},u._conv_f32=function(){return(u._conv_f32=u.asm.conv_f32).apply(null,arguments)},u._gemm_f32=function(){return(u._gemm_f32=u.asm.gemm_f32).apply(null,arguments)},u._free=function(){return(u._free=u.asm.free).apply(null,arguments)},u._malloc=function(){return(pe=u._malloc=u.asm.malloc).apply(null,arguments)});u._instance_normalization_f32=function(){return(u._instance_normalization_f32=u.asm.instance_normalization_f32).apply(null,arguments)},u._matmul_f32=function(){return(u._matmul_f32=u.asm.matmul_f32).apply(null,arguments)},u._average_pool_f32=function(){return(u._average_pool_f32=u.asm.average_pool_f32).apply(null,arguments)},u._max_pool_f32=function(){return(u._max_pool_f32=u.asm.max_pool_f32).apply(null,arguments)},u._softmax_f32=function(){return(u._softmax_f32=u.asm.softmax_f32).apply(null,arguments)},u._sum_f32=function(){return(u._sum_f32=u.asm.sum_f32).apply(null,arguments)},u.___errno_location=function(){return(u.___errno_location=u.asm.__errno_location).apply(null,arguments)},u._fflush=function(){return(u._fflush=u.asm.fflush).apply(null,arguments)};function ge(Y){this.name="ExitStatus",this.message="Program terminated with exit("+Y+")",this.status=Y}function Se(Y){function ee(){se||(se=!0,u.calledRun=!0,E||(I(),U(),u.onRuntimeInitialized&&u.onRuntimeInitialized(),C()))}X>0||(D(),X>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),ee()},1)):ee()))}if(u._setThrew=function(){return(u._setThrew=u.asm.setThrew).apply(null,arguments)},u.stackSave=function(){return(u.stackSave=u.asm.stackSave).apply(null,arguments)},u.stackAlloc=function(){return(u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)},u.stackRestore=function(){return(u.stackRestore=u.asm.stackRestore).apply(null,arguments)},u.__growWasmMemory=function(){return(u.__growWasmMemory=u.asm.__growWasmMemory).apply(null,arguments)},u.dynCall_ii=function(){return(u.dynCall_ii=u.asm.dynCall_ii).apply(null,arguments)},u.dynCall_iiii=function(){return(u.dynCall_iiii=u.asm.dynCall_iiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)},u.dynCall_iidiiii=function(){return(u.dynCall_iidiiii=u.asm.dynCall_iidiiii).apply(null,arguments)},u.dynCall_vii=function(){return(u.dynCall_vii=u.asm.dynCall_vii).apply(null,arguments)},u.dynCall_vi=function(){return(u.dynCall_vi=u.asm.dynCall_vi).apply(null,arguments)},u.dynCall_viiiiii=function(){return(u.dynCall_viiiiii=u.asm.dynCall_viiiiii).apply(null,arguments)},u.dynCall_viiiii=function(){return(u.dynCall_viiiii=u.asm.dynCall_viiiii).apply(null,arguments)},u.dynCall_viiii=function(){return(u.dynCall_viiii=u.asm.dynCall_viiii).apply(null,arguments)},u.asm=Q,u.then=function(Y){if(se)Y(u);else{var ee=u.onRuntimeInitialized;u.onRuntimeInitialized=function(){ee&&ee(),Y(u)}}return u},ie=function Y(){se||Se(),se||(ie=Y)},u.run=Se,u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return Se(),u});v.exports=f}).call(this,"/index.js",g(24),"/")},function(v,s,g){g.r(s),s.default=function(){return new Worker(g.p+"onnx-worker.js")}},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.WasmSessionHandler=void 0;var d=g(11),h=g(27),c=g(107),p=g(108),f=function(){function u(a,o,r){this.backend=a,this.context=o,this.opResolveRules=r?p.WASM_OP_RESOLVE_RULES.concat(h.CPU_OP_RESOLVE_RULES):p.WASM_OP_RESOLVE_RULES}return u.prototype.createInferenceHandler=function(){return new c.WasmInferenceHandler(this,this.context.profiler)},u.prototype.dispose=function(){},u.prototype.resolve=function(a,o){var r=d.resolveOperator(a,o,this.opResolveRules);return r.initialize(a.attributes),r},u}();s.WasmSessionHandler=f},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.WasmInferenceHandler=void 0;var d=function(){function h(c,p){this.session=c,this.profiler=p}return h.prototype.dispose=function(){},h}();s.WasmInferenceHandler=d},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.WASM_OP_RESOLVE_RULES=void 0;var d=g(109),h=g(110),c=g(111),p=g(112),f=g(113),u=g(114),a=g(115),o=g(116),r=g(117),e=g(118);s.WASM_OP_RESOLVE_RULES=[["Add","","7+",function(){return new h.WasmBinaryOp(["float32"],"Add")}],["And","","7+",function(){return new h.WasmBinaryOp(["bool"],"And")}],["AveragePool","","7-10",function(){return new o.WasmAveragePool}],["BatchNormalization","","7+",function(){return new d.WasmBatchNormalization}],["Clip","","6-10",function(){return new c.WasmClip}],["Conv","","1+",function(){return new p.WasmConv}],["Div","","7+",function(){return new h.WasmBinaryOp(["float32"],"Div")}],["Gemm","","7-10",function(){return new f.WasmGemm(!1)}],["Gemm","","11+",function(){return new f.WasmGemm(!0)}],["GlobalAveragePool","","1+",function(){return new o.WasmGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new o.WasmGlobalMaxPool}],["InstanceNormalization","","6+",function(){return new u.WasmInstanceNormalization}],["MatMul","","1+",function(){return new a.WasmMatMul}],["MaxPool","","1-9",function(){return new o.WasmMaxPool}],["Mul","","7+",function(){return new h.WasmBinaryOp(["float32"],"Mul")}],["Or","","7+",function(){return new h.WasmBinaryOp(["bool"],"Or")}],["PRelu","","7+",function(){return new h.WasmBinaryOp(["float32"],"PRelu")}],["Softmax","","1+",function(){return new r.WasmSoftmax}],["Sub","","7+",function(){return new h.WasmBinaryOp(["float32"],"Sub")}],["Sum","","6+",function(){return new e.WasmSum}],["Xor","","7+",function(){return new h.WasmBinaryOp(["bool"],"Xor")}]]},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WasmBatchNormalization=void 0;var c=g(14),p=g(1),f=g(4),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){for(var t=e[0],n=e[1],i=e[2],l=e[3],m=e[4],y=1,_=2;_<t.dims.length;_++)y*=t.dims[_];var b=new p.Tensor(t.dims,t.type);return f.WasmBinding.getInstance().ccall("_batch_normalization_f32",[t.floatData,"float32ptr"],[b.floatData,"float32ptr","out"],[t.dims[0],"int32"],[t.dims[1],"int32"],[y,"int32"],[n.floatData,"float32ptr"],[i.floatData,"float32ptr"],[l.floatData,"float32ptr"],[m.floatData,"float32ptr"],[this.epsilon,"float32"]),[b]},o.prototype.checkInputTypes=function(r){var e=r[0],t=r[1],n=r[2],i=r[3],l=r[4];return!(e.dims.length<3||t.dims.length!==1||n.dims.length!==1||i.dims.length!==1||l.dims.length!==1)&&t.dims[0]===e.dims[1]&&n.dims[0]===e.dims[1]&&i.dims[0]===e.dims[1]&&l.dims[0]===e.dims[1]&&e.type==="float32"&&t.type==="float32"&&n.type==="float32"&&i.type==="float32"&&l.type==="float32"},o}(c.BatchNormalization);s.WasmBatchNormalization=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.WasmBinaryOp=void 0;var c=g(15),p=g(1),f=g(0),u=g(4),a=function(o){function r(e,t,n){return o.call(this,e,t,n)||this}return h(r,o),r.prototype.run=function(e,t){var n=f.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!n)throw new Error("not broadcastable");var i,l="",m="";switch(this.opType){case"Add":t[0].type==="float32"&&(l="_add_f32",m="float32InFloat32Out");break;case"Sub":t[0].type==="float32"&&(l="_sub_f32",m="float32InFloat32Out");break;case"Mul":t[0].type==="float32"&&(l="_mul_f32",m="float32InFloat32Out");break;case"Div":t[0].type==="float32"&&(l="_div_f32",m="float32InFloat32Out");break;case"PRelu":t[0].type==="float32"&&(l="_prelu_f32",m="float32InFloat32Out");break;case"Xor":l="_xor_u8",m="boolInBoolOut";break;case"Or":l="_or_u8",m="boolInBoolOut";break;case"And":l="_and_u8",m="boolInBoolOut";break;default:throw Error("unsupported binary op by the Wasm backend")}if(m==="float32InFloat32Out")i=new p.Tensor(n,"float32"),u.WasmBinding.getInstance().ccall(l,[t[0].floatData,"float32ptr"],[t[0].dims.length,"int32"],[t[0].dims,"int32ptr"],[t[1].floatData,"float32ptr"],[t[1].dims.length,"int32"],[t[1].dims,"int32ptr"],[i.floatData,"float32ptr","out"],[i.floatData.length,"int32"],[n.length,"int32"],[n,"int32ptr"]);else{if(m!=="boolInBoolOut")throw new Error("Unsupported binary op format. Probably unsupported data types.");i=new p.Tensor(n,"bool"),u.WasmBinding.getInstance().ccall(l,[t[0].integerData,"boolptr"],[t[0].dims.length,"int32"],[t[0].dims,"int32ptr"],[t[1].integerData,"boolptr"],[t[1].dims.length,"int32"],[t[1].dims,"int32ptr"],[i.integerData,"boolptr","out"],[i.integerData.length,"int32"],[n.length,"int32"],[n,"int32ptr"])}return[i]},r}(c.BinaryOp);s.WasmBinaryOp=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WasmClip=void 0;var c=g(49),p=g(1),f=g(4),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=new p.Tensor(e[0].dims,e[0].type),n=t.floatData.length;if(e[0].type!=="float32")throw new Error("Unsupported input type for Clip operator.");return f.WasmBinding.getInstance().ccall("_clip_f32",[e[0].floatData,"float32ptr"],[t.floatData,"float32ptr","out"],[n,"int32"],[this.min,"float32"],[this.max,"float32"]),[t]},o.prototype.checkInputTypes=function(r){return r[0].type==="float32"},o}(c.Clip);s.WasmClip=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var l in i)i.hasOwnProperty(l)&&(n[l]=i[l])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(l,m){function y(w){try{b(i.next(w))}catch(x){m(x)}}function _(w){try{b(i.throw(w))}catch(x){m(x)}}function b(w){var x;w.done?l(w.value):(x=w.value,x instanceof n?x:new n(function(S){S(x)})).then(y,_)}b((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,l,m,y={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return m={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function _(b){return function(w){return function(x){if(n)throw new TypeError("Generator is already executing.");for(;y;)try{if(n=1,i&&(l=2&x[0]?i.return:x[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,x[1])).done)return l;switch(i=0,l&&(x=[2&x[0],l.value]),x[0]){case 0:case 1:l=x;break;case 4:return y.label++,{value:x[1],done:!1};case 5:y.label++,i=x[1],x=[0];continue;case 7:x=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!((l=l.length>0&&l[l.length-1])||x[0]!==6&&x[0]!==2)){y=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){y.label=x[1];break}if(x[0]===6&&y.label<l[1]){y.label=l[1],l=x;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(x);break}l[2]&&y.ops.pop(),y.trys.pop();continue}x=t.call(e,y)}catch(S){x=[6,S],i=0}finally{n=l=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([b,w])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmConv=void 0;var f=g(16),u=g(1),a=g(0),o=g(4),r=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return h(t,e),t.prototype.run=function(n,i){return c(this,void 0,void 0,function(){var l,m,y,_,b,w,x,S,A,T,E,N,M,j,k,F,L,B;return p(this,function(V){switch(V.label){case 0:if(l=i[0],m=i[1],y=i.length===3?i[2]:void 0,this.kernelShape.length===0)for(_=i[1].dims,B=2;B<_.length;++B)this.kernelShape.push(_[B]);return b=a.PoolConvUtil.computeConvOutputShape(l.dims,m.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),w=new u.Tensor(b,l.type),(x=function(R,z,q,Z){return R!==1||z!==1||q===1||Z<=0?1:Math.min(q,Z+1)}(l.dims[0],this.group,m.dims[0],o.WasmBinding.workerNumber))!==1?[3,1]:(o.WasmBinding.getInstance().ccall("_conv_f32",[l.floatData,"float32ptr"],[l.dims,"int32ptr"],[m.floatData,"float32ptr"],[m.dims,"int32ptr"],[w.floatData,"float32ptr","out"],[w.dims,"int32ptr"],[y?y.floatData:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]),[2,[w]]);case 1:for((S=m.dims.slice(0))[0]=Math.floor(m.dims[0]/x),A=S[0]*S[1]*S[2]*S[3],(T=m.dims.slice(0))[0]=m.dims[0]-(x-1)*S[0],E=[1,S[0],b[2],b[3]],N=S[0]*b[2]*b[3],M=[1,T[0],b[2],b[3]],j=new Array(x),k=new Array(x),F=new Array(x),L=new Array(x-1),B=0;B<x;++B)B!==x-1?(j[B]=m.floatData.subarray(B*A,(B+1)*A),k[B]=w.floatData.subarray(B*N,(B+1)*N),y&&(F[B]=y.floatData.subarray(B*S[0],(B+1)*S[0])),L[B]=o.WasmBinding.getInstance().ccallRemote(B,"_conv_f32",[l.floatData,"float32ptr"],[l.dims,"int32ptr"],[j[B],"float32ptr"],[S,"int32ptr"],[k[B],"float32ptr","out"],[E,"int32ptr"],[F.length>0?F[B]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"])):(j[B]=m.floatData.subarray(B*A),k[B]=w.floatData.subarray(B*N),y&&(F[B]=y.floatData.subarray(B*S[0])),o.WasmBinding.getInstance().ccall("_conv_f32",[l.floatData,"float32ptr"],[l.dims,"int32ptr"],[j[B],"float32ptr"],[T,"int32ptr"],[k[B],"float32ptr","out"],[M,"int32ptr"],[F.length>0?F[B]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]));return[4,Promise.all(L)];case 2:return V.sent(),[2,[w]]}})})},t.prototype.checkInputTypes=function(n){return n[0].type==="float32"&&n[1].type==="float32"&&(n.length!==3||n[2].type==="float32")},t}(f.Conv);s.WasmConv=r},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),c=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmGemm=void 0;var p=g(19),f=g(1),u=g(0),a=g(4),o=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){var i=n[0],l=n[1],m=n[2],y=c(u.GemmUtil.getShapeOfGemmResult(i.dims,this.transA,l.dims,this.transB,m==null?void 0:m.dims),2),_=y[0],b=y[1],w=new f.Tensor([_,b],i.type);if(m&&!u.BroadcastUtil.calc(w,m,function(x,S){return S},!0))throw new Error("c is not broadcastable to the shape of the result of the Gemm operator");return a.WasmBinding.getInstance().ccall("_gemm_f32",[this.transA,"bool"],[this.transB,"bool"],[this.transA?i.dims[1]:i.dims[0],"int32"],[this.transB?l.dims[0]:l.dims[1],"int32"],[this.transA?i.dims[0]:i.dims[1],"int32"],[this.alpha,"float32"],[i.floatData,"float32ptr"],[l.floatData,"float32ptr"],[this.beta,"float32"],[w.floatData,"float32ptr","inout"]),[w]},e.prototype.checkInputTypes=function(t){return t[0].type==="float32"&&t[1].type==="float32"&&t[2].type==="float32"&&t[0].type===t[1].type&&t[0].type===t[2].type},e}(p.Gemm);s.WasmGemm=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WasmInstanceNormalization=void 0;var c=g(20),p=g(1),f=g(4),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){for(var t=e[0],n=e[1],i=e[2],l=1,m=2;m<t.dims.length;m++)l*=t.dims[m];var y=new p.Tensor(t.dims,t.type);return f.WasmBinding.getInstance().ccall("_instance_normalization_f32",[t.floatData,"float32ptr"],[y.floatData,"float32ptr","out"],[t.dims[0],"int32"],[t.dims[1],"int32"],[l,"int32"],[n.floatData,"float32ptr"],[i.floatData,"float32ptr"],[this.epsilon,"float32"]),[y]},o.prototype.checkInputTypes=function(r){var e=r[0],t=r[1],n=r[2];return!(e.dims.length<3||t.dims.length!==1||n.dims.length!==1)&&t.dims[0]===e.dims[1]&&n.dims[0]===e.dims[1]&&e.type==="float32"&&t.type==="float32"&&n.type==="float32"},o}(c.InstanceNormalization);s.WasmInstanceNormalization=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),c=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmMatMul=void 0;var p=g(18),f=g(1),u=g(0),a=g(4),o=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){var i=c(u.MatMulUtil.preprocessInputShapes(n[0].dims,n[1].dims),2),l=i[0],m=i[1],y=u.BroadcastUtil.calcShape(l,m,!0);if(!y)throw new Error("input dimensions do not match the requirement");var _=u.ShapeUtil.size(y),b=new Float32Array(_);a.WasmBinding.getInstance().ccall("_matmul_f32",[n[0].floatData,"float32ptr"],[n[0].dims,"int32ptr"],[n[0].dims.length,"int32"],[n[1].floatData,"float32ptr"],[n[1].dims,"int32ptr"],[n[1].dims.length,"int32"],[b,"float32ptr","out"],[b.length,"int32"],[y,"int32ptr"],[y.length,"int32"]),u.MatMulUtil.postprocessOutputShape(y,n[0].dims.length,n[1].dims.length);var w=new f.Tensor(y,n[0].type);return w.floatData.set(b),[w]},e.prototype.checkInputTypes=function(t){return t[0].type==="float32"&&t[1].type==="float32"&&t[0].type===t[1].type},e}(p.MatMul);s.WasmMatMul=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(w,x){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,A){S.__proto__=A}||function(S,A){for(var T in A)A.hasOwnProperty(T)&&(S[T]=A[T])})(w,x)},function(w,x){function S(){this.constructor=w}d(w,x),w.prototype=x===null?Object.create(x):(S.prototype=x.prototype,new S)}),c=this&&this.__awaiter||function(w,x,S,A){return new(S||(S=Promise))(function(T,E){function N(k){try{j(A.next(k))}catch(F){E(F)}}function M(k){try{j(A.throw(k))}catch(F){E(F)}}function j(k){var F;k.done?T(k.value):(F=k.value,F instanceof S?F:new S(function(L){L(F)})).then(N,M)}j((A=A.apply(w,x||[])).next())})},p=this&&this.__generator||function(w,x){var S,A,T,E,N={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return E={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function M(j){return function(k){return function(F){if(S)throw new TypeError("Generator is already executing.");for(;N;)try{if(S=1,A&&(T=2&F[0]?A.return:F[0]?A.throw||((T=A.return)&&T.call(A),0):A.next)&&!(T=T.call(A,F[1])).done)return T;switch(A=0,T&&(F=[2&F[0],T.value]),F[0]){case 0:case 1:T=F;break;case 4:return N.label++,{value:F[1],done:!1};case 5:N.label++,A=F[1],F=[0];continue;case 7:F=N.ops.pop(),N.trys.pop();continue;default:if(T=N.trys,!((T=T.length>0&&T[T.length-1])||F[0]!==6&&F[0]!==2)){N=0;continue}if(F[0]===3&&(!T||F[1]>T[0]&&F[1]<T[3])){N.label=F[1];break}if(F[0]===6&&N.label<T[1]){N.label=T[1],T=F;break}if(T&&N.label<T[2]){N.label=T[2],N.ops.push(F);break}T[2]&&N.ops.pop(),N.trys.pop();continue}F=x.call(w,N)}catch(L){F=[6,L],A=0}finally{S=T=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([j,k])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmGlobalMaxPool=s.WasmMaxPool=s.WasmGlobalAveragePool=s.WasmAveragePool=void 0;var f=g(21),u=g(1),a=g(0),o=g(4),r=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.checkInputTypes=function(S){return i(S)},x.prototype.run=function(S,A){return c(this,void 0,void 0,function(){return p(this,function(T){return[2,l(A[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]})})},x}(f.AveragePool);s.WasmAveragePool=r;var e=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.checkInputTypes=function(S){return i(S)},x.prototype.run=function(S,A){return c(this,void 0,void 0,function(){return p(this,function(T){return[2,m(A[0])]})})},x}(f.GlobalAveragePool);s.WasmGlobalAveragePool=e;var t=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.checkInputTypes=function(S){return i(S)},x.prototype.run=function(S,A){return c(this,void 0,void 0,function(){return p(this,function(T){return[2,y(A[0],this.autoPad,this.kernelShape,this.pads,this.strides)]})})},x}(f.MaxPool);s.WasmMaxPool=t;var n=function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return h(x,w),x.prototype.checkInputTypes=function(S){return i(S)},x.prototype.run=function(S,A){return c(this,void 0,void 0,function(){return p(this,function(T){return[2,_(A[0])]})})},x}(f.GlobalMaxPool);function i(w){return w[0].type==="float32"}function l(w,x,S,A,T,E){return c(this,void 0,void 0,function(){return p(this,function(N){return[2,b(!1,1,w,x,S,A,T,E)]})})}function m(w){return c(this,void 0,void 0,function(){return p(this,function(x){return[2,b(!0,1,w,"NOTSET",!1,[],[],[])]})})}function y(w,x,S,A,T){return c(this,void 0,void 0,function(){return p(this,function(E){return[2,b(!1,2,w,x,!1,S,A,T)]})})}function _(w){return c(this,void 0,void 0,function(){return p(this,function(x){return[2,b(!0,2,w,"NOTSET",!1,[],[],[])]})})}function b(w,x,S,A,T,E,N,M){return c(this,void 0,void 0,function(){var j,k,F,L,B,V,R,z,q,Z,oe,ne,W,K;return p(this,function(ae){switch(ae.label){case 0:switch(j="",x){case 1:j="_average_pool_f32";break;case 2:j="_max_pool_f32";break;default:throw new Error("unknown pool type")}return a.PoolConvUtil.adjustPoolAttributes(w,S.dims,E,M,N),k=a.PoolConvUtil.computePoolOutputShape(w,S.dims,M,E,N,A),F=new u.Tensor(k,S.type),(L=function(O,D,I){return O!==1||D===1||I<=0?1:Math.min(D,I+1)}(S.dims[0],S.dims[1],o.WasmBinding.workerNumber))!==1?[3,1]:(o.WasmBinding.getInstance().ccall(j,[E.length,"int32"],[w,"bool"],[S.floatData,"float32ptr"],[S.dims,"int32ptr"],[F.floatData,"float32ptr","out"],[F.dims,"int32ptr"],[E,"int32ptr"],[N,"int32ptr"],[M,"int32ptr"],[T,"bool"]),[3,3]);case 1:for((B=S.dims.slice(0))[1]=Math.floor(S.dims[1]/L),V=a.ShapeUtil.size(B),(R=S.dims.slice(0))[1]=S.dims[1]-(L-1)*B[1],(z=k.slice(0))[1]=B[1],q=a.ShapeUtil.size(z),(Z=k.slice(0))[1]=R[1],oe=new Array(L-1),ne=S.floatData,W=F.floatData,K=0;K<L;++K)K!==L-1?oe[K]=o.WasmBinding.getInstance().ccallRemote(K,j,[E.length,"int32"],[w,"bool"],[ne.subarray(K*V,(K+1)*V),"float32ptr"],[B,"int32ptr"],[W.subarray(K*q,(K+1)*q),"float32ptr","out"],[z,"int32ptr"],[E,"int32ptr"],[N,"int32ptr"],[M,"int32ptr"],[T,"bool"]):o.WasmBinding.getInstance().ccall(j,[E.length,"int32"],[w,"bool"],[ne.subarray((L-1)*V),"float32ptr"],[R,"int32ptr"],[W.subarray((L-1)*q),"float32ptr","out"],[Z,"int32ptr"],[E,"int32ptr"],[N,"int32ptr"],[M,"int32ptr"],[T,"bool"]);return[4,Promise.all(oe)];case 2:ae.sent(),ae.label=3;case 3:return[2,[F]]}})})}s.WasmGlobalMaxPool=n},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.WasmSoftmax=void 0;var c=g(22),p=g(1),f=g(0),u=g(4),a=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){var n=t[0],i=f.ShapeUtil.normalizeAxis(this.axis,n.dims.length),l=f.ShapeUtil.sizeToDimension(n.dims,i),m=f.ShapeUtil.sizeFromDimension(n.dims,i),y=new p.Tensor(n.dims,n.type);return u.WasmBinding.getInstance().ccall("_softmax_f32",[n.floatData,"float32ptr"],[y.floatData,"float32ptr","out"],[l,"int32"],[m,"int32"]),[y]},r.prototype.checkInputTypes=function(e){return e[0].type==="float32"},r}(c.Softmax);s.WasmSoftmax=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),c=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m},p=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(c(arguments[e]));return r};Object.defineProperty(s,"__esModule",{value:!0}),s.WasmSum=void 0;var f=g(23),u=g(1),a=g(4),o=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){for(var i,l=new u.Tensor(n[0].dims,n[0].type),m=n[0].floatData.length,y=new Array(n.length),_=0;_<n.length;_++)y[_]=[n[_].floatData,"float32ptr"];return(i=a.WasmBinding.getInstance()).ccall.apply(i,p(["_sum_f32",[n.length,"int32"],[m,"int32"],[l.floatData,"float32ptr","inout"]],y)),[l]},e.prototype.checkInputTypes=function(t){if(t[0].type!=="float32")return!1;for(var n=1;n<t.length;n++)if(t[0].type!==t[n].type)return!1;return!0},e}(f.Sum);s.WasmSum=o},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLBackend=void 0;var d=g(3),h=g(120),c=g(165),p=function(){function f(){}return f.prototype.initialize=function(){try{return this.glContext=c.createWebGLContext(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),d.Logger.verbose("WebGLBackend","Created WebGLContext: "+typeof this.glContext),!0}catch(u){return d.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. "+u),!1}},f.prototype.createSessionHandler=function(u){return new h.WebGLSessionHandler(this,u)},f.prototype.dispose=function(){this.glContext.dispose()},f}();s.WebGLBackend=p},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSessionHandler=void 0;var d=g(3),h=g(11),c=g(121),p=g(123),f=g(154),u=g(163),a=g(164),o=function(){function r(e,t){this.backend=e,this.context=t,this.programManager=new f.ProgramManager(this.context.profiler,e.glContext),this.layoutStrategy=new u.AlwaysKeepOriginalSizeStrategy(e.glContext.maxTextureSize),this.textureManager=new a.TextureManager(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:e.textureCacheMode==="full"}),this.textureDataCache=new Map}return r.prototype.createInferenceHandler=function(){return new c.WebGLInferenceHandler(this)},r.prototype.onGraphInitialized=function(e){var t=e.getValues().filter(function(n){return n.from===-1&&n.tensor}).map(function(n){return n.tensor.dataId});this.initializers=new Set(t)},r.prototype.isInitializer=function(e){return!!this.initializers&&this.initializers.has(e)},r.prototype.getTextureData=function(e){return this.textureDataCache.get(e)},r.prototype.setTextureData=function(e,t){d.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),this.textureDataCache.set(e,t)},r.prototype.dispose=function(){var e=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.textureDataCache.forEach(function(t){return e.textureManager.releaseTexture(t,!0)}),this.textureDataCache=new Map},r.prototype.resolve=function(e,t){var n=h.resolveOperator(e,t,p.WEBGL_OP_RESOLVE_RULES);return n.initialize(e.attributes),n},r}();s.WebGLSessionHandler=o},function(v,s,g){var d=this&&this.__assign||function(){return(d=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)},h=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLInferenceHandler=void 0;var c=g(3),p=g(1),f=g(0),u=g(122),a=g(50),o=function(){function r(e){this.session=e,this.textureDataCache=new Map}return r.prototype.run=function(e,t){var n=this.session.programManager.getArtifact(e);if(!n){var i=e.createProgramInfo(this,t);n=this.session.programManager.build(i),this.session.programManager.setArtifact(e,n)}var l=e.createRunData(this,n.programInfo,t);return this.session.programManager.run(n,l),[l.outputTextureData.tensor]},r.prototype.getOrCreateTextureData=function(e,t){var n=this.getTextureData(e.dataId);return n?c.Logger.verbose("InferenceHandler","Retrieving TextureData from cache: ["+e.dims+"]"):(c.Logger.verbose("InferenceHandler","Creating new TextureData for dims: ["+e.dims+"]"),t||(t=this.createTextureLayoutFromShape(e.dims.slice())),n=this.createTextureData(t,e.type,e.numberData,e,1)),n},r.prototype.createTextureDataFromLayout=function(e,t){return this.createTextureData(e,t)},r.prototype.createTextureDataFromLayoutBindTensor=function(e,t,n,i){return this.createTextureData(e,t,n,i,1)},r.prototype.createTextureData=function(e,t,n,i,l){c.Logger.verbose("InferenceHandler","Creating TextureData: layout:["+JSON.stringify(e)+"]");var m=this.session.textureManager.createTextureFromLayout(t,e,n,l);return this.createTextureDataFromTexture(e,t,m,i)},r.prototype.createSharedTextureData=function(e,t,n,i){return this.createTextureDataFromTexture(e,t,n,void 0,i)},r.prototype.createTextureDataFromTexture=function(e,t,n,i,l){var m=this,y=d(d({},e),{tensor:i||new p.Tensor(e.unpackedShape,t,function(_){return m.readTexture(y)},void 0,void 0,l),texture:n});return this.setTextureData(y.tensor.dataId,y),y},r.prototype.getTextureData=function(e){return this.session.isInitializer(e)?this.session.getTextureData(e):this.textureDataCache.get(e)},r.prototype.setTextureData=function(e,t){this.session.isInitializer(e)?this.session.setTextureData(e,t):this.textureDataCache.set(e,t)},r.prototype.getOrCreateTextureLayout=function(e,t,n){t===void 0&&(t=1);var i=this.getTextureData(e.dataId);return i||this.createTextureLayoutFromShape(t===1?e.dims.slice():a.getPackedShape(e.dims.slice()),t,n)},r.prototype.createTextureLayoutFromShape=function(e,t,n,i){t===void 0&&(t=1);var l=h(this.session.layoutStrategy.computeTextureWH(e,i),2),m=l[0],y=l[1],_=e;if(e.length===0&&(_=[1]),t===1)n=e;else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:m,height:y,channels:t||1,shape:_,strides:f.ShapeUtil.computeStrides(_),unpackedShape:n}},r.prototype.dispose=function(){var e=this;this.session.textureManager.clearActiveTextures(),this.textureDataCache.forEach(function(t){return e.session.textureManager.releaseTexture(t)}),this.textureDataCache=new Map},r.prototype.readTexture=function(e){if(!this.session.backend.glContext.isFloat32DownloadSupported){var t=new u.WebGLUint8Encode().runInternal(this,e);return this.session.textureManager.readUint8TextureAsFloat(t)}return this.session.textureManager.readTexture(e,e.tensor.type,e.channels)},r}();s.WebGLInferenceHandler=o},function(v,s,g){var d=this&&this.__read||function(f,u){var a=typeof Symbol=="function"&&f[Symbol.iterator];if(!a)return f;var o,r,e=a.call(f),t=[];try{for(;(u===void 0||u-- >0)&&!(o=e.next()).done;)t.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return t};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLUint8Encode=void 0;var h=g(0),c=g(2),p=function(){function f(){}return f.prototype.runInternal=function(u,a){var o=a.shape,r=d(u.session.layoutStrategy.computeTextureWH(a.shape),2),e={width:r[0],height:r[1],channels:4,shape:o,strides:h.ShapeUtil.computeStrides(o),unpackedShape:o},t=c.getGlsl(u.session.backend.glContext.version),n={inputLayouts:[a],outputLayout:e,samplers:["X"],shaderSource:`
      const float FLOAT_MAX = 1.70141184e38;
      const float FLOAT_MIN = 1.17549435e-38;

      bool isNaN(float val) {
        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
      }

      highp vec4 encodeAsUint8(highp float v) {
        if (isNaN(v)) {
          return vec4(255, 255, 255, 255);
        }

        highp float av = abs(v);

        if(av < FLOAT_MIN) {
          return vec4(0.0, 0.0, 0.0, 0.0);
        } else if(v > FLOAT_MAX) {
          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
        } else if(v < -FLOAT_MAX) {
          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
        }

        highp vec4 c = vec4(0,0,0,0);

        highp float e = floor(log2(av));
        highp float m = exp2(fract(log2(av))) - 1.0;

        c[2] = floor(128.0 * m);
        m -= c[2] / 128.0;
        c[1] = floor(32768.0 * m);
        m -= c[1] / 32768.0;
        c[0] = floor(8388608.0 * m);

        highp float ebias = e + 127.0;
        c[3] = floor(ebias / 2.0);
        ebias -= c[3] * 2.0;
        c[2] += floor(ebias) * 128.0;

        c[3] += 128.0 * step(0.0, -v);

        return c / 255.0;
      }

      void main() {
        float value = `+t.texture2D+`(X,TexCoords).r;
        `+t.output+` = encodeAsUint8(value);
      }`,hasMain:!0},i=u.session.programManager.build(n),l=u.session.backend.glContext.getEncoder("byte",4),m=u.session.backend.glContext.allocateTexture(e.width,e.height,l),y={inputTextureDatas:[a],outputTextureData:u.createSharedTextureData(e,"uint8",m,{}),uniformData:{}};return u.session.programManager.run(i,y),y.outputTextureData},f}();s.WebGLUint8Encode=p},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(R,z,q,Z){Z===void 0&&(Z=q),Object.defineProperty(R,Z,{enumerable:!0,get:function(){return z[q]}})}:function(R,z,q,Z){Z===void 0&&(Z=q),R[Z]=z[q]}),h=this&&this.__setModuleDefault||(Object.create?function(R,z){Object.defineProperty(R,"default",{enumerable:!0,value:z})}:function(R,z){R.default=z}),c=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var z={};if(R!=null)for(var q in R)q!=="default"&&Object.hasOwnProperty.call(R,q)&&d(z,R,q);return h(z,R),z};Object.defineProperty(s,"__esModule",{value:!0}),s.WEBGL_OP_RESOLVE_RULES=void 0;var p=g(7),f=g(124),u=c(g(125)),a=g(126),o=g(127),r=g(128),e=g(129),t=g(130),n=g(132),i=g(133),l=g(134),m=g(135),y=g(136),_=g(137),b=g(139),w=g(140),x=g(141),S=c(g(142)),A=g(10),T=g(143),E=g(144),N=g(145),M=g(147),j=g(148),k=g(149),F=g(150),L=c(g(151)),B=g(152),V=g(153);s.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new L.WebGLUnaryOp(p.NUMBER_TYPES,L.glslAbs())}],["Acos","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslAcos())}],["Add","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslAdd())}],["And","","7+",function(){return new u.WebGLBinaryOp(["bool"],u.glslAnd())}],["Asin","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslAsin())}],["Atan","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslAtan())}],["AveragePool","","7-10",function(){return new x.WebGLAveragePool}],["BatchNormalization","","7+",function(){return new f.WebGLBatchNormalization}],["Ceil","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslCeil())}],["Clip","","6-10",function(){return new a.WebGLClip}],["Concat","","4+",function(){return new o.WebGLConcat}],["Conv","","1+",function(){return new r.WebGLConv}],["Cos","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslCos())}],["Div","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslDiv())}],["Dropout","","7+",function(){return new e.WebGLDropout}],["Equal","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslEqual(),void 0,"bool")}],["Elu","","6+",function(){return new t.WebGLElu}],["Exp","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslExp())}],["Flatten","","1+",function(){return new n.WebGLFlatten}],["Floor","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslFloor())}],["Gather","","1+",function(){return new i.WebGLGather}],["Gemm","","7-10",function(){return new l.WebGLGemm(!1)}],["Gemm","","11+",function(){return new l.WebGLGemm(!0)}],["GlobalAveragePool","","1+",function(){return new x.WebGLGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new x.WebGLGlobalMaxPool}],["Greater","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslGreater(),void 0,"bool")}],["Identity","","1+",function(){return new L.WebGLUnaryOp(p.NUMBER_TYPES,L.glslIdentity())}],["ImageScaler","","1+",function(){return new m.WebGLImageScaler}],["InstanceNormalization","","6+",function(){return new y.WebGLInstanceNormalization}],["LeakyRelu","","6+",function(){return new _.WebGLLeakyRelu}],["Less","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslLess(),void 0,"bool")}],["Log","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslLog())}],["MatMul","","1+",function(){return new b.WebGLMatMul}],["MaxPool","","1-9",function(){return new x.WebGLMaxPool}],["Mul","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslMul())}],["Neg","","6+",function(){return new L.WebGLUnaryOp(p.NUMBER_TYPES,L.glslNeg())}],["Not","","1+",function(){return new L.WebGLUnaryOp(["bool"],L.glslNot())}],["Or","","7+",function(){return new u.WebGLBinaryOp(["bool"],u.glslOr())}],["Pad","","2-10",function(){return new w.WebGLPad}],["Pow","","7+",function(){return new u.WebGLBinaryOp(p.FLOAT_TYPES,u.glslPow())}],["PRelu","","7+",function(){return new u.WebGLBinaryOp(p.FLOAT_TYPES,u.glslPRelu())}],["ReduceLogSum","","1+",function(){return new S.WebGLReduceLogSum}],["ReduceMax","","1+",function(){return new S.WebGLReduceMax}],["ReduceMean","","1+",function(){return new S.WebGLReduceMean}],["ReduceMin","","1+",function(){return new S.WebGLReduceMin}],["ReduceProd","","1+",function(){return new S.WebGLReduceProd}],["ReduceSum","","1+",function(){return new S.WebGLReduceSum}],["ReduceSumSquare","","1+",function(){return new S.WebGLReduceSumSquare}],["Relu","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslRelu())}],["Reshape","","5+",function(){return new A.WebGLReshape}],["Sigmoid","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslSigmoid())}],["Sin","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslSin())}],["Slice","","10+",function(){return new T.WebGLSliceV10}],["Slice","","1-9",function(){return new T.WebGLSlice}],["Softmax","","1+",function(){return new E.WebGLSoftmax}],["Split","","2+",function(R){return new N.WebGLSplit(R.outputs.length)}],["Sqrt","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslSqrt())}],["Squeeze","","1+",function(){return new M.WebGLSqueeze}],["Sub","","7+",function(){return new u.WebGLBinaryOp(p.NUMBER_TYPES,u.glslSub())}],["Sum","","6+",function(){return new j.WebGLSum}],["Tan","","7+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslTan())}],["Tanh","","6+",function(){return new L.WebGLUnaryOp(p.FLOAT_TYPES,L.glslTanh())}],["Tile","","6+",function(){return new k.WebGLTile}],["Transpose","","1+",function(){return new F.WebGLTranspose}],["Upsample","","7-8",function(){return new V.WebGLUpsample}],["Unsqueeze","","1+",function(){return new B.WebGLUnsqueeze}],["Xor","","7+",function(){return new u.WebGLBinaryOp(["bool"],u.glslXor())}]]},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLBatchNormalization=void 0;var c=g(14),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r.map(function(y){return o.getOrCreateTextureLayout(y)}),t=r[0].dims.slice(),n=t.length,i=e[1],l=p.getGlsl(o.session.backend.glContext.version),m=`
      float process(int[`+n+`] indices) {
        vec2 position = offsetToCoords(indices[1], `+i.width+", "+i.height+`);
        float scale = getColorAsFloat(`+l.texture2D+`(Scale, position));
        float mean = getColorAsFloat(`+l.texture2D+`(Mean, position));
        float variance = getColorAsFloat(`+l.texture2D+`(Variance, position));
        float b = getColorAsFloat(`+l.texture2D+`(B, position));

        return scale * ( (_A(indices) - mean) / sqrt(variance + float(`+this.epsilon+`)) ) + b;
      }`;return{inputLayouts:e,outputLayout:o.createTextureLayoutFromShape(t),samplers:["A","Scale","B","Mean","Variance"],shaderSource:m}},a.prototype.createRunData=function(o,r,e){var t=[o.getOrCreateTextureData(e[0],r.inputLayouts[0])];e.slice(1).forEach(function(i){return t.push(o.getOrCreateTextureData(i))});var n=o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type);return{inputTextureDatas:t,outputTextureData:n,uniformData:{}}},a}(c.BatchNormalization);s.WebGLBatchNormalization=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.glslPRelu=s.glslPow=s.glslXor=s.glslOr=s.glslAnd=s.glslLess=s.glslGreater=s.glslEqual=s.glslSub=s.glslMul=s.glslDiv=s.glslAdd=s.WebGLBinaryOp=void 0;var c=g(15),p=g(0),f=g(5),u=g(2),a=function(o){function r(e,t,n,i){var l=o.call(this,e,n,i)||this;return l.glslFunc=t,l}return h(r,o),r.prototype.run=function(e,t){return e.run(this,t)},r.prototype.createProgramInfo=function(e,t){var n=t.map(function(A){return e.getOrCreateTextureLayout(A)});if(!p.ShapeUtil.areEqual(t[0].dims,t[1].dims)){var i=p.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!i)throw new Error("Can't perform binary op on the given tensors");var l=i.length,m=t[0].dims.length!==0?t[0].dims.length:1,y=t[1].dims.length!==0?t[1].dims.length:1,_=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",b=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",w=`
      `+this.glslFunc.body+`
      float process(int indices[`+l+`]) {
        int aindices[`+m+`];
        int bindices[`+y+`];
        `+_+`
        `+b+`
        return `+this.glslFunc.name+`(_A(aindices), _B(bindices));
    }`;return{inputLayouts:n,outputLayout:e.createTextureLayoutFromShape(i),samplers:["A","B"],shaderSource:w}}var x=u.getGlsl(e.session.backend.glContext.version),S=`
    `+this.glslFunc.body+`
    void main() {
      vec4 v1 = `+x.texture2D+`(A, TexCoords);
      vec4 v2 = `+x.texture2D+`(B, TexCoords);
      vec4 result = `+this.glslFunc.name+`(v1, v2);
      `+x.output+` = result;
    }
    `;return{hasMain:!0,inputLayouts:n,outputLayout:e.createTextureLayoutFromShape(t[0].dims),samplers:["A","B"],shaderSource:S}},r.prototype.createRunData=function(e,t,n){return{inputTextureDatas:n.map(function(i,l){return e.getOrCreateTextureData(i,t.inputLayouts[l])}),outputTextureData:e.createTextureDataFromLayout(t.outputLayout,this.resultType?this.resultType:n[0].type),uniformData:{}}},r}(c.BinaryOp);s.WebGLBinaryOp=a,s.glslAdd=function(){return{body:`
  float add_(float a, float b) {
    return a + b;
  }
  vec4 add_(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:"add_",type:f.FunctionType.ValueBased}},s.glslDiv=function(){return{body:`
  float div_(float a, float b) {
    return a / b;
  }
  vec4 div_(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:"div_",type:f.FunctionType.ValueBased}},s.glslMul=function(){return{body:`
  float mul_(float a, float b) {
    return a * b;
  }
  vec4 mul_(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:"mul_",type:f.FunctionType.ValueBased}},s.glslSub=function(){return{body:`
  float sub_(float a, float b) {
    return a - b;
  }
  vec4 sub_(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:"sub_",type:f.FunctionType.ValueBased}},s.glslEqual=function(){return{body:`
  float equal_(float a, float b) {
    return float(a == b);
  }
  vec4 equal_(vec4 v1, vec4 v2) {
    return vec4( v1 == v2 );
  }
  `,name:"equal_",type:f.FunctionType.ValueBased}},s.glslGreater=function(){var o="greater_";return{body:`
  float greater_(float a, float b) {
    return float(a > b);
  }
  vec4 greater_(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:o,type:f.FunctionType.ValueBased}},s.glslLess=function(){return{body:`
  float less_(float a, float b) {
    return float(a < b);
  }
  vec4 less_(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:"less_",type:f.FunctionType.ValueBased}},s.glslAnd=function(){return{body:`
  float and_(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 and_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:"and_",type:f.FunctionType.ValueBased}},s.glslOr=function(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:f.FunctionType.ValueBased}},s.glslXor=function(){return{body:`
  float xor_(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 xor_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:"xor_",type:f.FunctionType.ValueBased}},s.glslPow=function(){return function(o){var r=o+"_";return{body:`
  float `+r+`(float a, float b) {
    return `+o+`(a, b);
  }
  vec4 `+r+`(vec4 v1, vec4 v2) {
    return `+o+`(v1, v2);
  }
  `,name:r,type:f.FunctionType.ValueBased}}("pow")},s.glslPRelu=function(){return{body:`
  float prelu_(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 prelu_(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:"prelu_",type:f.FunctionType.ValueBased}}},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLClip=void 0;var c=g(49),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r[0].dims.slice(),t=p.getGlsl(o.session.backend.glContext.version),n=`
      const float min = float(`+this.min+`);
      const float max = float(`+this.max+`);
      void main() {
        float v = `+t.texture2D+`(A, TexCoords).r;
        `+t.output+` = vec4(clamp(v, min, max));
      }
      `;return{inputLayouts:[o.getOrCreateTextureLayout(r[0])],outputLayout:o.createTextureLayoutFromShape(e),samplers:["A"],shaderSource:n,hasMain:!0}},a.prototype.createRunData=function(o,r,e){var t=[o.getOrCreateTextureData(e[0],r.inputLayouts[0])];return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.Clip);s.WebGLClip=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(p,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var o in a)a.hasOwnProperty(o)&&(u[o]=a[o])})(p,f)},function(p,f){function u(){this.constructor=p}d(p,f),p.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLConcat=void 0;var c=function(p){function f(){return p!==null&&p.apply(this,arguments)||this}return h(f,p),f.prototype.run=function(u,a){return u.run(this,a)},f.prototype.createProgramInfo=function(u,a){var o=a[0].dims.slice();if(this.axis>=o.length||this.axis<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");this.axis<0&&(this.axis=o.length+this.axis);for(var r=o.slice(0),e=1;e<a.length;e++)for(var t=a[e].dims.slice(),n=0;n<o.length;n++)if(n===this.axis)r[this.axis]+=t[n];else if(o[n]!==t[n])throw new Error("non concat dimensions must match");var i=r.length,l="";l=a.length<5?this.getTextureIndexWhereDataResidesLinearSearch(a.length):this.getTextureIndexWhereDataResidesBinarySearch(a.length);var m=this.fetchDataFromCorrectTextureMethod(a.length,i),y=this.getValueFromArrayIndexMethod(a.length),_=a.map(function(w,x){return"X"+x}),b=`
      `+m+`
      `+y+`
      `+l+`
      float process(int indices[`+i+`]) {
        int textureIndex = getTextureWhereDataResides (indices[`+this.axis+`]);

        if(textureIndex != 0) {
          indices[`+this.axis+"] = indices["+this.axis+`] - int(getValueFromArrayIndex(sizeInConcatAxis, textureIndex-int(1)));
        }

        return fetchDataFromCorrectTexture(textureIndex, indices);
      }`;return{inputLayouts:a.map(function(w){return u.getOrCreateTextureLayout(w)}),outputLayout:u.createTextureLayoutFromShape(r),samplers:_,variables:[{name:"sizeInConcatAxis",type:"int",arrayLength:a.length}],shaderSource:b}},f.prototype.createRunData=function(u,a,o){for(var r=o.map(function(l,m){return u.getOrCreateTextureData(l,a.inputLayouts[m])}),e=new Array(a.inputLayouts.length),t=0,n=0;n<a.inputLayouts.length;++n)t+=a.inputLayouts[n].shape[this.axis],e[n]=t;var i={sizeInConcatAxis:e};return{inputTextureDatas:r,outputTextureData:u.createTextureDataFromLayout(a.outputLayout,r[0].tensor.type),uniformData:i}},f.prototype.getTextureIndexWhereDataResidesLinearSearch=function(u){return`int getTextureWhereDataResides(int index) {
      for(int i=0; i<`+u+`; i++) {
          if(index < int(sizeInConcatAxis[i])){
              return i;
          }
        }
      }`},f.prototype.getTextureIndexWhereDataResidesBinarySearch=function(u){return this.getTextureIndexWhereDataResidesLinearSearch(u)},f.prototype.fetchDataFromCorrectTextureMethod=function(u,a){for(var o=["float fetchDataFromCorrectTexture(int textureIndex, int indices["+a+"]) {"],r=0;r<u;++r)r===0?o.push("	if (textureIndex == "+r+") { return _X"+r+"(indices); }"):r===u-1?o.push("	else { return _X"+r+"(indices); }"):o.push("	else if (textureIndex == "+r+") { return _X"+r+"(indices); }");return o.push("	}"),o.join(`
`)},f.prototype.getValueFromArrayIndexMethod=function(u){for(var a=["int getValueFromArrayIndex(int arr["+u+"], int index) {"],o=0;o<u;++o)o===0?a.push("	if (index == "+o+") { return arr["+o+"]; }"):o===u-1?a.push("	else { return arr["+o+"]; }"):a.push("	else if (index == "+o+") { return arr["+o+"]; }");return a.push("	}"),a.join(`
`)},f}(g(30).Concat);s.WebGLConcat=c},function(v,s,g){var d,h=this&&this.__extends||(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var l in i)i.hasOwnProperty(l)&&(n[l]=i[l])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i,l,m=n.call(e),y=[];try{for(;(t===void 0||t-- >0)&&!(i=m.next()).done;)y.push(i.value)}catch(_){l={error:_}}finally{try{i&&!i.done&&(n=m.return)&&n.call(m)}finally{if(l)throw l.error}}return y},p=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLConv=void 0;var f=g(3),u=g(16),a=g(0),o=g(2),r=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.readSize=8,n.blockSize=64,n}return h(t,e),t.prototype.run=function(n,i){var l=n.session.programManager;if(!this.artifacts){this.artifacts=[];for(var m=this.createProgramInfos(n,i),y=0;y<m.length;++y){var _=n.session.programManager.build(m[y]);this.artifacts.push(_)}}var b=this.createRunDatas(n,this.artifacts.map(function(w){return w.programInfo}),i);return l.run(this.artifacts[0],b[0]),l.run(this.artifacts[1],b[1]),[b[1].outputTextureData.tensor]},t.prototype.createProgramInfos=function(n,i){var l=i[0].dims.slice(),m=i[1].dims.slice();if(this.kernelShape.length===0)for(var y=i[1].dims,_=2;_<y.length;++_)this.kernelShape.push(y[_]);a.PoolConvUtil.adjustPadsBasedOnAutoPad(i[0].dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),f.Logger.verbose("Conv","autpPad:"+this.autoPad+", dilations:"+this.dilations+", group:"+this.group+", kernelShape:"+this.kernelShape+", pads:"+this.pads+", strides:"+this.strides);var b=t.calcOutputShape(l,m,this.dilations,this.pads,this.strides),w=this.createIm2ColProgramInfo(n,i,b);return[w,this.createDotProductProgramInfo(n,w.outputLayout,i,b)]},t.prototype.createRunDatas=function(n,i,l){var m=l[1],y=l.length>=3?l[2]:void 0,_=n.getTextureData(m.dataId);if(!_){f.Logger.verbose("Conv","Did not find the adjustedKernel texture in the cache. Creating rew.");var b=t.prepKernelForDotProduct(m.dims.slice(),this.group,4,m.floatData);_=n.createTextureDataFromLayoutBindTensor(i[1].inputLayouts[1],m.type,b,m)}var w={inputTextureDatas:[n.getOrCreateTextureData(l[0])],outputTextureData:n.createTextureDataFromLayout(i[0].outputLayout,l[0].type),uniformData:{}},x=[w.outputTextureData,_];return y&&x.push(n.getOrCreateTextureData(y)),[w,{inputTextureDatas:x,outputTextureData:n.createTextureDataFromLayout(i[1].outputLayout,l[0].type),uniformData:{},draw:function(S,A){for(var T=S.gl,E=A.programInfo.params.sharedDim,N=A.programInfo.params.sharedDimReadSize,M=A.uniformLocations.find(function(F){return F.name==="sharedDimOffset"}).location,j=!1,k=0;k<E;k+=N)f.Logger.verbose("MatMul2D","k = "+k+", sharedDim: "+E+", readSize = "+N),k===N&&(j=!0,T.enable(T.BLEND),S.checkError(),T.blendEquation(T.FUNC_ADD),S.checkError(),T.blendFunc(T.ONE,T.ONE),S.checkError()),T.uniform1i(M,k),S.checkError(),S.draw();j&&(T.disable(T.BLEND),S.checkError())}}]},t.prototype.createIm2ColProgramInfo=function(n,i,l){var m=i[0].dims.slice(),y=i[1].dims.slice(),_=l.length,b=t.calcIm2ColDims(m,y,l,4),w=n.createTextureLayoutFromShape(b,4,[b[0],b[1],b[2],4*b[3]],{breakAxis:3}),x=`
      const int XC = `+m[1]+`;
      const int XH = `+m[2]+`;
      const int XW = `+m[3]+`;
      const int KH = `+this.kernelShape[0]+`;
      const int KW = `+this.kernelShape[1]+`;
      const int dilationH = `+this.dilations[0]+`;
      const int dilationW = `+this.dilations[1]+`;
      const int strideH = `+this.strides[0]+`;
      const int strideW = `+this.strides[1]+`;
      const int padH = `+this.pads[0]+`;
      const int padW = `+this.pads[1]+`;
      const int KHKW = KH*KW;
      const int XCKHKW = XC * KHKW;
      const int outputChannels = 4;

      vec4 process(int indices[`+_+`]) {
        int b  = indices[0]; // batch size
        int oh = indices[1] * strideH - padH; //output height
        int ow = indices[2] * strideW - padW; //output width
        int p = indices[3] * outputChannels; //patch
        vec4 v = vec4(0.0);
        for(int i=0; i < outputChannels; ++i) {
          if(p < XCKHKW) {
            int patchC = p / KHKW;
            int patchH = (p - patchC*KHKW) / KW;
            int patchW = (p - patchC*KHKW) - patchH * KW;
            int xh2 = oh + patchH * dilationH;
            int xw2 = ow + patchW * dilationW;
            int x[`+m.length+`];
            x[0] = b;
            x[1] = patchC;
            x[2] = xh2;
            x[3] = xw2;
            if(xh2 >= 0 &&
                xh2 < XH &&
                xw2 >= 0 &&
                xw2 < XW) {
              v[i] = _X(x);
            }
          }
          ++p;
        }
        return v;
      }
      `;return{inputLayouts:[n.createTextureLayoutFromShape(m)],outputLayout:w,samplers:["X"],shaderSource:x}},t.prototype.createDotProductProgramInfo=function(n,i,l,m){var y,_=l[0].dims.slice(),b=l[1].dims.slice(),w=[b[0],Math.ceil(_[1]*b[2]*b[3]/4)],x=n.createTextureLayoutFromShape(w,4,[w[0],4*w[1]],{breakAxis:1}),S=m.length,A=[i,x];l.length===3&&(y=n.createTextureLayoutFromShape(l[2].dims.slice()),A.push(y));var T=n.createTextureLayoutFromShape(m),E=l.length<3?"0.0":"_B(b)",N=i.shape[3],M=n.session.backend.glContext.isBlendSupported&&n.session.backend.matmulMaxBatchSize?this.calcSharedDimReadSize(n.session.backend.matmulMaxBatchSize,N):N,j=["Im2Col","K"];l.length===3&&j.push("B");var k=o.getGlsl(n.session.backend.glContext.version),F=`
    float process(int indices[`+S+`]) {
      int b[1];
      b[0] = indices[1];
      int im2col[`+i.shape.length+`];
      im2col[0] = indices[0];
      im2col[1] = indices[2];
      im2col[2] = indices[3];
      int im2colOffset = im2col[0] * `+i.strides[0]+" + im2col[1] * "+i.strides[1]+" + im2col[2] * "+i.strides[2]+` + sharedDimOffset;
      int kernelOffset = indices[1] * `+x.strides[0]+` + sharedDimOffset;
      float sum = sharedDimOffset == 0 ? `+E+` : 0.0;
      for (int i = 0; i < `+M+`; ++i) {
        vec2 im2colCoords = offsetToCoords(im2colOffset, `+i.width+", "+i.height+`);
        vec2 kernelCoords = offsetToCoords(kernelOffset, `+x.width+", "+x.height+`);
        sum += dot(`+k.texture2D+"(Im2Col, im2colCoords), "+k.texture2D+`(K, kernelCoords));
        ++im2colOffset;
        ++kernelOffset;
      }
      return sum;
    }`;return{inputLayouts:l.length===3?[i,x,y]:[i,x],outputLayout:T,shaderSource:F,samplers:j,variables:[{name:"sharedDimOffset",type:"int"}],params:{sharedDim:N,sharedDimReadSize:M}}},t.prepKernelForDotProduct=function(n,i,l,m){if(i===1&&(l===1||n[2]*n[3]%l==0))return m;for(var y=n[0],_=n[1]*n[2]*n[3],b=Math.ceil(_*i/l)*l,w=new Float32Array(y*b),x=0;x<y;++x){var S=x*_,A=x*b+x%i*_;w.set(m.subarray(S,S+_),A)}return w},t.calcIm2ColDims=function(n,i,l,m){return m===void 0&&(m=1),[l[0],l[2],l[3],Math.ceil(n[1]*i[2]*i[3]/m)]},t.calcOutputShape=function(n,i,l,m,y){var _,b=n[0],w=n.slice(2),x=w.length,S=i[0],A=i.slice(2).map(function(E,N){return E+(E-1)*(l[N]-1)}),T=w.map(function(E,N){return E+m[N]+m[N+x]}).map(function(E,N){return Math.floor((E-A[N]+y[N])/y[N])});return(_=[b,S]).concat.apply(_,p(T))},t.prototype.calcSharedDimReadSize=function(n,i){return n<=0||i<n||i%n!=0?i:n},t.prototype.calcBlockSize=function(n){if(!(n.height<64))return[64,64]},t}(u.Conv);s.WebGLConv=r},function(v,s,g){var d,h=this&&this.__extends||(d=function(p,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var o in a)a.hasOwnProperty(o)&&(u[o]=a[o])})(p,f)},function(p,f){function u(){this.constructor=p}d(p,f),p.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLDropout=void 0;var c=function(p){function f(){return p!==null&&p.apply(this,arguments)||this}return h(f,p),f.prototype.run=function(u,a){if(this.testMode)return[a[0]];throw new Error("Non test mode Dropout is not implemented yet")},f.prototype.createProgramInfo=function(u,a){throw new Error("Non test mode Dropout is not implemented yet")},f.prototype.createRunData=function(u,a,o){throw new Error("Non test mode Dropout is not implemented yet")},f}(g(31).Dropout);s.WebGLDropout=c},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLElu=void 0;var c=g(131),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r[0].dims.slice(),t=p.getGlsl(o.session.backend.glContext.version),n=`
      void main() {
        float v = `+t.texture2D+`(A, TexCoords).r;
        `+t.output+" = vec4(v >= 0.0 ? v: (exp(v) - 1.0) * "+this.alpha.toExponential()+`); /* float number format */
      }
      `;return{inputLayouts:[o.getOrCreateTextureLayout(r[0])],outputLayout:o.createTextureLayoutFromShape(e),samplers:["A"],shaderSource:n,hasMain:!0}},a.prototype.createRunData=function(o,r,e){var t=[o.getOrCreateTextureData(e[0],r.inputLayouts[0])];return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.Elu);s.WebGLElu=f},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Elu=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.alpha=c.getFloat("alpha",1)},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.Elu=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLFlatten=void 0;var c=g(32),p=g(0),f=g(10),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=p.ShapeUtil.flattenShape(e[0].dims,this.axis);return[f.reshape(r,e[0],t)]},o}(c.Flatten);s.WebGLFlatten=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLGather=void 0;var c=g(33),p=g(0),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r[0].dims.slice(),t=r[1].dims.slice(),n=new Array(e.length+t.length-1);if(n.length===0)throw Error("A scalar tensor output has not been supported");for(var i=p.ShapeUtil.normalizeAxis(this.axis,e.length),l=[],m=0;m<n.length;m++)m<i?(n[m]=e[m],l.push("inputIdx["+m+"] = outputIdx["+m+"];")):m<i+t.length?(n[m]=t[m-i],l.push("indexDataIdx["+(m-i)+"] = outputIdx["+m+"];")):(n[m]=e[m-t.length+1],l.push("inputIdx["+(m-t.length+1)+"] = outputIdx["+m+"];"));var y=`
      float process(int outputIdx[`+n.length+`]) {
        int inputIdx[`+e.length+`];
        int indexDataIdx[`+t.length+`];
        `+l.join(`
        `)+`
        int idx = int(_B(indexDataIdx));
        inputIdx[`+i+"] = idx < 0 ? idx + "+e[i]+` : idx;
        return _A(inputIdx);
      }`;return{inputLayouts:r.map(function(_){return o.getOrCreateTextureLayout(_)}),outputLayout:o.createTextureLayoutFromShape(n),samplers:["A","B"],shaderSource:y}},a.prototype.createRunData=function(o,r,e){var t=e.map(function(n,i){return o.getOrCreateTextureData(n,r.inputLayouts[i])});return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.Gather);s.WebGLGather=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__read||function(a,o){var r=typeof Symbol=="function"&&a[Symbol.iterator];if(!r)return a;var e,t,n=r.call(a),i=[];try{for(;(o===void 0||o-- >0)&&!(e=n.next()).done;)i.push(e.value)}catch(l){t={error:l}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return i};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLGemm=void 0;var p=g(19),f=g(0),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){return r.run(this,e)},o.prototype.createProgramInfo=function(r,e){var t=e[0].dims.slice(),n=e[1].dims.slice(),i=c(f.GemmUtil.getShapeOfGemmResult(t,this.transA,n,this.transB,e.length===3?e[2].dims:void 0),2),l=[i[0],i[1]];if(!l)throw new Error("Can't use gemm on the given tensors");var m=t[t.length-1],y="";this.transA&&(m=t[0]),this.transA&&this.transB?y="value += _A_T(a) * _B_T(b);":this.transA&&!this.transB?y="value += _A_T(a) * _B(b);":!this.transA&&this.transB?y="value += _A(a) * _B_T(b);":this.transA||this.transB||(y="value += _A(a) * _B(b);");var _=l.length,b=`
      float process(int indices[`+_+`]) {
          int a[`+_+`];
          int b[`+_+`];
          `+(e.length===3?"int c["+e[2].dims.length+"];":"")+`

          copyVec(indices, a);
          copyVec(indices, b);
          `+(e.length===3?"bcastIndices_C(indices, c);":"")+`

          float value = 0.0;
          for (int k=0; k<`+m+`; ++k) {
              a[`+(_-1)+`] = k;
              b[`+(_-2)+`] = k;
              `+y+`
          }

          value = value * alpha;
          `+(e.length===3?"value += beta * _C(c);":"")+`
          return value;
      }`;return{inputLayouts:e.map(function(w){return r.getOrCreateTextureLayout(w)}),outputLayout:r.createTextureLayoutFromShape(l),samplers:e.length===3?["A","B","C"]:["A","B"],variables:[{name:"alpha",type:"float"},{name:"beta",type:"float"}],shaderSource:b}},o.prototype.createRunData=function(r,e,t){var n=t.map(function(i,l){return r.getOrCreateTextureData(i,e.inputLayouts[l])});return{inputTextureDatas:n,outputTextureData:r.createTextureDataFromLayout(e.outputLayout,n[0].tensor.type),uniformData:{alpha:this.alpha,beta:this.beta}}},o}(p.Gemm);s.WebGLGemm=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(p,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var o in a)a.hasOwnProperty(o)&&(u[o]=a[o])})(p,f)},function(p,f){function u(){this.constructor=p}d(p,f),p.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLImageScaler=void 0;var c=function(p){function f(){return p!==null&&p.apply(this,arguments)||this}return h(f,p),f.prototype.run=function(u,a){return u.run(this,a)},f.prototype.createProgramInfo=function(u,a){var o=a[0].dims.slice(),r=o.length,e=`
      `+this.createGetBiasMethod(this.bias.length)+`
      float process(int indices[`+r+`]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{inputLayouts:[u.getOrCreateTextureLayout(a[0])],outputLayout:u.createTextureLayoutFromShape(o),samplers:["X"],variables:[{name:"bias",type:"float",arrayLength:this.bias.length},{name:"scale",type:"float"}],shaderSource:e}},f.prototype.createRunData=function(u,a,o){var r=[u.getOrCreateTextureData(o[0],a.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:u.createTextureDataFromLayout(a.outputLayout,r[0].tensor.type),uniformData:{bias:this.bias,scale:this.scale}}},f.prototype.createGetBiasMethod=function(u){for(var a=["float getBias(float bias["+u+"], int channel) {"],o=0;o<u;++o)o===0?a.push("	if (channel == "+o+") { return bias["+o+"]; }"):o===u-1?a.push("	else { return bias["+o+"]; }"):a.push("	else if (channel == "+o+") { return bias["+o+"]; }");return a.push("	}"),a.join(`
`)},f}(g(34).ImageScaler);s.WebGLImageScaler=c},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLInstanceNormalization=void 0;var c=g(20),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){var e=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(o,r).forEach(function(n,i){var l=o.session.programManager.build(n);e.artifacts.push(l)}));var t=this.createRunDatas(o,this.artifacts.map(function(n){return n.programInfo}),r);return t.forEach(function(n,i){return o.session.programManager.run(e.artifacts[i],n)}),[t[1].outputTextureData.tensor]},a.prototype.checkInputTypes=function(o){return!!u.prototype.checkInputTypes.call(this,o)&&o[0].dims.length===4},a.prototype.createMeanAndVarianceProgramInfo=function(o,r){var e=r.shape,t=e[1],n=e[2]*e[3],i=[e[0],t],l=[e[0],4*t],m=`
    vec4 process(int[2] indices) {
      vec4 v = vec4(0.0);
      int a[4];
      a[0] = indices[0];
      a[1] = indices[1];
      float temp = 0.0;
      for(int a2=0; a2<`+e[2]+`; a2++) {
        a[2] = a2;
        for(int a3=0; a3<`+e[3]+`; a3++) {
          a[3] = a3;
          float x = _X(a);
          temp += x;
        }
      }
      float mean = temp / float(`+n+`);
      temp = 0.0;
      for(int a2=0; a2<`+e[2]+`; a2++) {
        a[2] = a2;
        for(int a3=0; a3<`+e[3]+`; a3++) {
          a[3] = a3;
          float x = _X(a);
          temp += (x - mean) * (x - mean);
        }
      }
      v.r = mean;
      v.g = temp / float(`+n+`);

      return v;
    }`;return{inputLayouts:[r],outputLayout:o.createTextureLayoutFromShape(i,4,l),samplers:["X"],shaderSource:m}},a.prototype.createComputOutputProgramInfo=function(o,r,e,t,n){var i=p.getGlsl(o.session.backend.glContext.version),l=`
    vec4 getMeanAndVariance(int[2] mv) {
      int offset = indicesToOffset_MeanAndVariance(mv);
      vec2 coords = offsetToCoords(offset, `+n.width+", "+n.height+`);
      return `+i.texture2D+`(MeanAndVariance, coords);
    }

    float process(int[4] indices) {

          int mv[2];
          mv[0] = indices[0];
          mv[1] = indices[1];
          vec4 mean_and_variance = getMeanAndVariance(mv);
          float mean = mean_and_variance.r;
          float variance = mean_and_variance.g;

          int sb[1];
          sb[0] = indices[1];
          float scale = _Scale(sb);
          float b = _B(sb);

          return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
        }`;return{inputLayouts:[r,n,e,t],outputLayout:o.createTextureLayoutFromShape(r.shape),samplers:["X","MeanAndVariance","Scale","B"],variables:[{name:"epsilon",type:"float"}],shaderSource:l}},a.prototype.createProgramInfos=function(o,r){var e=o.getOrCreateTextureLayout(r[0]),t=o.getOrCreateTextureLayout(r[1]),n=o.getOrCreateTextureLayout(r[2]),i=this.createMeanAndVarianceProgramInfo(o,e);return[i,this.createComputOutputProgramInfo(o,e,t,n,i.outputLayout)]},a.prototype.createRunDatas=function(o,r,e){var t=e[0].type,n=o.getOrCreateTextureData(e[0],r[0].inputLayouts[0]),i=o.getOrCreateTextureData(e[1],r[1].inputLayouts[2]),l=o.getOrCreateTextureData(e[2],r[1].inputLayouts[3]),m=[];return m.push({inputTextureDatas:[n],outputTextureData:o.createTextureDataFromLayout(r[0].outputLayout,t),uniformData:{}}),m.push({inputTextureDatas:[n,m[0].outputTextureData,i,l],outputTextureData:o.createTextureDataFromLayout(r[1].outputLayout,t),uniformData:{epsilon:this.epsilon}}),m},a}(c.InstanceNormalization);s.WebGLInstanceNormalization=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLLeakyRelu=void 0;var c=g(138),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r[0].dims.slice(),t=p.getGlsl(o.session.backend.glContext.version),n=`
      void main() {
        float v = `+t.texture2D+`(A, TexCoords).r;
        `+t.output+" = vec4(v < 0.0 ? v * float("+this.alpha+`) : v);
      }
      `;return{hasMain:!0,inputLayouts:[o.getOrCreateTextureLayout(r[0])],outputLayout:o.createTextureLayoutFromShape(e),samplers:["A"],shaderSource:n}},a.prototype.createRunData=function(o,r,e){var t=[o.getOrCreateTextureData(e[0],r.inputLayouts[0])];return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.LeakyRelu);s.WebGLLeakyRelu=f},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.LeakyRelu=void 0;var d=function(){function h(){}return h.prototype.initialize=function(c){this.alpha=c.getFloat("alpha",.01)},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="float32"||c[0].type==="float64"},h}();s.LeakyRelu=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLMatMul=void 0;var c=g(18),p=g(0),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=r[0].dims,t=r[1].dims,n=p.BroadcastUtil.calcShape(e,t,!0);if(!n)throw new Error("Can't use matmul on the given tensors");var i=n.length,l=e.length,m=t.length,y=`
      float process(int indices[`+i+`]) {
          int a[`+l+`];
          int b[`+m+`];
          bcastMatmulIndices_A(indices, a);
          bcastMatmulIndices_B(indices, b);

          float value;
          for (int k=0; k<`+e[e.length-1]+`; ++k) {
              a[`+(l-1)+`] = k;
              b[`+(m-2)+`] = k;
              value += _A(a) * _B(b);
          }
          return value;
      }`;return{inputLayouts:r.map(function(_){return o.getOrCreateTextureLayout(_)}),outputLayout:o.createTextureLayoutFromShape(n),samplers:["A","B"],shaderSource:y}},a.prototype.createRunData=function(o,r,e){var t=e.map(function(n,i){return o.getOrCreateTextureData(n,r.inputLayouts[i])});return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.MatMul);s.WebGLMatMul=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.getPadFunction=s.WebGLPad=void 0;var c=g(35),p=g(0),f=g(2),u=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return h(r,o),r.prototype.run=function(e,t){return e.run(this,t)},r.prototype.createProgramInfo=function(e,t){var n=p.ShapeUtil.padShape(t[0].dims.slice(),this.pads),i=n.length,l=e.getOrCreateTextureLayout(t[0]),m=`
      `+a(f.getGlsl(e.session.backend.glContext.version),"A",l,this.mode,this.pads,this.value)+`
      float process(int[`+i+`] indices) {
          return padA(indices);
      }`;return{inputLayouts:[l],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:m}},r.prototype.createRunData=function(e,t,n){var i=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:i,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,i[0].tensor.type),uniformData:{}}},r}(c.Pad);function a(o,r,e,t,n,i){switch(t){case"constant":return function(l,m,y,_,b,w,x,S){for(var A=y.length,T="",E=A-1;E>=0;--E)T+=`
          k = m[`+E+"] - "+x[E]+`;
          if (k < 0)  return constant;
          if (k >= `+y[E]+`) return constant;
          offset += k * `+_[E]+`;
          `;return`
        float pad`+m+"(int m["+A+`]) {
          const float constant = float(`+S+`);
          int offset = 0;
          int k = 0;
          `+T+`
          vec2 coords = offsetToCoords(offset, `+b+", "+w+`);
          float value = getColorAsFloat(`+l.texture2D+"("+m+`, coords));
          return value;
        }
        `}(o,r,e.shape,e.strides,e.width,e.height,n,i);case"reflect":return function(l,m,y,_,b,w,x){for(var S=y.length,A="",T=S-1;T>=0;--T)A+=`
        k = m[`+T+"] - "+x[T]+`;
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = `+2*(y[T]-1)+`;
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= `+y[T]+`) { k = _2n_1 - k; }
        }
        offset += k * `+_[T]+`;
        `;return`
      float pad`+m+"(int m["+S+`]) {
        int offset = 0;
        int k = 0;
        `+A+`
        vec2 coords = offsetToCoords(offset, `+b+", "+w+`);
        float value = getColorAsFloat(`+l.texture2D+"("+m+`, coords));
        return value;
      }
      `}(o,r,e.shape,e.strides,e.width,e.height,n);case"edge":return function(l,m,y,_,b,w,x){for(var S=y.length,A="",T=S-1;T>=0;--T)A+=`
      k = m[`+T+"] - "+x[T]+`;
      if (k < 0)  k = 0;
      if (k >= `+y[T]+") k = "+(y[T]-1)+`;
      offset += k * `+_[T]+`;
      `;return`
    float pad`+m+"(int m["+S+`]) {
      int offset = 0;
      int k = 0;
      `+A+`
      vec2 coords = offsetToCoords(offset, `+b+", "+w+`);
      float value = getColorAsFloat(`+l.texture2D+"("+m+`, coords));
      return value;
    }
    `}(o,r,e.shape,e.strides,e.width,e.height,n);default:throw new Error("Invalid mode")}}s.WebGLPad=u,s.getPadFunction=a},function(v,s,g){var d,h=this&&this.__extends||(d=function(l,m){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var b in _)_.hasOwnProperty(b)&&(y[b]=_[b])})(l,m)},function(l,m){function y(){this.constructor=l}d(l,m),l.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(s,"__esModule",{value:!0}),s.offsetToIndices=s.copyArray=s.GeneratePoolingCode=s.WebGLMaxPool=s.WebGLGlobalMaxPool=s.WebGLAveragePool=s.WebGLGlobalAveragePool=void 0;var c=g(21),p=g(0),f=function(l){function m(){return l!==null&&l.apply(this,arguments)||this}return h(m,l),m.prototype.run=function(y,_){return y.run(this,_)},m.prototype.createProgramInfo=function(y,_){return a(y,_,!0,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},m.prototype.createRunData=function(y,_,b){var w=[y.getOrCreateTextureData(b[0],_.inputLayouts[0])];return{inputTextureDatas:w,outputTextureData:y.createTextureDataFromLayout(_.outputLayout,w[0].tensor.type),uniformData:{}}},m}(c.GlobalAveragePool);s.WebGLGlobalAveragePool=f;var u=function(l){function m(){return l!==null&&l.apply(this,arguments)||this}return h(m,l),m.prototype.run=function(y,_){return y.run(this,_)},m.prototype.createProgramInfo=function(y,_){return a(y,_,!1,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},m.prototype.createRunData=function(y,_,b){var w=[y.getOrCreateTextureData(b[0],_.inputLayouts[0])];return{inputTextureDatas:w,outputTextureData:y.createTextureDataFromLayout(_.outputLayout,w[0].tensor.type),uniformData:{}}},m}(c.AveragePool);function a(l,m,y,_,b,w,x,S){_===void 0&&(_=[]),b===void 0&&(b=""),w===void 0&&(w=[]),x===void 0&&(x=[]);var A=m[0].dims.slice();p.PoolConvUtil.adjustPoolAttributes(y,A,_,w,x);var T=p.PoolConvUtil.computePoolOutputShape(y,A,w,_,x,b),E=p.ShapeUtil.size(_),N="";N+=S?"value /= float("+E+");":"value /= float("+E+" - pad);";var M=l.getOrCreateTextureLayout(m[0]),j=`
      `+t(M,_,x,w,"value += _X(x);",N,"0.0")+`
    `;return{inputLayouts:[M],outputLayout:l.createTextureLayoutFromShape(T),samplers:["X"],shaderSource:j}}s.WebGLAveragePool=u;var o=function(l){function m(){return l!==null&&l.apply(this,arguments)||this}return h(m,l),m.prototype.run=function(y,_){return y.run(this,_)},m.prototype.createProgramInfo=function(y,_){return e(y,_,!0,this.kernelShape,this.autoPad,this.strides,this.pads)},m.prototype.createRunData=function(y,_,b){var w=[y.getOrCreateTextureData(b[0])];return{inputTextureDatas:w,outputTextureData:y.createTextureDataFromLayout(_.outputLayout,w[0].tensor.type),uniformData:{}}},m}(c.GlobalMaxPool);s.WebGLGlobalMaxPool=o;var r=function(l){function m(){return l!==null&&l.apply(this,arguments)||this}return h(m,l),m.prototype.run=function(y,_){return y.run(this,_)},m.prototype.createProgramInfo=function(y,_){return e(y,_,!1,this.kernelShape,this.autoPad,this.strides,this.pads)},m.prototype.createRunData=function(y,_,b){var w=[y.getOrCreateTextureData(b[0])];return{inputTextureDatas:w,outputTextureData:y.createTextureDataFromLayout(_.outputLayout,w[0].tensor.type),uniformData:{}}},m}(c.MaxPool);function e(l,m,y,_,b,w,x){_===void 0&&(_=[]),b===void 0&&(b=""),w===void 0&&(w=[]),x===void 0&&(x=[]);var S=m[0].dims.slice();p.PoolConvUtil.adjustPoolAttributes(y,S,_,w,x);var A=p.PoolConvUtil.computePoolOutputShape(y,S,w,_,x,b),T=l.createTextureLayoutFromShape(S),E=`
    `+t(T,_,x,w,`
              value = max(_X(x), value);
      `,"","-1e5")+`
  `;return{inputLayouts:[T],outputLayout:l.createTextureLayoutFromShape(A),samplers:["X"],shaderSource:E}}function t(l,m,y,_,b,w,x){var S=l.shape,A=l.shape.length;if(m.length<=2){var T=m[m.length-1],E=_[_.length-1],N=y[y.length/2-1],M=y[y.length-1],j=S[A-1],k="",F="",L="";if(k=N+M!==0?`
                for (int i = 0; i < `+T+`; i++) {
                  x[`+A+" - 1] = indices["+A+" - 1] * "+E+" - "+N+` + i;
                  if (x[`+A+" - 1] < 0 || x["+A+" - 1] >= "+j+`) {
                    pad++;
                    continue;
                  }
                  `+b+`
                }`:`
                for (int i = 0; i < `+T+`; i++) {
                  x[`+A+" - 1] = indices["+A+" - 1] * "+E+" - "+N+` + i;
                  `+b+`
                }`,m.length===2){var B=m[m.length-2],V=_[_.length-2],R=y[y.length/2-2],z=y[y.length-2],q=S[A-2];F=R+z!==0?`
              for (int j = 0; j < `+B+`; j++) {
                x[`+A+" - 2] = indices["+A+" - 2] * "+V+" - "+R+` + j;
                if (x[`+A+" - 2] < 0 || x["+A+" - 2] >= "+q+`) {
                  pad+= `+T+`;
                  continue;
                }
            `:`
                for (int j = 0; j < `+B+`; j++) {
                  x[`+A+" - 2] = indices["+A+" - 2] * "+V+" - "+R+` + j;
                `,L=`
              }
            `}return`
            float process(int indices[`+A+`]) {
              int x[`+A+`];
              copyVec(indices, x);

              float value = `+x+`;
              int pad = 0;
              `+F+`
              `+k+`
              `+L+`
              `+w+`
              return value;
            }
          `}var Z=p.ShapeUtil.size(m),oe=p.ShapeUtil.computeStrides(m),ne=oe.length,W=y.length,K=i(ne),ae=n(S,"inputDims"),O=n(y,"pads"),D=n(oe,"kernelStrides");return`
            `+K+`
            float process(int indices[`+A+`]) {
                int x[`+A+`];
                copyVec(indices, x);
                int offset[`+ne+`];
                int pads[`+W+`];
                int inputDims[`+A+`];
                int kernelStrides[`+ne+`];
                int strides[`+ne+`];
                `+O+`
                `+ae+`
                `+n(_,"strides")+`
                `+D+`

                float value = `+x+`;
                int pad = 0;
                bool isPad = false;
                for (int i = 0; i < `+Z+`; i++) {
                    offsetToIndices(i, kernelStrides, offset);
                    isPad = false;
                    for (int j = `+A+" - "+ne+"; j < "+A+`; j++) {
                      x[j] = indices[j] * strides[j - `+A+" + "+ne+`]
                        + offset[j - `+A+" + "+ne+`] - pads[j - 2];
                      `+(y.reduce(function(I,U){return I+U})?`
                if (x[j] >= inputDims[j] || x[j] < 0) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                `+b+`
              }`:`
                  }
                  `+b)+`
                }
                `+w+`

                return value;
            }`}function n(l,m){for(var y="",_=0;_<l.length;_++)y+=`
      `+m+"["+_+"] = "+l[_]+`;
    `;return y}function i(l){return`
    void offsetToIndices(int offset, int[`+l+"] strides, out int["+l+`] indices) {
      if (`+l+` == 0) {
        return;
      }
      for (int i = 0; i < `+l+` - 1; ++i) {
        indices[i] = offset / strides[i];
        offset -= indices[i] * strides[i];
      }
      indices[`+l+` - 1] = offset;
    }`}s.WebGLMaxPool=r,s.GeneratePoolingCode=t,s.copyArray=n,s.offsetToIndices=i},function(v,s,g){var d,h=this&&this.__extends||(d=function(i,l){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var _ in y)y.hasOwnProperty(_)&&(m[_]=y[_])})(i,l)},function(i,l){function m(){this.constructor=i}d(i,l),i.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLReduceSumSquare=s.WebGLReduceLogSum=s.WebGLReduceProd=s.WebGLReduceMin=s.WebGLReduceMax=s.WebGLReduceMean=s.WebGLReduceSum=void 0;var c=g(36),p=g(0),f=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.run=function(m,y){return m.run(this,y)},l.prototype.createProgramInfo=function(m,y){for(var _=[],b=y[0].dims.length||1,w=[],x=p.ShapeUtil.normalizeAxes(this.axes,y[0].dims.length),S=this.getOps(y,x),A=S[1],T=0;T<y[0].dims.length;T++)x.indexOf(T)>=0||x.length===0?(this.keepDims&&_.push(1),A=`
        for(int j`+T+" = 0; j"+T+" < "+y[0].dims[T]+"; j"+T+`++) {
          inputIdx[`+T+"] = j"+T+`;
          `+A+`
        }
        `):(w.push("inputIdx["+T+"] = outputIdx["+_.length+"];"),_.push(y[0].dims[T]));var E=`
      float process(int outputIdx[`+(_.length||1)+`]) {
        float value;                 // final result
        int inputIdx[`+b+`];      // addressing input data
        `+w.join(`
`)+`
        `+S[0]+`       // init ops for reduce max/min
        `+A+`
        `+S[2]+`       // final computation for reduce mean
        return value;
      }`;return{inputLayouts:y.map(function(N){return m.getOrCreateTextureLayout(N)}),outputLayout:m.createTextureLayoutFromShape(_),samplers:["A"],shaderSource:E}},l.prototype.createRunData=function(m,y,_){var b=_.map(function(w,x){return m.getOrCreateTextureData(w,y.inputLayouts[x])});return{inputTextureDatas:b,outputTextureData:m.createTextureDataFromLayout(y.outputLayout,b[0].tensor.type),uniformData:{}}},l}(c.ReduceBase),u=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m){return["value = 0.0;","value += _A(inputIdx);",""]},l}(f);s.WebGLReduceSum=u;var a=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m,y){for(var _=1,b=0;b<m[0].dims.length;b++)(y.indexOf(b)>=0||y.length===0)&&(_*=m[0].dims[b]);return["value = 0.0;","value += _A(inputIdx);","value /= "+_+".;"]},l}(f);s.WebGLReduceMean=a;var o=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m,y){for(var _=[],b=0;b<m[0].dims.length;b++)(y.indexOf(b)>=0||y.length===0)&&_.push("inputIdx["+b+"] = 0;");return[_.join(`
`)+`
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]},l}(f);s.WebGLReduceMax=o;var r=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m,y){for(var _=[],b=0;b<m[0].dims.length;b++)(y.indexOf(b)>=0||y.length===0)&&_.push("inputIdx["+b+"] = 0;");return[_.join(`
`)+`
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]},l}(f);s.WebGLReduceMin=r;var e=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m){return["value = 1.0;","value *= _A(inputIdx);",""]},l}(f);s.WebGLReduceProd=e;var t=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]},l}(f);s.WebGLReduceLogSum=t;var n=function(i){function l(){return i!==null&&i.apply(this,arguments)||this}return h(l,i),l.prototype.getOps=function(m){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]},l}(f);s.WebGLReduceSumSquare=n},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSliceV10=s.WebGLSlice=void 0;var c=g(38),p=g(0),f=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){return t.run(this,n)},e.prototype.createProgramInfo=function(t,n){return a(t,n[0],this.starts,this.ends,this.axes)},e.prototype.createRunData=function(t,n,i){return o(t,n,i)},e}(c.Slice);s.WebGLSlice=f;var u=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){return t.run(this,n)},e.prototype.createProgramInfo=function(t,n){if(!t.session.isInitializer(n[1].dataId)||!t.session.isInitializer(n[2].dataId)||n.length>=4&&!t.session.isInitializer(n[3].dataId)||n.length>=5&&!t.session.isInitializer(n[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(n.length>=5&&n[4].integerData.some(function(y){return y!==1}))throw new Error("currently non-1 steps is not supported for Slice");var i=Array.from(n[1].integerData),l=Array.from(n[2].integerData),m=n.length>=4?Array.from(n[3].integerData):[];return a(t,n[0],i,l,m)},e.prototype.createRunData=function(t,n,i){return o(t,n,i)},e}(c.SliceV10);function a(r,e,t,n,i){i.length===0&&(i=e.dims.slice(0).map(function(b,w){return w})),i=p.ShapeUtil.normalizeAxes(i,e.dims.length),t=t.map(function(b,w){return b>e.dims[i[w]]-1?e.dims[i[w]]:p.ShapeUtil.normalizeAxis(b,e.dims[i[w]])}),n=n.map(function(b,w){return b>e.dims[i[w]]-1?e.dims[i[w]]:p.ShapeUtil.normalizeAxis(b,e.dims[i[w]])});for(var l=e.dims.slice(),m=[],y=0;y<i.length;y++)l[i[y]]=n[y]-t[y],t[y]>0&&m.push("outputIdx["+i[y]+"] += "+t[y]+";");var _=`
      float process(int outputIdx[`+l.length+`]) {
        `+m.join(`
      `)+`
        return _A(outputIdx);
      }`;return{inputLayouts:[r.getOrCreateTextureLayout(e)],outputLayout:r.createTextureLayoutFromShape(l),samplers:["A"],shaderSource:_}}function o(r,e,t){var n=[r.getOrCreateTextureData(t[0],e.inputLayouts[0])];return{inputTextureDatas:n,outputTextureData:r.createTextureDataFromLayout(e.outputLayout,n[0].tensor.type),uniformData:{}}}s.WebGLSliceV10=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),c=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m},p=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(c(arguments[e]));return r};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSoftmax=void 0;var f=g(22),u=g(0),a=g(2),o=function(r){function e(){return r.call(this)||this}return h(e,r),e.prototype.run=function(t,n){var i=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(t,n).forEach(function(m,y){var _=t.session.programManager.build(m);i.artifacts.push(_)}));var l=this.createRunDatas(t,this.artifacts.map(function(m){return m.programInfo}),n);return l.forEach(function(m,y){return t.session.programManager.run(i.artifacts[y],m)}),[l[l.length-1].outputTextureData.tensor]},e.prototype.createSoftMaxProgramInfo=function(t,n,i,l,m,y){var _=n.dims.slice(),b=t.createTextureLayoutFromShape(_),w=_,x=w.length,S=b.width,A=b.height;if(i<1||l<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(m.shape.length!==1||y.shape.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(m.shape[0]!==i||y.shape[0]!==i)throw new Error("Shape of the intermediate results should be equal to logical row count");var T=`
    float process(int[`+x+`] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, `+S+", "+A+`);

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / `+l+`;

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{inputLayouts:[b,m,y],outputLayout:t.createTextureLayoutFromShape(w),samplers:["A","Max","Norm"],shaderSource:T}},e.prototype.createComputScaleProgramInfo=function(t,n,i,l,m,y){var _=t.createTextureLayoutFromShape(n.dims.slice()),b=y.length,w=_.width,x=_.height;if(i<1||l<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(y.length!==1)throw new Error("Dimensionality of the output should be 1");if(y[0]!==i)throw new Error("Shape of the output should be equal to logical row count");if(m.shape.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(m.shape[0]!==i)throw new Error("Shape of the intermediate results should be equal to logical row count");var S=`
    float process(int[`+b+`] indices) {

      int logical_row_start_offset = indices[0] * `+l+`;

      float norm_factor = 0.0;
      float max = _Max(indices);
      for(int i=0; i<`+l+`; ++i)
      {
        norm_factor += exp(getColorAsFloat(`+a.getGlsl(t.session.backend.glContext.version).texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+w+", "+x+`))) - max);
      }

      return norm_factor;
    }`;return{inputLayouts:[_,m],outputLayout:t.createTextureLayoutFromShape(y),samplers:["A","Max"],shaderSource:S}},e.prototype.createComputeMaxProgramInfo=function(t,n,i,l,m){var y=t.createTextureLayoutFromShape(n.dims.slice()),_=m.length,b=y.width,w=y.height;if(i<1||l<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(m.length!==1)throw new Error("Dimensionality of the output should be 1");if(m[0]!==i)throw new Error("Shape of the output should be equal to logical row count");var x=a.getGlsl(t.session.backend.glContext.version),S=`
        float process(int[`+_+`] indices) {

          int logical_row_start_offset = indices[0] * `+l+`;

          float max = getColorAsFloat(`+x.texture2D+"(A, offsetToCoords(logical_row_start_offset, "+b+", "+w+` )));
          for(int i=1; i<`+l+`; ++i)
          {
            float current = getColorAsFloat(`+x.texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+b+", "+w+`)));
            if(current > max)
              max = current;
          }

          return max;
        }`;return{inputLayouts:[y],outputLayout:t.createTextureLayoutFromShape(m),samplers:["A"],shaderSource:S}},e.prototype.createProgramInfos=function(t,n){var i=n[0].dims.slice(),l=u.ShapeUtil.normalizeAxis(this.axis,i.length),m=u.ShapeUtil.sizeToDimension(i,l),y=u.ShapeUtil.sizeFromDimension(i,l),_=this.createComputeMaxProgramInfo(t,n[0],m,y,[m]),b=this.createComputScaleProgramInfo(t,n[0],m,y,_.outputLayout,[m]);return[_,b,this.createSoftMaxProgramInfo(t,n[0],m,y,_.outputLayout,b.outputLayout)]},e.prototype.createRunDatas=function(t,n,i){var l=i[0].type,m=t.getOrCreateTextureData(i[0],n[0].inputLayouts[0]),y=[];y.push({inputTextureDatas:[m],outputTextureData:t.createTextureDataFromLayout(n[0].outputLayout,l),uniformData:{}});for(var _=1;_<n.length;++_)y.push({inputTextureDatas:p(y[_-1].inputTextureDatas,[y[_-1].outputTextureData]),outputTextureData:t.createTextureDataFromLayout(n[_].outputLayout,l),uniformData:{}});return y},e}(f.Softmax);s.WebGLSoftmax=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__read||function(a,o){var r=typeof Symbol=="function"&&a[Symbol.iterator];if(!r)return a;var e,t,n=r.call(a),i=[];try{for(;(o===void 0||o-- >0)&&!(e=n.next()).done;)i.push(e.value)}catch(l){t={error:l}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return i};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSplit=void 0;var p=g(146),f=g(0),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=this;if(!this.artifacts){this.artifacts=[];for(var n=f.ShapeUtil.normalizeAxis(this.axis,e[0].dims.length),i=this.getProgramCount(r,e,n),l=0;l<i;++l){var m=this.createProgramInfo(r,e[0],n,l),y=r.session.programManager.build(m);this.artifacts.push(y)}}var _=[];return this.artifacts.forEach(function(b){var w=t.createRunData(r,b.programInfo,e);r.session.programManager.run(b,w),_.push(w.outputTextureData.tensor)}),_},o.prototype.getProgramCount=function(r,e,t){return c(f.SplitUtil.splitShape(e[0].dims,t,this.split,this.numOutputs),2)[1].length},o.prototype.createProgramInfo=function(r,e,t,n){var i=c(f.SplitUtil.splitShape(e.dims,t,this.split,this.numOutputs),2),l=i[0],m=i[1][n],y=l[n],_=`
      float process(int indices[`+y.length+`]) {
        indices[`+t+"] += "+m+`;
        return _A(indices);
      }`;return{inputLayouts:[r.getOrCreateTextureLayout(e)],outputLayout:r.createTextureLayoutFromShape(y),samplers:["A"],shaderSource:_}},o.prototype.createRunData=function(r,e,t){var n=[r.getOrCreateTextureData(t[0],e.inputLayouts[0])];return{inputTextureDatas:n,outputTextureData:r.createTextureDataFromLayout(e.outputLayout,n[0].tensor.type),uniformData:{}}},o}(p.Split);s.WebGLSplit=u},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Split=void 0;var d=function(){function h(c){this.numOutputs=c}return h.prototype.initialize=function(c){this.axis=c.getInt("axis",0),this.split=c.getInts("split",[])},h.prototype.checkInputs=function(c){return!(!c||c.length!==1)&&this.checkInputTypes(c)},h.prototype.checkInputTypes=function(c){return c[0].type==="int8"||c[0].type==="uint8"||c[0].type==="int16"||c[0].type==="uint16"||c[0].type==="int32"||c[0].type==="uint32"||c[0].type==="float32"||c[0].type==="float64"||c[0].type==="bool"},h}();s.Split=d},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSqueeze=void 0;var c=g(39),p=g(0),f=g(10),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=p.ShapeUtil.squeezeShape(e[0].dims,this.axes);return[f.reshape(r,e[0],t)]},o}(c.Squeeze);s.WebGLSqueeze=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSum=void 0;var c=g(23),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){var e=p.getGlsl(o.session.backend.glContext.version),t=r[0].dims.slice(),n=r.map(function(l,m){return e.texture2D+"(X"+m+",TexCoords)"}).join(" + "),i=r.map(function(l,m){return"X"+m});return{inputLayouts:r.map(function(l){return o.getOrCreateTextureLayout(l)}),outputLayout:o.createTextureLayoutFromShape(t),samplers:i,shaderSource:`
      void main() {
        vec4 result = `+n+`;
        `+e.output+` = result;
      }`,hasMain:!0}},a.prototype.createRunData=function(o,r,e){var t=e.map(function(n,i){return o.getOrCreateTextureData(n,r.inputLayouts[i])});return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{}}},a}(c.Sum);s.WebGLSum=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(p,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var o in a)a.hasOwnProperty(o)&&(u[o]=a[o])})(p,f)},function(p,f){function u(){this.constructor=p}d(p,f),p.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLTile=void 0;var c=function(p){function f(){return p!==null&&p.apply(this,arguments)||this}return h(f,p),f.prototype.run=function(u,a){return u.run(this,a)},f.prototype.createProgramInfo=function(u,a){for(var o=a[0].dims.slice(),r=new Array(o.length),e=[],t=0;t<o.length;t++)r[t]=o[t]*a[1].numberData[t],e.push("inputIdx["+t+"] = int(mod(float(outputIdx["+t+"]), "+o[t]+".));");var n=r.length,i=`
    float process(int outputIdx[`+n+`]) {
      int inputIdx[`+n+`];
      `+e.join(`
`)+`
      return _A(inputIdx);
    }`;return{inputLayouts:a.map(function(l){return u.getOrCreateTextureLayout(l)}),outputLayout:u.createTextureLayoutFromShape(r),samplers:["A"],shaderSource:i}},f.prototype.createRunData=function(u,a,o){var r=o.map(function(e,t){return u.getOrCreateTextureData(e,a.inputLayouts[t])});return{inputTextureDatas:r,outputTextureData:u.createTextureDataFromLayout(a.outputLayout,r[0].tensor.type),uniformData:{}}},f}(g(40).Tile);s.WebGLTile=c},function(v,s,g){var d,h=this&&this.__extends||(d=function(r,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)},function(r,e){function t(){this.constructor=r}d(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),c=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m},p=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(c(arguments[e]));return r};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLTranspose=void 0;var f=g(41),u=g(0),a=g(5),o=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return h(e,r),e.prototype.run=function(t,n){return t.run(this,n)},e.prototype.getOutputShape=function(t){var n=this.getAdjustedPerm(t[0]);return u.ShapeUtil.sortBasedOnPerm(t[0],n)},e.prototype.createProgramInfo=function(t,n){var i=n.map(function(w){return w.dims.slice()}),l=this.getAdjustedPerm(i[0]),m=this.getOutputShape(i),y=n[0].dims.length,_=`
      `+this.getPermFunctionBody("perm",l,y)+`
      float process(int indices[`+y+`]) {
        int a[`+y+`];
        perm(a, indices);
        return _A(a);
      }`,b=t.createTextureLayoutFromShape(m,1,m);return{inputLayouts:[t.getOrCreateTextureLayout(n[0])],outputLayout:b,samplers:["A"],shaderSource:_}},e.prototype.createRunData=function(t,n,i){var l=[t.getOrCreateTextureData(i[0],n.inputLayouts[0])];return{inputTextureDatas:l,outputTextureData:t.createTextureDataFromLayout(n.outputLayout,l[0].tensor.type),uniformData:{}}},e.prototype.getPositionalFunction=function(t,n,i){var l=this.getOutputShape([n]);return i||(i="perm"),{name:i,body:this.getPermFunctionBody(i,this.getAdjustedPerm(n),l.length),type:a.FunctionType.Positional,inputShape:n,outputShape:l}},e.prototype.getAdjustedPerm=function(t){var n=this.perm;return n&&n.length!==t.length&&(n=p(t.keys()).reverse()),n},e.prototype.getPermFunctionBody=function(t,n,i){var l=[];l.push("void "+t+"(out int a["+i+"], int src["+i+"]) {");for(var m=0;m<i;++m)l.push("	a["+n[m]+"]=src["+m+"];");return l.push("	}"),l.join(`
`)},e}(f.Transpose);s.WebGLTranspose=o},function(v,s,g){var d,h=this&&this.__extends||(d=function(o,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(o,r)},function(o,r){function e(){this.constructor=o}d(o,r),o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(s,"__esModule",{value:!0}),s.glslTanh=s.glslTan=s.glslSqrt=s.glslSigmoid=s.glslRelu=s.glslSin=s.glslNot=s.glslNeg=s.glslLog=s.glslIdentity=s.glslFloor=s.glslExp=s.glslCos=s.glslCeil=s.glslAtan=s.glslAsin=s.glslAcos=s.glslAbs=s.WebGLUnaryOp=void 0;var c=g(43),p=g(5),f=g(2),u=function(o){function r(e,t){var n=o.call(this,e)||this;return n.typeConstraint=e,n.glslFunc=t,n}return h(r,o),r.prototype.run=function(e,t){return e.run(this,t)},r.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),i=e.getOrCreateTextureLayout(t[0]),l=f.getGlsl(e.session.backend.glContext.version),m=`
      `+this.glslFunc.body+`
      void main() {
        vec4 v = `+l.texture2D+`(A, TexCoords);
        v = `+this.glslFunc.name+`(v);
        `+l.output+` = v;
      }
      `;return{inputLayouts:[i],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:m,hasMain:!0}},r.prototype.createRunData=function(e,t,n){var i=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:i,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,i[0].tensor.type),uniformData:{}}},r}(c.UnaryOp);function a(o){var r=o+"_";return{body:`
  float `+r+`(float a) {
    return `+o+`(a);
  }
  vec4 `+r+`(vec4 v) {
    return `+o+`(v);
  }
  `,name:r,type:p.FunctionType.ValueBased}}s.WebGLUnaryOp=u,s.glslAbs=function(){return a("abs")},s.glslAcos=function(){return a("acos")},s.glslAsin=function(){return a("asin")},s.glslAtan=function(){return a("atan")},s.glslCeil=function(){return a("ceil")},s.glslCos=function(){return a("cos")},s.glslExp=function(){return a("exp")},s.glslFloor=function(){return a("floor")},s.glslIdentity=function(){var o="indentity_";return{body:`
  float indentity_(float a) {
    return a;
  }
  vec4 indentity_(vec4 v) {
    return v;
  }
  `,name:o,type:p.FunctionType.ValueBased}},s.glslLog=function(){return a("log")},s.glslNeg=function(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg_",type:p.FunctionType.ValueBased}},s.glslNot=function(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not_",type:p.FunctionType.ValueBased}},s.glslSin=function(){return a("sin")},s.glslRelu=function(){return{body:`
  float relu_(float a) {
    return max( a, 0.0 );
  }
  vec4 relu_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:"relu_",type:p.FunctionType.ValueBased}},s.glslSigmoid=function(){var o="sigmoid_";return{body:`
  float sigmoid_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 sigmoid_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:o,type:p.FunctionType.ValueBased}},s.glslSqrt=function(){return a("sqrt")},s.glslTan=function(){return a("tan")},s.glslTanh=function(){return{body:`
  float tanh_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 tanh_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:"tanh_",type:p.FunctionType.ValueBased}}},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLUnsqueeze=void 0;var c=g(44),p=g(0),f=g(10),u=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h(o,a),o.prototype.run=function(r,e){var t=p.ShapeUtil.unsqueezeShape(e[0].dims,this.axes);return[f.reshape(r,e[0],t)]},o}(c.Unsqueeze);s.WebGLUnsqueeze=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLUpsample=void 0;var c=g(45),p=g(2),f=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return h(a,u),a.prototype.run=function(o,r){return o.run(this,r)},a.prototype.createProgramInfo=function(o,r){for(var e=this,t=o.getOrCreateTextureLayout(r[0]),n=r[0].dims.map(function(S,A){return Math.floor(S*e.scales[A])}),i=o.createTextureLayoutFromShape(n),l=n.length,m=p.getGlsl(o.session.backend.glContext.version),y=new Array(l),_=new Array(l),b=`
      int output_pitches[`+l+`];
      int input_pitches[`+l+`];
      `,w=l-1;w>=0;w--)y[w]=w===l-1?1:y[w+1]*n[w+1],_[w]=w===l-1?1:_[w+1]*r[0].dims[w+1],b+=`
      output_pitches[`+w+"] = "+y[w]+`;
      input_pitches[`+w+"] = "+_[w]+`;
      `;var x=`
    float getInputFloat(int index) {
      vec2 coords = offsetToCoords(index, `+t.width+", "+t.height+`);
      float value = getColorAsFloat(`+m.texture2D+`(X, coords));
      return value;
    }
    `;return{inputLayouts:[t],outputLayout:i,samplers:["X"],shaderSource:this.mode==="nearest"?`
      `+x+`
      float process(int indices[`+l+`]) {
        int input_index = 0;
        int output_index = coordsToOffset(TexCoords, `+i.width+", "+i.height+`);

        `+b+`

        int d, m;
        for (int dim = 0; dim < `+l+`; ++dim) {
          d = output_index / output_pitches[dim];
          m = output_index - d * output_pitches[dim];
          output_index = m;

          if (scales[dim] != 1 && d > 0) {
            int d2 = d / scales[dim];
            m = d - d2 * scales[dim];
            d = d2;
          }
          input_index += input_pitches[dim] * d;
        }

        return getInputFloat(input_index);
      }`:l===4?`
      `+x+`
      float process(int indices[4]) {
        int input_index = 0;
        int output_index = coordsToOffset(TexCoords, `+i.width+", "+i.height+`);

        `+b+`

        int m;
        int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
        index_of_dim0 = output_index / output_pitches[0];
        m = output_index - index_of_dim0 * output_pitches[0];
        index_of_dim1 = m / output_pitches[1];
        m = m - index_of_dim1 * output_pitches[1];
        index_of_dim2 = m / output_pitches[2];
        m = m - index_of_dim2 * output_pitches[2];
        index_of_dim3 = m;

        int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
        index_of_input_dim2 = index_of_dim2 / scales[2];
        y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
        index_of_input_dim3 = index_of_dim3 / scales[3];
        x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

        input_index = index_of_dim0 * input_pitches[0] +
                      index_of_dim1 * input_pitches[1] +
                      index_of_input_dim2 * input_pitches[2] +
                      index_of_input_dim3;

        float x00 = getInputFloat(input_index);
        float x10, x01, x11;

        bool end_of_dim2 = false;
        if (index_of_input_dim2 == (`+r[0].dims[2]+` - 1)) {
          // It's the end in dimension 2
          x01 = x00;
          end_of_dim2 = true;
        } else {
          x01 = getInputFloat(input_index + input_pitches[2]);
        }

        if (index_of_input_dim3 == (input_pitches[2] - 1)) {
          // It's the end in dimension 3
          x10 = x00;
          x11 = x01;
        }
        else {
          x10 = getInputFloat(input_index + 1);
          x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
        }

        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
        return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
      }`:`
      `+x+`
      float process(int indices[2]) {
        int input_index = 0;
        int output_index = coordsToOffset(TexCoords, `+i.width+", "+i.height+`);

        `+b+`

        int m;
        int index_of_dim0, index_of_dim1;
        index_of_dim0 = output_index / output_pitches[0];
        m = output_index - index_of_dim0 * output_pitches[0];
        index_of_dim1 = m;

        int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
        index_of_input_dim0 = index_of_dim0 / scales[0];
        y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
        index_of_input_dim1 = index_of_dim1 / scales[1];
        x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

        input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

        float x00 = getInputFloat(input_index);
        float x10, x01, x11;

        bool end_of_dim0 = false;
        if (index_of_input_dim0 == (`+r[0].dims[0]+` - 1)) {
          // It's the end in dimension 0
          x01 = x00;
          end_of_dim0 = true;
        } else {
          x01 = getInputFloat(input_index + input_pitches[0]);
        }

        if (index_of_input_dim1 == (input_pitches[0] - 1)) {
          // It's the end in dimension 1
          x10 = x00;
          x11 = x01;
        }
        else {
          x10 = getInputFloat(input_index + 1);
          x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
        }

        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
        return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
      }`,variables:[{name:"scales",type:"int",arrayLength:this.scales.length}]}},a.prototype.createRunData=function(o,r,e){var t=e.map(function(n,i){return o.getOrCreateTextureData(n,r.inputLayouts[i])});return{inputTextureDatas:t,outputTextureData:o.createTextureDataFromLayout(r.outputLayout,t[0].tensor.type),uniformData:{scales:this.scales.map(function(n){return Math.ceil(n)})}}},a}(c.Upsample);s.WebGLUpsample=f},function(v,s,g){var d=this&&this.__assign||function(){return(d=Object.assign||function(o){for(var r,e=1,t=arguments.length;e<t;e++)for(var n in r=arguments[e])Object.prototype.hasOwnProperty.call(r,n)&&(o[n]=r[n]);return o}).apply(this,arguments)},h=this&&this.__values||function(o){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&o[r],t=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.ProgramManager=void 0;var c=g(25),p=g(3),f=g(155),u=g(2),a=function(){function o(r,e){this.profiler=r,this.glContext=e,this.repo=new Map,this.attributesBound=!1}return o.prototype.getArtifact=function(r){return this.repo.get(r)},o.prototype.setArtifact=function(r,e){this.repo.set(r,e)},o.prototype.run=function(r,e){var t=this;this.profiler.event("backend","ProgramManager.run",function(){var n=t.glContext.gl,i=r.program;n.useProgram(i);try{t.bindOutput(e.outputTextureData),t.attributesBound||t.bindAttributes(r.attribLocations),t.bindUniforms(r.uniformLocations,e.uniformData,e.inputTextureDatas)}catch(l){throw p.Logger.error("ProgramManager",r.programInfo.shaderSource),l}t.profiler.event("backend","GlContext.draw()",function(){t.doDraw(r,e),n.flush()})})},o.prototype.dispose=function(){var r=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(function(e){return r.glContext.deleteProgram(e.program)})},o.prototype.build=function(r){var e=this;return this.profiler.event("backend","ProgramManager.build",function(){var t=new f.GlslPreprocessor(e.glContext,r),n=t.preprocess(),i=e.compile(n);return{programInfo:r,program:i,uniformLocations:e.getUniformLocations(i,t.context.programInfo.samplers,t.context.programInfo.variables),attribLocations:e.getAttribLocations(i)}})},o.prototype.doDraw=function(r,e){e.draw?(p.Logger.verbose("ProgramManager","Custom draw function"),e.draw(this.glContext,r)):this.glContext.draw()},o.prototype.compile=function(r){if(!this.vertexShader){p.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var e=u.getVertexShaderSource(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}c.env.debug&&p.Logger.verbose("ProrgramManager",`FragShader:
`+r+`
`);var t=this.glContext.compileShader(r,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),n},o.prototype.bindOutput=function(r){p.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h="+r.width+"/"+r.height+", shape="+r.shape+", type="+r.tensor.type),this.glContext.attachFramebuffer(r.texture,r.width,r.height)},o.prototype.bindAttributes=function(r){var e=r.position,t=r.textureCoord;this.glContext.setVertexAttributes(e,t),this.attributesBound=!0},o.prototype.bindUniforms=function(r,e,t){var n,i,l=this.glContext.gl,m=0;try{for(var y=h(r),_=y.next();!_.done;_=y.next()){var b=_.value,w=b.name,x=b.type,S=b.location,A=b.arrayLength;switch(x){case"sampler2D":this.bindTexture(t[m],S,m),m++;break;case"float":A?l.uniform1fv(S,e[w]):l.uniform1f(S,e[w]);break;case"int":A?l.uniform1iv(S,e[w]):l.uniform1i(S,e[w]);break;default:throw new Error("Uniform not implemented: "+x)}}}catch(T){n={error:T}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}},o.prototype.bindTexture=function(r,e,t){this.glContext.bindTextureToUniform(r.texture,t,e)},o.prototype.getAttribLocations=function(r){return{position:this.getAttribLocation(r,"position"),textureCoord:this.getAttribLocation(r,"textureCoord")}},o.prototype.getUniformLocations=function(r,e,t){var n,i,l,m,y=[];if(e)try{for(var _=h(e),b=_.next();!b.done;b=_.next()){var w=b.value;y.push({name:w,type:"sampler2D",location:this.getUniformLocation(r,w)})}}catch(T){n={error:T}}finally{try{b&&!b.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}if(t)try{for(var x=h(t),S=x.next();!S.done;S=x.next()){var A=S.value;y.push(d(d({},A),{location:this.getUniformLocation(r,A.name)}))}}catch(T){l={error:T}}finally{try{S&&!S.done&&(m=x.return)&&m.call(x)}finally{if(l)throw l.error}}return y},o.prototype.getUniformLocation=function(r,e){var t=this.glContext.gl.getUniformLocation(r,e);if(t===null)throw new Error("Uniform "+e+" not found.");return t},o.prototype.getAttribLocation=function(r,e){return this.glContext.gl.getAttribLocation(r,e)},o}();s.ProgramManager=a},function(v,s,g){var d=this&&this.__values||function(a){var o=typeof Symbol=="function"&&Symbol.iterator,r=o&&a[o],e=0;if(r)return r.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&e>=a.length&&(a=void 0),{value:a&&a[e++],done:!a}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.GlslPreprocessor=void 0;var h=g(5),c=g(156),p=g(157),f=g(2),u=function(){function a(o,r){var e=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new h.GlslContext(o,r),Object.keys(p.glslRegistry).forEach(function(x){var S=new p.glslRegistry[x](e.context);e.libs[x]=S});var t=this.glslLibRoutineDependencyGraph;for(var n in this.libs){var i=this.libs[n].getFunctions();for(var l in i){var m=n+"."+l,y=void 0;t[m]?(y=t[m]).routineBody=i[l].routineBody:(y=new h.GlslLibRoutineNode(m,i[l].routineBody),t[m]=y);var _=i[l].dependencies;if(_)for(var b=0;b<_.length;++b)if(t[_[b]])y.addDependency(t[_[b]]);else{var w=new h.GlslLibRoutineNode(_[b]);t[_[b]]=w,y.addDependency(w)}}}}return a.prototype.preprocess=function(){var o=this.context.programInfo,r=o.shaderSource;return this.context.programInfo.hasMain||(r=r+`
      `+f.getDefaultFragShaderMain(this.context.glContext.version,o.outputLayout.shape.length)),r=c.replaceInlines(r),f.getFragShaderPreamble(this.context.glContext.version)+`
    `+this.getUniforms(o.samplers,o.variables)+`
    `+this.getImports(r)+`
    `+r},a.prototype.getImports=function(o){var r=this.selectGlslLibRoutinesToBeIncluded(o);if(r.length===0)return"";for(var e="",t=0;t<r.length;++t){if(!r[t].routineBody)throw new Error("Missing body for the Glsl Library routine: "+r[t].name);e+=r[t].routineBody+`
`}return e},a.prototype.selectGlslLibRoutinesToBeIncluded=function(o){var r=this,e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(function(t){var n=t.split(".")[1];o.indexOf(n)!==-1&&e.push(r.glslLibRoutineDependencyGraph[t])}),h.TopologicalSortGlslRoutines.returnOrderedNodes(e)},a.prototype.getUniforms=function(o,r){var e,t,n,i,l=[];if(o)try{for(var m=d(o),y=m.next();!y.done;y=m.next()){var _=y.value;l.push("uniform sampler2D "+_+";")}}catch(S){e={error:S}}finally{try{y&&!y.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}if(r)try{for(var b=d(r),w=b.next();!w.done;w=b.next()){var x=w.value;l.push("uniform "+x.type+" "+x.name+(x.arrayLength?"["+x.arrayLength+"]":"")+";")}}catch(S){n={error:S}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}return l.join(`
`)},a}();s.GlslPreprocessor=u},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.replaceInlines=void 0;var d=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;s.replaceInlines=function(h){for(var c,p={};(c=d.exec(h))!==null;){var f=c[3].split(",").map(function(e){var t=e.trim().split(" ");return t&&t.length===2?{type:t[0],name:t[1]}:null}).filter(function(e){return e!==null});p[c[2]]={params:f,body:c[4]}}for(var u in p)for(var a="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",u),o=new RegExp(a,"gm"),r=function(){var e=c[1],t=c[2],n=c[3].split(","),i=e?e+" "+t+";":"",l=p[u].body,m="";p[u].params.forEach(function(_,b){_&&(m+=_.type+" "+_.name+" = "+n[b]+`;
`)});var y=`
      `+i+`
      {
        `+(l=(l=m+`
 `+l).replace("return",t+" = "))+`
      }
      `;h=h.replace(c[0],y)};(c=o.exec(h))!==null;)r();return h=h.replace(d,"")}},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.glslRegistry=void 0;var d=g(158),h=g(159),c=g(160),p=g(161),f=g(162);s.glslRegistry={encoding:h.EncodingGlslLib,fragcolor:c.FragColorGlslLib,vec:f.VecGlslLib,shapeUtils:p.ShapeUtilsGlslLib,coordinates:d.CoordsGlslLib}},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__assign||function(){return(c=Object.assign||function(a){for(var o,r=1,e=arguments.length;r<e;r++)for(var t in o=arguments[r])Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t]);return a}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.CoordsGlslLib=void 0;var p=g(5),f=g(2),u=function(a){function o(r){return a.call(this,r)||this}return h(o,a),o.prototype.getFunctions=function(){return c(c(c(c({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom())},o.prototype.getCustomTypes=function(){return{}},o.prototype.offsetToCoords=function(){return{offsetToCoords:new p.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}},o.prototype.coordsToOffset=function(){return{coordsToOffset:new p.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}},o.prototype.toVec=function(){for(var r=this.context.programInfo.outputLayout,e=r.shape.length,t=r.strides,n=r.width,i=r.height,l=[],m=0;m<e-1;++m)l.push(`
        c[`+m+"] = offset / "+t[m]+";"),l.push(`
        offset -= c[`+m+"] * "+t[m]+";");l.push(`
        c[`+(e-1)+"] = offset;");var y=`
      void toVec(vec2 texCoords, out int c[`+e+`]) {
        int offset = coordsToOffset(texCoords, `+n+", "+i+`);
        `+l.join("")+`
      }
      void toVec(int offset, out int c[`+e+`]) {
        `+l.join("")+`
      }
    `;return{toVec:new p.GlslLibRoutine(y,["coordinates.coordsToOffset"])}},o.prototype.valueFrom=function(){var r=this,e=this.context.programInfo,t={};return this.context.programInfo.samplers.forEach(function(n,i){var l=e.inputLayouts[i],m=l.shape.length,y="_"+n;t[y]=new p.GlslLibRoutine(r.getValueFromSingle(n,m,l.width,l.height,!1),["shapeUtils.indicesToOffset"+y,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),t[y+="_T"]=new p.GlslLibRoutine(r.getValueFromSingle(n,m,l.width,l.height,!0),["shapeUtils.indicesToOffset"+y,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t},o.prototype.getValueFromSingle=function(r,e,t,n,i){var l="_"+r;return i&&(l+="_T"),`
        float `+l+"(int m["+e+`]) {
          int offset = indicesToOffset`+l+`(m);
          vec2 coords = offsetToCoords(offset, `+t+", "+n+`);
          float value = getColorAsFloat(`+f.getGlsl(this.context.glContext.version).texture2D+"("+r+`, coords));
          return value;
        }
        `},o}(p.GlslLib);s.CoordsGlslLib=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),c=this&&this.__assign||function(){return(c=Object.assign||function(u){for(var a,o=1,r=arguments.length;o<r;o++)for(var e in a=arguments[o])Object.prototype.hasOwnProperty.call(a,e)&&(u[e]=a[e]);return u}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.EncodingGlslLib=void 0;var p=g(5),f=function(u){function a(o){return u.call(this,o)||this}return h(a,u),a.prototype.getFunctions=function(){return c(c({},this.encodeFloat32()),this.decodeFloat32())},a.prototype.getCustomTypes=function(){return{}},a.prototype.encodeFloat32=function(){return{encode:new p.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}},a.prototype.decodeFloat32=function(){return{decode:new p.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}},a.prototype.encodeUint8=function(){var o=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new p.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        `+o+`
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}},a.prototype.decodeUint8=function(){var o=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new p.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          `+o+`
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}},a.isLittleEndian=function(){var o=new ArrayBuffer(4),r=new Uint32Array(o),e=new Uint8Array(o);if(r[0]=3735928559,e[0]===239)return!0;if(e[0]===222)return!1;throw new Error("unknown endianness")},a}(p.GlslLib);s.EncodingGlslLib=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(a,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(a,o)},function(a,o){function r(){this.constructor=a}d(a,o),a.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__assign||function(){return(c=Object.assign||function(a){for(var o,r=1,e=arguments.length;r<e;r++)for(var t in o=arguments[r])Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t]);return a}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.FragColorGlslLib=void 0;var p=g(5),f=g(2),u=function(a){function o(r){return a.call(this,r)||this}return h(o,a),o.prototype.getFunctions=function(){return c(c({},this.setFragColor()),this.getColorAsFloat())},o.prototype.getCustomTypes=function(){return{}},o.prototype.setFragColor=function(){var r=f.getGlsl(this.context.glContext.version);return{setFragColor:new p.GlslLibRoutine(`
        void setFragColor(float value) {
            `+r.output+` = encode(value);
        }
        `,["encoding.encode"])}},o.prototype.getColorAsFloat=function(){return{getColorAsFloat:new p.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}},o}(p.GlslLib);s.FragColorGlslLib=u},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),c=this&&this.__assign||function(){return(c=Object.assign||function(u){for(var a,o=1,r=arguments.length;o<r;o++)for(var e in a=arguments[o])Object.prototype.hasOwnProperty.call(a,e)&&(u[e]=a[e]);return u}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.ShapeUtilsGlslLib=void 0;var p=g(5),f=function(u){function a(o){return u.call(this,o)||this}return h(a,u),a.prototype.getFunctions=function(){return c(c(c(c(c({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},a.prototype.getCustomTypes=function(){return{}},a.prototype.bcastIndex=function(){var o=this.context.programInfo,r=o.outputLayout.shape.length,e={};return this.context.programInfo.samplers.forEach(function(t,n){var i=o.inputLayouts[n].shape;if(i.length<=r){for(var l=i.length,m=r-l,y="bcastIndices_"+t,_="",b=0;b<l;++b)_+=`
          realIndices[`+b+"] = int( mod(float(bcastedIndices["+(m+b)+"]), "+i[b]+`.0) );
          `;var w=`
        void `+y+" (int bcastedIndices["+r+"], out int realIndices["+l+`]) {
          `+_+`
        }
        `;e[y]=new p.GlslLibRoutine(w)}}),e},a.prototype.bcastMatmulIndex=function(){var o=this.context.programInfo,r=o.outputLayout.shape.length,e={};return this.context.programInfo.samplers.forEach(function(t,n){var i=o.inputLayouts[n].shape;if(!(i.length<2||i.length>r)){for(var l=i.length,m=r-l,y="bcastMatmulIndices_"+t,_="",b=0;b<l-2;++b)_+=`
          realIndices[`+b+"] = int( mod(float(bcastedIndices["+(m+b)+"]), "+i[b]+`.0) );
          `;var w=`
        void `+y+"(int bcastedIndices["+r+"], out int realIndices["+l+`]) {
          `+_+`
          realIndices[`+(l-1)+"] = bcastedIndices["+(r-1)+`];
          realIndices[`+(l-2)+"] = bcastedIndices["+(r-2)+`];
        }
        `;e[y]=new p.GlslLibRoutine(w)}}),e},a.prototype.indicesToOffset=function(){var o=this.context.programInfo,r={};return this.context.programInfo.samplers.forEach(function(e,t){var n=o.inputLayouts[t].shape,i=o.inputLayouts[t].strides,l=n.length,m="indicesToOffset_"+e;r[m]=new p.GlslLibRoutine(a.indexToOffsetSingle(m,l,i)),r[m="indicesToOffset_"+e+"_T"]=new p.GlslLibRoutine(a.indexToOffsetSingle(m,l,i.slice().reverse()))}),r},a.indexToOffsetSingle=function(o,r,e){for(var t="",n=r-1;n>=0;--n)t+=`
        offset += indices[`+n+"] * "+e[n]+`;
        `;return`
      int `+o+"(int indices["+r+`]) {
        int offset = 0;
        `+t+`
        return offset;
      }
      `},a.prototype.offsetToIndices=function(){var o=this.context.programInfo,r={};return this.context.programInfo.samplers.forEach(function(e,t){var n=o.inputLayouts[t].shape,i=o.inputLayouts[t].strides,l=n.length,m="offsetToIndices_"+e;r[m]=new p.GlslLibRoutine(a.offsetToIndicesSingle(m,l,i)),r[m="offsetToIndices_"+e+"_T"]=new p.GlslLibRoutine(a.offsetToIndicesSingle(m,l,i.slice().reverse()))}),r},a.offsetToIndicesSingle=function(o,r,e){for(var t=[],n=0;n<r-1;++n)t.push(`
      indices[`+n+"] = offset / "+e[n]+";"),t.push(`
        offset -= indices[`+n+"] * "+e[n]+";");return t.push(`
      indices[`+(r-1)+"] = offset;"),`
      void `+o+"(int offset, out int indices["+r+`]) {
        `+t.join("")+`
      }
      `},a.prototype.incrementIndices=function(){var o=this.context.programInfo,r={};return this.context.programInfo.samplers.forEach(function(e,t){for(var n=o.inputLayouts[t].shape,i=n.length,l="incrementIndices_"+e,m="",y=0;y<i;++y)m+=`
        shape[`+y+"] = "+n[y]+";";var _=`
        void `+l+"(int axis, out int indices["+i+`]) {
          int shape[`+i+`];
          `+m+`;
          for(int i = `+i+` -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;r[l]=new p.GlslLibRoutine(_)}),r},a}(p.GlslLib);s.ShapeUtilsGlslLib=f},function(v,s,g){var d,h=this&&this.__extends||(d=function(u,a){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var e in r)r.hasOwnProperty(e)&&(o[e]=r[e])})(u,a)},function(u,a){function o(){this.constructor=u}d(u,a),u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),c=this&&this.__assign||function(){return(c=Object.assign||function(u){for(var a,o=1,r=arguments.length;o<r;o++)for(var e in a=arguments[o])Object.prototype.hasOwnProperty.call(a,e)&&(u[e]=a[e]);return u}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.VecGlslLib=void 0;var p=g(5),f=function(u){function a(o){return u.call(this,o)||this}return h(a,u),a.prototype.getCustomTypes=function(){return{}},a.prototype.getFunctions=function(){return c(c(c(c({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},a.prototype.binaryVecFunctions=function(){var o=this.context.programInfo.outputLayout.shape.length,r={add:"+=",sub:"-=",mul:"*=",div:"/="},e={};for(var t in r){for(var n=t+"Vec",i="",l=0;l<o;++l)i+=`
          dest[`+l+"] "+r[t]+" src["+l+`];
          `;var m=`
        void `+n+"(int src["+o+"], out int dest["+o+`]) {
          `+i+`
        }
        `;e[n]=new p.GlslLibRoutine(m)}return e},a.prototype.copyVec=function(){for(var o=this.context.programInfo.outputLayout.shape.length,r="",e=0;e<o;++e)r+=`
        dest[`+e+"] = src["+e+`];
        `;var t=`
      void copyVec(int src[`+o+"], out int dest["+o+`]) {
        `+r+`
      }
      `;return{copyVec:new p.GlslLibRoutine(t)}},a.prototype.setVecItem=function(){for(var o=this.context.programInfo.outputLayout.shape.length,r=`
        if(index < 0)
            index =`+o+` + index;
        if (index == 0)
            m[0] = value;
        `,e=1;e<o-1;++e)r+=`
        else if (index == `+e+`)
            m[`+e+`] = value;
            `;var t=`
      void setVecItem(out int m[`+o+`], int index, int value) {
        `+(r+=`
        else
            m[`+(o-1)+`] = value;
        `)+`
      }
        `;return{setVecItem:new p.GlslLibRoutine(t)}},a.prototype.getVecItem=function(){for(var o=this.context.programInfo.outputLayout.shape.length,r=`
        if(index < 0)
            index = `+o+` + index;
        if (index == 0)
            return m[0];
      `,e=1;e<o-1;++e)r+=`
        else if (index == `+e+`)
            return m[`+e+`];
      `;var t=`
      int getVecItem(int m[`+o+`], int index) {
        `+(r+=`
        else
            return m[`+(o-1)+`];
        `)+`
      }
    `;return{getVecItem:new p.GlslLibRoutine(t)}},a}(p.GlslLib);s.VecGlslLib=f},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysKeepOriginalSizeStrategy=void 0;var d=g(3),h=function(){function c(p){this.maxTextureSize=p}return c.prototype.computeTextureWH=function(p,f){if(p.length===0)return[1,1];var u=this.maxTextureSize;if(f){var a=f.breakAxis>=p.length?1:p.slice(f.breakAxis).reduce(function(t,n){return t*n}),o=f.breakAxis<=0?1:p.slice(0,f.breakAxis).reduce(function(t,n){return t*n});if(!(a>u||o>u))return[a,o];d.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:"+p+", breakAxis:"+f.breakAxis)}for(var r=p.reduce(function(t,n){return t*n}),e=Math.floor(Math.sqrt(r));e<u&&e<r&&r%e!=0;e++);if(e>=u||r%e!=0)throw new Error("The given dimensions are outside this GPU's boundaries: "+p);return[e,r/e]},c}();s.AlwaysKeepOriginalSizeStrategy=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.TextureManager=void 0;var d=g(3),h=function(){function c(p,f,u,a){this.glContext=p,this.layoutStrategy=f,this.profiler=u,this.config=a,a.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return c.prototype.createTextureFromLayout=function(p,f,u,a){var o,r,e=this.toEncoderType(p),t=this.glContext.getEncoder(e,f.channels||1,a);if(this.config.reuseTextures){o=f.width+"x"+f.height+"_"+t.format+"_"+t.internalFormat+"_"+t.textureType,(r=this.inUseTextures.get(o))||(r=[],this.inUseTextures.set(o,r));var n=this.idleTextures.get(o);if(n&&n.length>0){var i=n.pop();return r.push(i),a===1&&this.glContext.updateTexture(i,f.width,f.height,t,this.toTextureData(p,u)),i}}d.Logger.verbose("TextureManager","Creating new texture of size "+f.width+"x"+f.height);var l=this.glContext.allocateTexture(f.width,f.height,t,this.toTextureData(p,u));return this.config.reuseTextures&&(r.push(l),this.textureLookup.set(l,o)),l},c.prototype.readTexture=function(p,f,u){var a=this;return u||(u=1),this.profiler.event("backend","TextureManager.readTexture",function(){var o=p.shape.reduce(function(e,t){return e*t})*u,r=a.glContext.readTexture(p.texture,p.width,p.height,o,a.toEncoderType(f),u);return a.toTensorData(f,r)})},c.prototype.readUint8TextureAsFloat=function(p){var f=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",function(){var u=p.shape.reduce(function(o,r){return o*r}),a=f.glContext.readTexture(p.texture,p.width,p.height,4*u,"byte",4);return new Float32Array(a.buffer,a.byteOffset,u)})},c.prototype.releaseTexture=function(p,f){var u;if(this.config.reuseTextures&&(u=this.textureLookup.get(p.texture))){f&&this.textureLookup.delete(u);var a=this.inUseTextures.get(u);if(a){var o=a.indexOf(p.texture);if(o!==-1){a.splice(o,1);var r=this.idleTextures.get(u);r||(r=[],this.idleTextures.set(u,r)),r.push(p.texture)}}}u&&!f||(d.Logger.verbose("TextureManager","Deleting texture of size "+p.width+"x"+p.height),this.glContext.deleteTexture(p.texture))},c.prototype.toTensorData=function(p,f){return f instanceof Float32Array?f:new Float32Array(f)},c.prototype.toTextureData=function(p,f){if(f)return f instanceof Float32Array?f:new Float32Array(f)},c.prototype.toEncoderType=function(p){return"float"},c.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},c}();s.TextureManager=h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.createNewWebGLContext=s.createWebGLContext=void 0;var d=g(3),h=g(166),c={};function p(f){var u,a=function(){var r=document.createElement("canvas");return r.width=1,r.height=1,r}(),o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!f||f==="webgl2")&&(u=a.getContext("webgl2",o)))try{return new h.WebGLContext(u,2)}catch(r){d.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: "+r)}if((!f||f==="webgl")&&(u=a.getContext("webgl",o)||a.getContext("experimental-webgl",o)))try{return new h.WebGLContext(u,1)}catch(r){d.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: "+r)}throw new Error("WebGL is not supported")}s.createWebGLContext=function f(u){var a;u&&u!=="webgl2"||!("webgl2"in c)?u&&u!=="webgl"||!("webgl"in c)||(a=c.webgl):a=c.webgl2,a=a||p(u),u=u||a.version===1?"webgl":"webgl2";var o=a.gl;return c[u]=a,o.isContextLost()?(delete c[u],f(u)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),a)},s.createNewWebGLContext=p},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(a,o,r,e){e===void 0&&(e=r),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[r]}})}:function(a,o,r,e){e===void 0&&(e=r),a[e]=o[r]}),h=this&&this.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),c=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var r in a)r!=="default"&&Object.hasOwnProperty.call(a,r)&&d(o,a,r);return h(o,a),o};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLContext=void 0;var p=g(25),f=c(g(167)),u=function(){function a(o,r){this.frameBufferBound=!1,this.gl=o,this.version=r,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return a.prototype.allocateTexture=function(o,r,e,t){var n=this.gl,i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var l=t?e.encode(t,o*r):null;return n.texImage2D(n.TEXTURE_2D,0,e.internalFormat,o,r,0,e.format,e.textureType,l),this.checkError(),i},a.prototype.updateTexture=function(o,r,e,t,n){var i=this.gl;i.bindTexture(i.TEXTURE_2D,o);var l=t.encode(n,r*e);i.texSubImage2D(i.TEXTURE_2D,0,0,0,r,e,t.format,t.textureType,l),this.checkError()},a.prototype.attachFramebuffer=function(o,r,e){var t=this.gl;t.bindTexture(t.TEXTURE_2D,o),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),this.checkError(),t.viewport(0,0,r,e),t.scissor(0,0,r,e)},a.prototype.readTexture=function(o,r,e,t,n,i){var l=this.gl;i||(i=1),this.frameBufferBound||this.attachFramebuffer(o,r,e);var m=this.getEncoder(n,i),y=m.allocate(r*e);return l.bindTexture(l.TEXTURE_2D,o),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,o,0),l.readPixels(0,0,r,e,l.RGBA,m.textureType,y),this.checkError(),m.decode(y,t)},a.prototype.isFramebufferReady=function(){return!0},a.prototype.getActiveTexture=function(){var o=this.gl;return"TEXTURE"+(o.getParameter(this.gl.ACTIVE_TEXTURE)-o.TEXTURE0)},a.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},a.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},a.prototype.setVertexAttributes=function(o,r){var e=this.gl;e.vertexAttribPointer(o,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(o),r!==-1&&(e.vertexAttribPointer(r,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(r)),this.checkError()},a.prototype.createProgram=function(o,r){var e=this.gl,t=e.createProgram();return e.attachShader(t,o),e.attachShader(t,r),e.linkProgram(t),t},a.prototype.compileShader=function(o,r){var e=this.gl,t=e.createShader(r);if(!t)throw new Error("createShader() returned null with type "+r);if(e.shaderSource(t,o),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)===!1)throw new Error("Failed to compile shader: "+e.getShaderInfoLog(t));return t},a.prototype.deleteShader=function(o){this.gl.deleteShader(o)},a.prototype.bindTextureToUniform=function(o,r,e){var t=this.gl;t.activeTexture(t.TEXTURE0+r),this.checkError(),t.bindTexture(t.TEXTURE_2D,o),this.checkError(),t.uniform1i(e,r),this.checkError()},a.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},a.prototype.checkError=function(){if(p.env.debug){var o=this.gl,r=o.getError(),e="";switch(r){case o.NO_ERROR:return;case o.INVALID_ENUM:e="INVALID_ENUM";break;case o.INVALID_VALUE:e="INVALID_VALUE";break;case o.INVALID_OPERATION:e="INVALID_OPERATION";break;case o.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case o.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case o.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e="Unknown WebGL Error: "+r.toString(16)}throw new Error(e)}},a.prototype.deleteTexture=function(o){this.gl.deleteTexture(o)},a.prototype.deleteProgram=function(o){this.gl.deleteProgram(o)},a.prototype.getEncoder=function(o,r,e){if(e===void 0&&(e=0),this.version===2)return new f.RedFloat32DataEncoder(this.gl,r);switch(o){case"float":return e===1||this.isRenderFloat32Supported?new f.RGBAFloatDataEncoder(this.gl,r):new f.RGBAFloatDataEncoder(this.gl,r,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new f.Uint8DataEncoder(this.gl,r);default:throw new Error("Invalid dataType: "+o)}},a.prototype.clearActiveTextures=function(){for(var o=this.gl,r=0;r<this.maxTextureImageUnits;++r)o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,null)},a.prototype.dispose=function(){if(!this.disposed){var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(this.framebuffer),o.bindBuffer(o.ARRAY_BUFFER,null),o.deleteBuffer(this.vertexbuffer),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),o.finish(),this.disposed=!0}},a.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},a.prototype.createVertexbuffer=function(){var o=this.gl,r=o.createBuffer();if(!r)throw new Error("createBuffer() returned null");var e=this.createDefaultGeometry();return o.bindBuffer(o.ARRAY_BUFFER,r),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),this.checkError(),r},a.prototype.createFramebuffer=function(){var o=this.gl.createFramebuffer();if(!o)throw new Error("createFramebuffer returned null");return o},a.prototype.queryVitalParameters=function(){var o=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),this.version},a.prototype.getExtensions=function(){this.version===2?this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},a.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var o=this.gl,r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r);var e=this.version===2?o.RGBA32F:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,e,1,1,0,o.RGBA,o.FLOAT,null);var t=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0);var n=o.checkFramebufferStatus(o.FRAMEBUFFER)===o.FRAMEBUFFER_COMPLETE;return o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteTexture(r),o.deleteFramebuffer(t),n},a.prototype.checkRenderFloat32=function(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},a.prototype.checkFloat32Download=function(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer},a.prototype.checkFloat32Blend=function(){var o,r,e,t,n,i=this.gl;try{o=i.createTexture(),r=i.createFramebuffer(),i.bindTexture(i.TEXTURE_2D,o);var l=this.version===2?i.RGBA32F:i.RGBA;return i.texImage2D(i.TEXTURE_2D,0,l,1,1,0,i.RGBA,i.FLOAT,null),i.bindFramebuffer(i.FRAMEBUFFER,r),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0),i.enable(i.BLEND),(e=i.createShader(i.VERTEX_SHADER))?(i.shaderSource(e,"void main(){}"),i.compileShader(e),!!(t=i.createShader(i.FRAGMENT_SHADER))&&(i.shaderSource(t,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),i.compileShader(t),!!(n=i.createProgram())&&(i.attachShader(n,e),i.attachShader(n,t),i.linkProgram(n),i.useProgram(n),i.drawArrays(i.POINTS,0,1),i.getError()===i.NO_ERROR))):!1}finally{i.disable(i.BLEND),n&&i.deleteProgram(n),e&&i.deleteShader(e),t&&i.deleteShader(t),r&&(i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(r)),o&&(i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(o))}},a}();s.WebGLContext=u},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Uint8DataEncoder=s.RGBAFloatDataEncoder=s.RedFloat32DataEncoder=void 0;var d=g(3),h=function(){function f(u,a){if(a===void 0&&(a=1),a===1)this.internalFormat=u.R32F,this.format=u.RED,this.textureType=u.FLOAT,this.channelSize=a;else{if(a!==4)throw new Error("Invalid number of channels: "+a);this.internalFormat=u.RGBA32F,this.format=u.RGBA,this.textureType=u.FLOAT,this.channelSize=a}}return f.prototype.encode=function(u,a){var o,r;return u.constructor!==Float32Array&&(d.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(u)),a*this.channelSize>u.length?(d.Logger.warning("Encoder","Source data too small. Allocating larger array"),r=u,o=this.allocate(a*this.channelSize),r.forEach(function(e,t){return o[t]=e})):o=r=u,o},f.prototype.allocate=function(u){return new Float32Array(4*u)},f.prototype.decode=function(u,a){return this.channelSize===1?u.filter(function(o,r){return r%4==0}).subarray(0,a):u.subarray(0,a)},f}();s.RedFloat32DataEncoder=h;var c=function(){function f(u,a,o){if(a===void 0&&(a=1),a!==1&&a!==4)throw new Error("Invalid number of channels: "+a);this.internalFormat=u.RGBA,this.format=u.RGBA,this.channelSize=a,this.textureType=o||u.FLOAT}return f.prototype.encode=function(u,a){var o=u;return this.channelSize===1&&(d.Logger.verbose("Encoder","Exploding into a larger array"),o=this.allocate(a),u.forEach(function(r,e){return o[4*e]=r})),o},f.prototype.allocate=function(u){return new Float32Array(4*u)},f.prototype.decode=function(u,a){return this.channelSize===1?u.filter(function(o,r){return r%4==0}).subarray(0,a):u.subarray(0,a)},f}();s.RGBAFloatDataEncoder=c;var p=function(){function f(u,a){if(a===void 0&&(a=1),this.channelSize=4,a===1)this.internalFormat=u.ALPHA,this.format=u.ALPHA,this.textureType=u.UNSIGNED_BYTE,this.channelSize=a;else{if(a!==4)throw new Error("Invalid number of channels: "+a);this.internalFormat=u.RGBA,this.format=u.RGBA,this.textureType=u.UNSIGNED_BYTE,this.channelSize=a}}return f.prototype.encode=function(u,a){return new Uint8Array(u.buffer,u.byteOffset,u.byteLength)},f.prototype.allocate=function(u){return new Uint8Array(u*this.channelSize)},f.prototype.decode=function(u,a){if(u instanceof Uint8Array)return u.subarray(0,a);throw new Error("Invalid array type: "+u.constructor)},f}();s.Uint8DataEncoder=p},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.envImpl=void 0;var d=g(25),h=function(){function c(){}return Object.defineProperty(c.prototype,"debug",{get:function(){return d.env.debug},set:function(p){d.env.debug=p},enumerable:!1,configurable:!0}),c}();s.envImpl=new h},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0})},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0})},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(f,u,a,o){o===void 0&&(o=a),Object.defineProperty(f,o,{enumerable:!0,get:function(){return u[a]}})}:function(f,u,a,o){o===void 0&&(o=a),f[o]=u[a]}),h=this&&this.__setModuleDefault||(Object.create?function(f,u){Object.defineProperty(f,"default",{enumerable:!0,value:u})}:function(f,u){f.default=u}),c=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var u={};if(f!=null)for(var a in f)a!=="default"&&Object.hasOwnProperty.call(f,a)&&d(u,f,a);return h(u,f),u};Object.defineProperty(s,"__esModule",{value:!0}),s.Tensor=void 0;var p=c(g(51));s.Tensor=p.Tensor},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(f,u,a,o){o===void 0&&(o=a),Object.defineProperty(f,o,{enumerable:!0,get:function(){return u[a]}})}:function(f,u,a,o){o===void 0&&(o=a),f[o]=u[a]}),h=this&&this.__setModuleDefault||(Object.create?function(f,u){Object.defineProperty(f,"default",{enumerable:!0,value:u})}:function(f,u){f.default=u}),c=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var u={};if(f!=null)for(var a in f)a!=="default"&&Object.hasOwnProperty.call(f,a)&&d(u,f,a);return h(u,f),u};Object.defineProperty(s,"__esModule",{value:!0}),s.InferenceSession=void 0;var p=c(g(173));s.InferenceSession=p.InferenceSession},function(v,s,g){var d=this&&this.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),h=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),c=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&d(e,r,t);return h(e,r),e},p=this&&this.__awaiter||function(r,e,t,n){return new(t||(t=Promise))(function(i,l){function m(b){try{_(n.next(b))}catch(w){l(w)}}function y(b){try{_(n.throw(b))}catch(w){l(w)}}function _(b){var w;b.done?i(b.value):(w=b.value,w instanceof t?w:new t(function(x){x(w)})).then(m,y)}_((n=n.apply(r,e||[])).next())})},f=this&&this.__generator||function(r,e){var t,n,i,l,m={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function y(_){return function(b){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;m;)try{if(t=1,n&&(i=2&w[0]?n.return:w[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,w[1])).done)return i;switch(n=0,i&&(w=[2&w[0],i.value]),w[0]){case 0:case 1:i=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,n=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(i=m.trys,!((i=i.length>0&&i[i.length-1])||w[0]!==6&&w[0]!==2)){m=0;continue}if(w[0]===3&&(!i||w[1]>i[0]&&w[1]<i[3])){m.label=w[1];break}if(w[0]===6&&m.label<i[1]){m.label=i[1],i=w;break}if(i&&m.label<i[2]){m.label=i[2],m.ops.push(w);break}i[2]&&m.ops.pop(),m.trys.pop();continue}w=e.call(r,m)}catch(x){w=[6,x],n=0}finally{t=i=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([_,b])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.InferenceSession=void 0;var u=g(174),a=c(g(52)),o=function(){function r(e){this.session=new u.Session(e)}return r.prototype.loadModel=function(e,t,n){if(typeof e=="string")return this.session.loadModel(e);if(typeof Blob<"u"&&e instanceof Blob){var i=URL.createObjectURL(e);return this.session.loadModel(i)}if(e instanceof ArrayBuffer)return this.session.loadModel(e,t,n);if(ArrayBuffer.isView(e))return this.session.loadModel(e);throw new Error("Model type is not supported.")},r.prototype.run=function(e,t){return p(this,void 0,void 0,function(){var n,i,l,m,y,_;return f(this,function(b){switch(b.label){case 0:return n=new Map,e instanceof Map?(i=new Map,e.forEach(function(w,x){i.set(x,w.internalTensor)}),[4,this.session.run(i)]):[3,2];case 1:return n=b.sent(),[3,5];case 2:return Array.isArray(e)?(l=[],e.forEach(function(w){l.push(w.internalTensor)}),[4,this.session.run(l)]):[3,4];case 3:return n=b.sent(),[3,5];case 4:for(y in m=new Map,e)m.set(y,e[y].internalTensor);b.label=5;case 5:return _=new Map,n.forEach(function(w,x){_.set(x,a.fromInternalTensor(w))}),[2,_]}})})},r.prototype.startProfiling=function(){this.session.startProfiling()},r.prototype.endProfiling=function(){this.session.endProfiling()},r}();s.InferenceSession=o},function(v,s,g){(function(d){var h=this&&this.__awaiter||function(t,n,i,l){return new(i||(i=Promise))(function(m,y){function _(x){try{w(l.next(x))}catch(S){y(S)}}function b(x){try{w(l.throw(x))}catch(S){y(S)}}function w(x){var S;x.done?m(x.value):(S=x.value,S instanceof i?S:new i(function(A){A(S)})).then(_,b)}w((l=l.apply(t,n||[])).next())})},c=this&&this.__generator||function(t,n){var i,l,m,y,_={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(x){return function(S){if(i)throw new TypeError("Generator is already executing.");for(;_;)try{if(i=1,l&&(m=2&S[0]?l.return:S[0]?l.throw||((m=l.return)&&m.call(l),0):l.next)&&!(m=m.call(l,S[1])).done)return m;switch(l=0,m&&(S=[2&S[0],m.value]),S[0]){case 0:case 1:m=S;break;case 4:return _.label++,{value:S[1],done:!1};case 5:_.label++,l=S[1],S=[0];continue;case 7:S=_.ops.pop(),_.trys.pop();continue;default:if(m=_.trys,!((m=m.length>0&&m[m.length-1])||S[0]!==6&&S[0]!==2)){_=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){_.label=S[1];break}if(S[0]===6&&_.label<m[1]){_.label=m[1],m=S;break}if(m&&_.label<m[2]){_.label=m[2],_.ops.push(S);break}m[2]&&_.ops.pop(),_.trys.pop();continue}S=n.call(t,_)}catch(A){S=[6,A],l=0}finally{i=m=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([w,x])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.Session=void 0;var p=g(48),f=g(175),u=g(178),a=g(179),o=g(3),r=g(180),e=function(){function t(n){n===void 0&&(n={}),this._initialized=!1,this.backendHint=n.backendHint,this.profiler=o.Profiler.create(n.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return t.prototype.startProfiling=function(){this.profiler.start()},t.prototype.endProfiling=function(){this.profiler.stop()},t.prototype.loadModel=function(n,i,l){return h(this,void 0,void 0,function(){var m=this;return c(this,function(y){switch(y.label){case 0:return[4,this.profiler.event("session","Session.loadModel",function(){return h(m,void 0,void 0,function(){var _,b,w;return c(this,function(x){switch(x.label){case 0:return[4,u.Backend(this.backendHint)];case 1:return _=x.sent(),this.sessionHandler=_.createSessionHandler(this.context),this._model=new r.Model,typeof n!="string"?[3,7]:typeof fetch<"u"?[3,3]:[4,f.promisify(p.readFile)(n)];case 2:return b=x.sent(),this.initialize(d.from(b)),[3,6];case 3:return[4,fetch(n)];case 4:return[4,x.sent().arrayBuffer()];case 5:b=x.sent(),this.initialize(d.from(b)),x.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(n)?this.initialize(d.from(n)):(w=new Uint8Array(n,i||0,l||n.byteLength),this.initialize(d.from(w))),x.label=8;case 8:return[2]}})})})];case 1:return y.sent(),[2]}})})},t.prototype.initialize=function(n){var i=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",function(){var l=i.sessionHandler.transformGraph?i.sessionHandler:void 0;i._model.load(n,l),i.sessionHandler.onGraphInitialized&&i.sessionHandler.onGraphInitialized(i._model.graph),i.initializeOps(i._model.graph),i._executionPlan=new a.ExecutionPlan(i._model.graph,i._ops,i.profiler)}),this._initialized=!0},t.prototype.run=function(n){var i=this;if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",function(){return h(i,void 0,void 0,function(){var l,m;return c(this,function(y){switch(y.label){case 0:return l=this.normalizeAndValidateInputs(n),[4,this._executionPlan.execute(this.sessionHandler,l)];case 1:return m=y.sent(),[2,this.createOutput(m)]}})})})},t.prototype.normalizeAndValidateInputs=function(n){var i=this._model.graph.getInputNames();if(Array.isArray(n)){if(n.length!==i.length)throw new Error("incorrect input array length: expected "+i.length+" but got "+n.length)}else{if(n.size!==i.length)throw new Error("incorrect input map size: expected "+i.length+" but got "+n.size);for(var l=new Array(n.size),m=0,y=0;y<i.length;++y){var _=n.get(i[y]);if(!_)throw new Error("missing input tensor for: '"+name+"'");l[m++]=_}n=l}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,n,!1);else{var b=this._model.graph.getInputIndices(),w=this._model.graph.getValues(),x=new Array(b.length);for(y=0;y<b.length;++y){var S=w[b[y]];x[y]=S.type.shape.dims,this.context.graphInputTypes.push(S.type.tensorType),this.context.graphInputDims.push(n[y].dims)}this.validateInputTensorDims(x,n,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,n),n},t.prototype.validateInputTensorTypes=function(n,i){for(var l=0;l<i.length;l++){var m=n[l],y=i[l].type;if(m!==y)throw new Error("input tensor["+l+"] check failed: expected type '"+m+"' but got "+y)}},t.prototype.validateInputTensorDims=function(n,i,l){for(var m=0;m<i.length;m++){var y=n[m],_=i[m].dims;if(!this.compareTensorDims(y,_,l))throw new Error("input tensor["+m+"] check failed: expected shape '["+y.join(",")+"]' but got ["+_.join(",")+"]")}},t.prototype.compareTensorDims=function(n,i,l){if(n.length!==i.length)return!1;for(var m=0;m<n.length;++m)if(n[m]!==i[m]&&(!l||n[m]!==0))return!1;return!0},t.prototype.createOutput=function(n){var i=this._model.graph.getOutputNames();if(n.length!==i.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var l=new Map,m=0;m<i.length;++m)l.set(i[m],n[m]);return l},t.prototype.initializeOps=function(n){var i=n.getNodes();this._ops=new Array(i.length);for(var l=0;l<i.length;l++)this._ops[l]=this.sessionHandler.resolve(i[l],this._model.opsets)},t}();s.Session=e}).call(this,g(12).Buffer)},function(v,s,g){(function(d){var h=Object.getOwnPropertyDescriptors||function(L){for(var B=Object.keys(L),V={},R=0;R<B.length;R++)V[B[R]]=Object.getOwnPropertyDescriptor(L,B[R]);return V},c=/%[sdj%]/g;s.format=function(L){if(!y(L)){for(var B=[],V=0;V<arguments.length;V++)B.push(u(arguments[V]));return B.join(" ")}V=1;for(var R=arguments,z=R.length,q=String(L).replace(c,function(oe){if(oe==="%%")return"%";if(V>=z)return oe;switch(oe){case"%s":return String(R[V++]);case"%d":return Number(R[V++]);case"%j":try{return JSON.stringify(R[V++])}catch{return"[Circular]"}default:return oe}}),Z=R[V];V<z;Z=R[++V])l(Z)||!w(Z)?q+=" "+Z:q+=" "+u(Z);return q},s.deprecate=function(L,B){if(d!==void 0&&d.noDeprecation===!0)return L;if(d===void 0)return function(){return s.deprecate(L,B).apply(this,arguments)};var V=!1;return function(){if(!V){if(d.throwDeprecation)throw new Error(B);d.traceDeprecation,V=!0}return L.apply(this,arguments)}};var p,f={};function u(L,B){var V={seen:[],stylize:o};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),i(B)?V.showHidden=B:B&&s._extend(V,B),_(V.showHidden)&&(V.showHidden=!1),_(V.depth)&&(V.depth=2),_(V.colors)&&(V.colors=!1),_(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=a),r(V,L,V.depth)}function a(L,B){var V=u.styles[B];return V?"\x1B["+u.colors[V][0]+"m"+L+"\x1B["+u.colors[V][1]+"m":L}function o(L,B){return L}function r(L,B,V){if(L.customInspect&&B&&A(B.inspect)&&B.inspect!==s.inspect&&(!B.constructor||B.constructor.prototype!==B)){var R=B.inspect(V,L);return y(R)||(R=r(L,R,V)),R}var z=function(O,D){if(_(D))return O.stylize("undefined","undefined");if(y(D)){var I="'"+JSON.stringify(D).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize(I,"string")}if(m(D))return O.stylize(""+D,"number");if(i(D))return O.stylize(""+D,"boolean");if(l(D))return O.stylize("null","null")}(L,B);if(z)return z;var q=Object.keys(B),Z=function(O){var D={};return O.forEach(function(I,U){D[I]=!0}),D}(q);if(L.showHidden&&(q=Object.getOwnPropertyNames(B)),S(B)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return e(B);if(q.length===0){if(A(B)){var oe=B.name?": "+B.name:"";return L.stylize("[Function"+oe+"]","special")}if(b(B))return L.stylize(RegExp.prototype.toString.call(B),"regexp");if(x(B))return L.stylize(Date.prototype.toString.call(B),"date");if(S(B))return e(B)}var ne,W="",K=!1,ae=["{","}"];return n(B)&&(K=!0,ae=["[","]"]),A(B)&&(W=" [Function"+(B.name?": "+B.name:"")+"]"),b(B)&&(W=" "+RegExp.prototype.toString.call(B)),x(B)&&(W=" "+Date.prototype.toUTCString.call(B)),S(B)&&(W=" "+e(B)),q.length!==0||K&&B.length!=0?V<0?b(B)?L.stylize(RegExp.prototype.toString.call(B),"regexp"):L.stylize("[Object]","special"):(L.seen.push(B),ne=K?function(O,D,I,U,C){for(var G=[],H=0,X=D.length;H<X;++H)j(D,String(H))?G.push(t(O,D,I,U,String(H),!0)):G.push("");return C.forEach(function(ie){ie.match(/^\d+$/)||G.push(t(O,D,I,U,ie,!0))}),G}(L,B,V,Z,q):q.map(function(O){return t(L,B,V,Z,O,K)}),L.seen.pop(),function(O,D,I){return O.reduce(function(U,C){return C.indexOf(`
`)>=0,U+C.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?I[0]+(D===""?"":D+`
 `)+" "+O.join(`,
  `)+" "+I[1]:I[0]+D+" "+O.join(", ")+" "+I[1]}(ne,W,ae)):ae[0]+W+ae[1]}function e(L){return"["+Error.prototype.toString.call(L)+"]"}function t(L,B,V,R,z,q){var Z,oe,ne;if((ne=Object.getOwnPropertyDescriptor(B,z)||{value:B[z]}).get?oe=ne.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):ne.set&&(oe=L.stylize("[Setter]","special")),j(R,z)||(Z="["+z+"]"),oe||(L.seen.indexOf(ne.value)<0?(oe=l(V)?r(L,ne.value,null):r(L,ne.value,V-1)).indexOf(`
`)>-1&&(oe=q?oe.split(`
`).map(function(W){return"  "+W}).join(`
`).substr(2):`
`+oe.split(`
`).map(function(W){return"   "+W}).join(`
`)):oe=L.stylize("[Circular]","special")),_(Z)){if(q&&z.match(/^\d+$/))return oe;(Z=JSON.stringify(""+z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=L.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=L.stylize(Z,"string"))}return Z+": "+oe}function n(L){return Array.isArray(L)}function i(L){return typeof L=="boolean"}function l(L){return L===null}function m(L){return typeof L=="number"}function y(L){return typeof L=="string"}function _(L){return L===void 0}function b(L){return w(L)&&T(L)==="[object RegExp]"}function w(L){return typeof L=="object"&&L!==null}function x(L){return w(L)&&T(L)==="[object Date]"}function S(L){return w(L)&&(T(L)==="[object Error]"||L instanceof Error)}function A(L){return typeof L=="function"}function T(L){return Object.prototype.toString.call(L)}function E(L){return L<10?"0"+L.toString(10):L.toString(10)}s.debuglog=function(L){if(_(p)&&(p=d.env.NODE_DEBUG||""),L=L.toUpperCase(),!f[L])if(new RegExp("\\b"+L+"\\b","i").test(p)){var B=d.pid;f[L]=function(){var V=s.format.apply(s,arguments)}}else f[L]=function(){};return f[L]},s.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=n,s.isBoolean=i,s.isNull=l,s.isNullOrUndefined=function(L){return L==null},s.isNumber=m,s.isString=y,s.isSymbol=function(L){return typeof L=="symbol"},s.isUndefined=_,s.isRegExp=b,s.isObject=w,s.isDate=x,s.isError=S,s.isFunction=A,s.isPrimitive=function(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||L===void 0},s.isBuffer=g(176);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var L=new Date,B=[E(L.getHours()),E(L.getMinutes()),E(L.getSeconds())].join(":");return[L.getDate(),N[L.getMonth()],B].join(" ")}function j(L,B){return Object.prototype.hasOwnProperty.call(L,B)}s.log=function(){},s.inherits=g(177),s._extend=function(L,B){if(!B||!w(B))return L;for(var V=Object.keys(B),R=V.length;R--;)L[V[R]]=B[V[R]];return L};var k=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function F(L,B){if(!L){var V=new Error("Promise was rejected with a falsy value");V.reason=L,L=V}return B(L)}s.promisify=function(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');if(k&&L[k]){var B;if(typeof(B=L[k])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(B,k,{value:B,enumerable:!1,writable:!1,configurable:!0}),B}function B(){for(var V,R,z=new Promise(function(oe,ne){V=oe,R=ne}),q=[],Z=0;Z<arguments.length;Z++)q.push(arguments[Z]);q.push(function(oe,ne){oe?R(oe):V(ne)});try{L.apply(this,q)}catch(oe){R(oe)}return z}return Object.setPrototypeOf(B,Object.getPrototypeOf(L)),k&&Object.defineProperty(B,k,{value:B,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(B,h(L))},s.promisify.custom=k,s.callbackify=function(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function B(){for(var V=[],R=0;R<arguments.length;R++)V.push(arguments[R]);var z=V.pop();if(typeof z!="function")throw new TypeError("The last argument must be of type Function");var q=this,Z=function(){return z.apply(q,arguments)};L.apply(this,V).then(function(oe){d.nextTick(Z,null,oe)},function(oe){d.nextTick(F,oe,Z)})}return Object.setPrototypeOf(B,Object.getPrototypeOf(L)),Object.defineProperties(B,h(L)),B}}).call(this,g(24))},function(v,s){v.exports=function(g){return g&&typeof g=="object"&&typeof g.copy=="function"&&typeof g.fill=="function"&&typeof g.readUInt8=="function"}},function(v,s){typeof Object.create=="function"?v.exports=function(g,d){g.super_=d,g.prototype=Object.create(d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:v.exports=function(g,d){g.super_=d;var h=function(){};h.prototype=d.prototype,g.prototype=new h,g.prototype.constructor=g}},function(v,s,g){var d=this&&this.__awaiter||function(u,a,o,r){return new(o||(o=Promise))(function(e,t){function n(m){try{l(r.next(m))}catch(y){t(y)}}function i(m){try{l(r.throw(m))}catch(y){t(y)}}function l(m){var y;m.done?e(m.value):(y=m.value,y instanceof o?y:new o(function(_){_(y)})).then(n,i)}l((r=r.apply(u,a||[])).next())})},h=this&&this.__generator||function(u,a){var o,r,e,t,n={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return t={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function i(l){return function(m){return function(y){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,r&&(e=2&y[0]?r.return:y[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,y[1])).done)return e;switch(r=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,r=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!((e=e.length>0&&e[e.length-1])||y[0]!==6&&y[0]!==2)){n=0;continue}if(y[0]===3&&(!e||y[1]>e[0]&&y[1]<e[3])){n.label=y[1];break}if(y[0]===6&&n.label<e[1]){n.label=e[1],e=y;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(y);break}e[2]&&n.ops.pop(),n.trys.pop();continue}y=a.call(u,n)}catch(_){y=[6,_],r=0}finally{o=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([l,m])}}},c=this&&this.__values||function(u){var a=typeof Symbol=="function"&&Symbol.iterator,o=a&&u[a],r=0;if(o)return o.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&r>=u.length&&(u=void 0),{value:u&&u[r++],done:!u}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.Backend=void 0;var p=new Map;function f(u){return d(this,void 0,void 0,function(){var a,o,r;return h(this,function(e){switch(e.label){case 0:return(a=onnx.backend)[u]!==void 0&&function(t){var n=t;return"initialize"in n&&typeof n.initialize=="function"&&"createSessionHandler"in n&&typeof n.createSessionHandler=="function"&&"dispose"in n&&typeof n.dispose=="function"}(a[u])?a[u].disabled?[3,3]:(o=a[u],typeof(r=o.initialize())=="object"&&"then"in r?[4,r]:[3,2]):[3,3];case 1:r=e.sent(),e.label=2;case 2:if(r)return p.set(u,o),[2,o];e.label=3;case 3:return[2,void 0]}})})}s.Backend=function u(a){return d(this,void 0,void 0,function(){var o,r,e,t,n,i,l,m,y;return h(this,function(_){switch(_.label){case 0:return a?[3,1]:[2,u(["webgl","wasm","cpu"])];case 1:o=typeof a=="string"?[a]:a,_.label=2;case 2:_.trys.push([2,7,8,9]),r=c(o),e=r.next(),_.label=3;case 3:return e.done?[3,6]:(t=e.value,(n=p.get(t))?[2,n]:[4,f(t)]);case 4:if(i=_.sent())return[2,i];_.label=5;case 5:return e=r.next(),[3,3];case 6:return[3,9];case 7:return l=_.sent(),m={error:l},[3,9];case 8:try{e&&!e.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}return[7];case 9:throw new Error("no available backend to use")}})})}},function(v,s,g){var d=this&&this.__awaiter||function(r,e,t,n){return new(t||(t=Promise))(function(i,l){function m(b){try{_(n.next(b))}catch(w){l(w)}}function y(b){try{_(n.throw(b))}catch(w){l(w)}}function _(b){var w;b.done?i(b.value):(w=b.value,w instanceof t?w:new t(function(x){x(w)})).then(m,y)}_((n=n.apply(r,e||[])).next())})},h=this&&this.__generator||function(r,e){var t,n,i,l,m={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function y(_){return function(b){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;m;)try{if(t=1,n&&(i=2&w[0]?n.return:w[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,w[1])).done)return i;switch(n=0,i&&(w=[2&w[0],i.value]),w[0]){case 0:case 1:i=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,n=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(i=m.trys,!((i=i.length>0&&i[i.length-1])||w[0]!==6&&w[0]!==2)){m=0;continue}if(w[0]===3&&(!i||w[1]>i[0]&&w[1]<i[3])){m.label=w[1];break}if(w[0]===6&&m.label<i[1]){m.label=i[1],i=w;break}if(i&&m.label<i[2]){m.label=i[2],m.ops.push(w);break}i[2]&&m.ops.pop(),m.trys.pop();continue}w=e.call(r,m)}catch(x){w=[6,x],n=0}finally{t=i=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([_,b])}}},c=this&&this.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n,i,l=t.call(r),m=[];try{for(;(e===void 0||e-- >0)&&!(n=l.next()).done;)m.push(n.value)}catch(y){i={error:y}}finally{try{n&&!n.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return m},f=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(p(arguments[e]));return r};Object.defineProperty(s,"__esModule",{value:!0}),s.ExecutionPlan=void 0;var u=g(3),a=function(r,e){this.op=r,this.node=e},o=function(){function r(e,t,n){this.graph=e,this.profiler=n,this.initialize(t)}return r.prototype.initialize=function(e){var t=this;this.profiler.event("session","ExecutionPlan.initialize",function(){var n=t.graph.getNodes();if(n.length!==e.length)throw new Error("The size of nodes and OPs do not match.");t._ops=e.map(function(i,l){return new a(i,n[l])}),t.reset(),t._starter=[],t._ops.forEach(function(i,l){var m,y,_=!0;try{for(var b=c(i.node.inputs),w=b.next();!w.done;w=b.next()){var x=w.value;if(!t._values[x]&&t.graph.getInputIndices().indexOf(x)===-1){_=!1;break}}}catch(S){m={error:S}}finally{try{w&&!w.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}_&&t._starter.push(l)})})},r.prototype.reset=function(){this._values=this.graph.getValues().map(function(e){return e.tensor})},r.prototype.execute=function(e,t){var n=this;return this.profiler.event("session","ExecutionPlan.execute",function(){return d(n,void 0,void 0,function(){var i,l,m,y,_,b,w,x,S,A=this;return h(this,function(T){switch(T.label){case 0:if(this.reset(),i=e.createInferenceHandler(),l=this.graph.getInputIndices(),t.length!==l.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: "+t.length+" expected: "+l.length);t.forEach(function(E,N){var M=l[N];A._values[M]=E}),m=this._starter.slice(0),y=this.graph.getValues(),_=this.graph.getNodes(),b=0,w=function(){var E,N,M,j,k,F;return h(this,function(L){switch(L.label){case 0:if(E=m[b++],N=x._ops[E],(M=N.node.inputs.map(function(B){return A._values[B]})).indexOf(void 0)!==-1)throw new Error("unresolved input detected: op: "+N.node);return j=M,u.Logger.verbose("ExecPlan","Runing op:"+N.node.name+" ("+j.map(function(B,V){return"'"+N.node.inputs[V]+"': "+B.type+"["+B.dims.join(",")+"]"}).join(", ")+")"),[4,x.profiler.event("node",N.node.name,function(){return d(A,void 0,void 0,function(){var B;return h(this,function(V){if(!(B=N.op).checkInputs(j))throw new Error("invalid inputs detected; op: "+N.node.name);return[2,B.run(i,j)]})})})];case 1:if((k=L.sent()).length!==N.node.outputs.length)throw new Error("the size of output does not match model definition.");return k.forEach(function(B,V){var R=N.node.outputs[V];if(A._values[R])throw new Error("output ["+R+"] already has value: op:"+N.node.name);A._values[R]=B}),F=new Set,k.forEach(function(B,V){var R,z,q,Z,oe=N.node.outputs[V];try{for(var ne=(R=void 0,c(y[oe].to)),W=ne.next();!W.done;W=ne.next()){var K=W.value,ae=_[K],O=!0;try{for(var D=(q=void 0,c(ae.inputs)),I=D.next();!I.done;I=D.next()){var U=I.value;if(!A._values[U]){O=!1;break}}}catch(C){q={error:C}}finally{try{I&&!I.done&&(Z=D.return)&&Z.call(D)}finally{if(q)throw q.error}}O&&F.add(K)}}catch(C){R={error:C}}finally{try{W&&!W.done&&(z=ne.return)&&z.call(ne)}finally{if(R)throw R.error}}}),m.push.apply(m,f(F)),[2]}})},x=this,T.label=1;case 1:return b<m.length?[5,w()]:[3,3];case 2:return T.sent(),[3,1];case 3:return S=[],this.graph.getOutputIndices().forEach(function(E,N){var M=A._values[E];if(M===void 0)throw new Error("required output ["+E+"] does not have value");M.data,S.push(M)}),u.Logger.verbose("ExecPlan","disposing of inferenceHandler"),i.dispose(),[2,S]}})})})},r}();s.ExecutionPlan=o},function(v,s,g){Object.defineProperty(s,"__esModule",{value:!0}),s.Model=void 0;var d=g(9),h=g(181),c=g(0),p=function(){function f(){}return f.prototype.load=function(u,a){var o=d.onnx.ModelProto.decode(u);if(c.LongUtil.longToNumber(o.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=o.opsetImport.map(function(r){return{domain:r.domain,version:c.LongUtil.longToNumber(r.version)}}),this._graph=h.Graph.from(o.graph,a)},Object.defineProperty(f.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),f}();s.Model=p},function(v,s,g){var d=this&&this.__values||function(o){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&o[r],t=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(s,"__esModule",{value:!0}),s.Graph=void 0;var h=g(182),c=g(1),p=g(0);s.Graph={from:function(o,r){return new a(o,r)}};var f=function(){function o(r){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,r&&(this.type=p.ProtoUtil.tensorValueTypeFromProto(r.type.tensorType))}return Object.defineProperty(o.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),o}(),u=function(o){this.name=o.name,this.opType=o.opType,this.inputs=[],this.outputs=[],this.attributes=new h.Attribute(o.attribute),this.executeNode=!0},a=function(){function o(r,e){if(!r)throw new TypeError("graph is empty");this.buildGraph(r),this.transformGraph(e),this.checkIsAcyclic()}return o.prototype.getInputIndices=function(){return this._allInputIndices},o.prototype.getInputNames=function(){return this._allInputNames},o.prototype.getOutputIndices=function(){return this._allOutputIndices},o.prototype.getOutputNames=function(){return this._allOutputNames},o.prototype.getValues=function(){return this._allData},o.prototype.getNodes=function(){return this._nodes},o.prototype.buildGraph=function(r){var e,t,n,i,l,m,y,_,b,w,x,S,A=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var T=new Map;if(!r.input)throw new Error("missing information in graph: input");var E=[];try{for(var N=d(r.input),M=N.next();!M.done;M=N.next()){var j=M.value;if(A.has(j.name))throw new Error("duplicated input name: "+j.name);var k=this._allData.push(new f(j))-1;A.set(j.name,k),E.push(j.name)}}catch(H){e={error:H}}finally{try{M&&!M.done&&(t=N.return)&&t.call(N)}finally{if(e)throw e.error}}if(!r.initializer)throw new Error("missing information in graph: initializer");try{for(var F=d(r.initializer),L=F.next();!L.done;L=F.next()){j=L.value;var B=A.get(j.name);if(B===void 0){var V=new f;V.type={shape:{dims:p.ProtoUtil.tensorDimsFromProto(j.dims)},tensorType:p.ProtoUtil.tensorDataTypeFromProto(j.dataType)},B=this._allData.push(V)-1,A.set(j.name,B)}this._allData[B]._from=-1,this._allData[B].tensor=c.Tensor.fromProto(j)}}catch(H){n={error:H}}finally{try{L&&!L.done&&(i=F.return)&&i.call(F)}finally{if(n)throw n.error}}for(j=0;j<this._allData.length;j++)this._allData[j].tensor||(this._allInputIndices.push(j),this._allInputNames.push(E[j]));if(!r.output)throw new Error("missing information in graph: output");try{for(var R=d(r.output),z=R.next();!z.done;z=R.next()){if(j=z.value,A.has(j.name))throw new Error("duplicated output name: "+j.name);k=this._allData.push(new f(j))-1,A.set(j.name,k),this._allOutputIndices.push(k),this._allOutputNames.push(j.name)}}catch(H){l={error:H}}finally{try{z&&!z.done&&(m=R.return)&&m.call(R)}finally{if(l)throw l.error}}if(!r.node)throw new Error("missing information in graph: node");try{for(var q=d(r.node),Z=q.next();!Z.done;Z=q.next()){if(!(D=Z.value).name)for(var oe=0;;oe++){var ne="unnamed_"+D.opType+"_"+oe;if(!T.has(ne)){D.name=ne;break}}if(T.has(D.name))throw new Error("duplicated node name: "+D.name);k=this._nodes.push(new u(D))-1,T.set(D.name,k)}}catch(H){y={error:H}}finally{try{Z&&!Z.done&&(_=q.return)&&_.call(q)}finally{if(y)throw y.error}}for(j=0;j<this._nodes.length;j++){var W=this._nodes[j];if(!(D=r.node[j]).output)throw new Error("missing output for node: "+D.name);try{for(var K=(b=void 0,d(D.output)),ae=K.next();!ae.done;ae=K.next()){var O=ae.value;if((C=A.get(O))===void 0&&(C=this._allData.push(new f)-1,A.set(O,C)),W.outputs.push(C),this._allData[C]._from!==void 0)throw new Error("multiple nodes output to one data value: "+C);if(this._allData[C]._from=j,D.opType==="Constant"){if(!D.attribute||D.attribute.length!==1||!D.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!D.output||D.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");W.outputs.pop(),W.executeNode=!1,this._allData[C]._from=-1,this._allData[C].tensor=c.Tensor.fromProto(D.attribute[0].t)}}}catch(H){b={error:H}}finally{try{ae&&!ae.done&&(w=K.return)&&w.call(K)}finally{if(b)throw b.error}}}for(j=0;j<this._nodes.length;j++){var D;if(W=this._nodes[j],!(D=r.node[j]).input)throw new Error("missing input for node: "+D.name);try{for(var I=(x=void 0,d(D.input)),U=I.next();!U.done;U=I.next()){var C,G=U.value;if((C=A.get(G))===void 0)throw new Error("unrecognized input '"+G+"' for node: "+D.name);W.inputs.push(C),this._allData[C]._to.push(j)}}catch(H){x={error:H}}finally{try{U&&!U.done&&(S=I.return)&&S.call(I)}finally{if(x)throw x.error}}}return!0},o.prototype.checkIsAcyclic=function(){var r=this,e=new Set;this._allInputIndices.forEach(function(m){r._allData[m]._to.forEach(function(y){e.add(y)})});for(var t=Array.from(e),n=new Array(this._nodes.length).fill("white"),i=function(){var m=t.pop();n[m]==="gray"?n[m]="black":(t.push(m),n[m]="gray",l._nodes[m].outputs.forEach(function(y){var _=r._allData[y];if(_.tensor!==void 0)throw new Error("node outputs should not be initialized");if(_._from!==m)throw new Error("from property of the Value object doesn't match index of Node being processed");_._to.forEach(function(b){if(n[b]==="gray")throw new Error("model graph is cyclic");n[b]==="white"&&t.push(b)})}))},l=this;t.length>0;)i()},o.prototype.transformGraph=function(r){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),r&&r.transformGraph(this),this.finalizeGraph()},o.prototype.finalizeGraph=function(){for(var r,e=this,t=0,n=function(b){if(!i._nodes[b].executeNode)return t++,i._nodes[b].outputs.forEach(function(w){e._allData[w]._from=-2}),i._nodes.splice(b,1),b--,r=b,"continue";t>0&&(i._nodes[b].inputs.forEach(function(w){var x=e._allData[w]._to.indexOf(b+t);x!==-1&&(e._allData[w]._to[x]=b)}),i._nodes[b].outputs.forEach(function(w){e._allData[w]._from&&e._allData[w]._from===b+t&&(e._allData[w]._from=b)})),r=b},i=this,l=0;l<this._nodes.length;l++)n(l),l=r;t=0;var m,y=function(b){if(_._allData[b].from===-2&&_._allOutputIndices.indexOf(b+t)===-1)return t++,_._allData.splice(b,1),b--,m=b,"continue";if(t>0){var w=-1;_._allData[b].from!==void 0&&_._allData[b].from!==-1?(w=_._nodes[_._allData[b].from].outputs.indexOf(b+t))!==-1&&(_._nodes[_._allData[b].from].outputs[w]=b):(w=_._allInputIndices.indexOf(b+t))!==-1&&(_._allInputIndices[w]=b),_._allData[b].to.forEach(function(x){(w=e._nodes[x].inputs.indexOf(b+t))!==-1&&(e._nodes[x].inputs[w]=b)}),_._allData[b].to.length===0&&(w=_._allOutputIndices.indexOf(b+t))!==-1&&(_._allOutputIndices[w]=b)}m=b},_=this;for(l=0;l<this._allData.length;l++)y(l),l=m},o.prototype.deleteNode=function(r){var e,t,n=this._nodes[r];if(n.inputs.length>1)throw new Error("Node deletion with multiple inputs is not supported. ");if(n.outputs.length>1){for(var i=1;i<n.outputs.length;i++)if(this._allData[n.outputs[i]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}n.executeNode=!1;var l=n.inputs[0],m=n.outputs[0],y=this._allData[m].to,_=this._allData[l].to.indexOf(r);if(_===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[l].to.splice(_,1),this._allData[m]._to=[];var b=this._allOutputIndices.indexOf(m);if(b!==-1&&(this._allOutputIndices[b]=l),y&&y.length>0)try{for(var w=d(y),x=w.next();!x.done;x=w.next()){var S=x.value,A=this._nodes[S].inputs.indexOf(m);if(A===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[S].inputs[A]=l,this._allData[l].to.push(S)}}catch(T){e={error:T}}finally{try{x&&!x.done&&(t=w.return)&&t.call(w)}finally{if(e)throw e.error}}},o.prototype.removeAllDropoutNodes=function(){var r,e,t=0;try{for(var n=d(this._nodes),i=n.next();!i.done;i=n.next()){var l=i.value;if(l.opType==="Dropout"){if(l.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(l.outputs.length!==1&&l.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(l.outputs.length===2&&this._allData[l.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}catch(m){r={error:m}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}},o.prototype.removeAllIdentityNodes=function(){var r,e,t=0;try{for(var n=d(this._nodes),i=n.next();!i.done;i=n.next())i.value.opType==="Identity"&&this.deleteNode(t),t++}catch(l){r={error:l}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}},o}()},function(v,s,g){(function(d){var h=this&&this.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0}),s.Attribute=void 0;var p=c(g(13)),f=g(9),u=g(1),a=g(0),o=function(){function r(e){var t,n;if(this._attributes=new Map,e!=null){try{for(var i=h(e),l=i.next();!l.done;l=i.next()){var m=l.value;this._attributes.set(m.name,[r.getValue(m),r.getType(m)])}}catch(y){t={error:y}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}return r.prototype.set=function(e,t,n){this._attributes.set(e,[n,t])},r.prototype.delete=function(e){this._attributes.delete(e)},r.prototype.getFloat=function(e,t){return this.get(e,"float",t)},r.prototype.getInt=function(e,t){return this.get(e,"int",t)},r.prototype.getString=function(e,t){return this.get(e,"string",t)},r.prototype.getTensor=function(e,t){return this.get(e,"tensor",t)},r.prototype.getFloats=function(e,t){return this.get(e,"floats",t)},r.prototype.getInts=function(e,t){return this.get(e,"ints",t)},r.prototype.getStrings=function(e,t){return this.get(e,"strings",t)},r.prototype.getTensors=function(e,t){return this.get(e,"tensors",t)},r.prototype.get=function(e,t,n){var i=this._attributes.get(e);if(i===void 0){if(n!==void 0)return n;throw new Error("required attribute not found: "+e)}if(i[1]!==t)throw new Error("type mismatch: expected "+t+" but got "+i[1]);return i[0]},r.getType=function(e){switch(e.type){case f.onnx.AttributeProto.AttributeType.FLOAT:return"float";case f.onnx.AttributeProto.AttributeType.INT:return"int";case f.onnx.AttributeProto.AttributeType.STRING:return"string";case f.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case f.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case f.onnx.AttributeProto.AttributeType.INTS:return"ints";case f.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case f.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: "+f.onnx.AttributeProto.AttributeType[e.type])}},r.getValue=function(e){if(e.type===f.onnx.AttributeProto.AttributeType.GRAPH||e.type===f.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var t=this.getValueNoCheck(e);if(e.type===f.onnx.AttributeProto.AttributeType.INT&&p.default.isLong(t))return t.toNumber();if(e.type===f.onnx.AttributeProto.AttributeType.INTS){for(var n=t,i=new Array(n.length),l=0;l<n.length;l++){var m=n[l];i[l]=a.LongUtil.longToNumber(m)}return i}if(e.type===f.onnx.AttributeProto.AttributeType.TENSOR)return u.Tensor.fromProto(t);if(e.type===f.onnx.AttributeProto.AttributeType.TENSORS)return t.map(function(_){return u.Tensor.fromProto(_)});if(e.type===f.onnx.AttributeProto.AttributeType.STRING){var y=t;return d.from(y.buffer,y.byteOffset,y.byteLength).toString()}return e.type===f.onnx.AttributeProto.AttributeType.STRINGS?t.map(function(_){return d.from(_.buffer,_.byteOffset,_.byteLength).toString()}):t},r.getValueNoCheck=function(e){switch(e.type){case f.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case f.onnx.AttributeProto.AttributeType.INT:return e.i;case f.onnx.AttributeProto.AttributeType.STRING:return e.s;case f.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case f.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case f.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case f.onnx.AttributeProto.AttributeType.INTS:return e.ints;case f.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case f.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case f.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error("unsupported attribute type: "+f.onnx.AttributeProto.AttributeType[e.type])}},r}();s.Attribute=o}).call(this,g(12).Buffer)}])})})(onnx_min);var onnx_minExports=onnx_min.exports;/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ticket=createLucideIcon("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={toStringTag:tag};P.absoluteValue=P.abs=function(){var v=new this.constructor(this);return v.s<0&&(v.s=1),finalise(v)};P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(v,s){var g,d=this,h=d.constructor;if(v=new h(v),s=new h(s),!v.s||!s.s)return new h(NaN);if(v.gt(s))throw Error(invalidArgument+s);return g=d.cmp(v),g<0?v:d.cmp(s)>0?s:new h(d)};P.comparedTo=P.cmp=function(v){var s,g,d,h,c=this,p=c.d,f=(v=new c.constructor(v)).d,u=c.s,a=v.s;if(!p||!f)return!u||!a?NaN:u!==a?u:p===f?0:!p^u<0?1:-1;if(!p[0]||!f[0])return p[0]?u:f[0]?-a:0;if(u!==a)return u;if(c.e!==v.e)return c.e>v.e^u<0?1:-1;for(d=p.length,h=f.length,s=0,g=d<h?d:h;s<g;++s)if(p[s]!==f[s])return p[s]>f[s]^u<0?1:-1;return d===h?0:d>h^u<0?1:-1};P.cosine=P.cos=function(){var v,s,g=this,d=g.constructor;return g.d?g.d[0]?(v=d.precision,s=d.rounding,d.precision=v+Math.max(g.e,g.sd())+LOG_BASE,d.rounding=1,g=cosine(d,toLessThanHalfPi(d,g)),d.precision=v,d.rounding=s,finalise(quadrant==2||quadrant==3?g.neg():g,v,s,!0)):new d(1):new d(NaN)};P.cubeRoot=P.cbrt=function(){var v,s,g,d,h,c,p,f,u,a,o=this,r=o.constructor;if(!o.isFinite()||o.isZero())return new r(o);for(external=!1,c=o.s*mathpow(o.s*o,1/3),!c||Math.abs(c)==1/0?(g=digitsToString(o.d),v=o.e,(c=(v-g.length+1)%3)&&(g+=c==1||c==-2?"0":"00"),c=mathpow(g,1/3),v=mathfloor((v+1)/3)-(v%3==(v<0?-1:2)),c==1/0?g="5e"+v:(g=c.toExponential(),g=g.slice(0,g.indexOf("e")+1)+v),d=new r(g),d.s=o.s):d=new r(c.toString()),p=(v=r.precision)+3;;)if(f=d,u=f.times(f).times(f),a=u.plus(o),d=divide(a.plus(o).times(f),a.plus(u),p+2,1),digitsToString(f.d).slice(0,p)===(g=digitsToString(d.d)).slice(0,p))if(g=g.slice(p-3,p+1),g=="9999"||!h&&g=="4999"){if(!h&&(finalise(f,v+1,0),f.times(f).times(f).eq(o))){d=f;break}p+=4,h=1}else{(!+g||!+g.slice(1)&&g.charAt(0)=="5")&&(finalise(d,v+1,1),s=!d.times(d).times(d).eq(o));break}return external=!0,finalise(d,v,r.rounding,s)};P.decimalPlaces=P.dp=function(){var v,s=this.d,g=NaN;if(s){if(v=s.length-1,g=(v-mathfloor(this.e/LOG_BASE))*LOG_BASE,v=s[v],v)for(;v%10==0;v/=10)g--;g<0&&(g=0)}return g};P.dividedBy=P.div=function(v){return divide(this,new this.constructor(v))};P.dividedToIntegerBy=P.divToInt=function(v){var s=this,g=s.constructor;return finalise(divide(s,new g(v),0,1,1),g.precision,g.rounding)};P.equals=P.eq=function(v){return this.cmp(v)===0};P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(v){return this.cmp(v)>0};P.greaterThanOrEqualTo=P.gte=function(v){var s=this.cmp(v);return s==1||s===0};P.hyperbolicCosine=P.cosh=function(){var v,s,g,d,h,c=this,p=c.constructor,f=new p(1);if(!c.isFinite())return new p(c.s?1/0:NaN);if(c.isZero())return f;g=p.precision,d=p.rounding,p.precision=g+Math.max(c.e,c.sd())+4,p.rounding=1,h=c.d.length,h<32?(v=Math.ceil(h/3),s=(1/tinyPow(4,v)).toString()):(v=16,s="2.3283064365386962890625e-10"),c=taylorSeries(p,1,c.times(s),new p(1),!0);for(var u,a=v,o=new p(8);a--;)u=c.times(c),c=f.minus(u.times(o.minus(u.times(o))));return finalise(c,p.precision=g,p.rounding=d,!0)};P.hyperbolicSine=P.sinh=function(){var v,s,g,d,h=this,c=h.constructor;if(!h.isFinite()||h.isZero())return new c(h);if(s=c.precision,g=c.rounding,c.precision=s+Math.max(h.e,h.sd())+4,c.rounding=1,d=h.d.length,d<3)h=taylorSeries(c,2,h,h,!0);else{v=1.4*Math.sqrt(d),v=v>16?16:v|0,h=h.times(1/tinyPow(5,v)),h=taylorSeries(c,2,h,h,!0);for(var p,f=new c(5),u=new c(16),a=new c(20);v--;)p=h.times(h),h=h.times(f.plus(p.times(u.times(p).plus(a))))}return c.precision=s,c.rounding=g,finalise(h,s,g,!0)};P.hyperbolicTangent=P.tanh=function(){var v,s,g=this,d=g.constructor;return g.isFinite()?g.isZero()?new d(g):(v=d.precision,s=d.rounding,d.precision=v+7,d.rounding=1,divide(g.sinh(),g.cosh(),d.precision=v,d.rounding=s)):new d(g.s)};P.inverseCosine=P.acos=function(){var v=this,s=v.constructor,g=v.abs().cmp(1),d=s.precision,h=s.rounding;return g!==-1?g===0?v.isNeg()?getPi(s,d,h):new s(0):new s(NaN):v.isZero()?getPi(s,d+4,h).times(.5):(s.precision=d+6,s.rounding=1,v=new s(1).minus(v).div(v.plus(1)).sqrt().atan(),s.precision=d,s.rounding=h,v.times(2))};P.inverseHyperbolicCosine=P.acosh=function(){var v,s,g=this,d=g.constructor;return g.lte(1)?new d(g.eq(1)?0:NaN):g.isFinite()?(v=d.precision,s=d.rounding,d.precision=v+Math.max(Math.abs(g.e),g.sd())+4,d.rounding=1,external=!1,g=g.times(g).minus(1).sqrt().plus(g),external=!0,d.precision=v,d.rounding=s,g.ln()):new d(g)};P.inverseHyperbolicSine=P.asinh=function(){var v,s,g=this,d=g.constructor;return!g.isFinite()||g.isZero()?new d(g):(v=d.precision,s=d.rounding,d.precision=v+2*Math.max(Math.abs(g.e),g.sd())+6,d.rounding=1,external=!1,g=g.times(g).plus(1).sqrt().plus(g),external=!0,d.precision=v,d.rounding=s,g.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var v,s,g,d,h=this,c=h.constructor;return h.isFinite()?h.e>=0?new c(h.abs().eq(1)?h.s/0:h.isZero()?h:NaN):(v=c.precision,s=c.rounding,d=h.sd(),Math.max(d,v)<2*-h.e-1?finalise(new c(h),v,s,!0):(c.precision=g=d-h.e,h=divide(h.plus(1),new c(1).minus(h),g+v,1),c.precision=v+4,c.rounding=1,h=h.ln(),c.precision=v,c.rounding=s,h.times(.5))):new c(NaN)};P.inverseSine=P.asin=function(){var v,s,g,d,h=this,c=h.constructor;return h.isZero()?new c(h):(s=h.abs().cmp(1),g=c.precision,d=c.rounding,s!==-1?s===0?(v=getPi(c,g+4,d).times(.5),v.s=h.s,v):new c(NaN):(c.precision=g+6,c.rounding=1,h=h.div(new c(1).minus(h.times(h)).sqrt().plus(1)).atan(),c.precision=g,c.rounding=d,h.times(2)))};P.inverseTangent=P.atan=function(){var v,s,g,d,h,c,p,f,u,a=this,o=a.constructor,r=o.precision,e=o.rounding;if(a.isFinite()){if(a.isZero())return new o(a);if(a.abs().eq(1)&&r+4<=PI_PRECISION)return p=getPi(o,r+4,e).times(.25),p.s=a.s,p}else{if(!a.s)return new o(NaN);if(r+4<=PI_PRECISION)return p=getPi(o,r+4,e).times(.5),p.s=a.s,p}for(o.precision=f=r+10,o.rounding=1,g=Math.min(28,f/LOG_BASE+2|0),v=g;v;--v)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(external=!1,s=Math.ceil(f/LOG_BASE),d=1,u=a.times(a),p=new o(a),h=a;v!==-1;)if(h=h.times(u),c=p.minus(h.div(d+=2)),h=h.times(u),p=c.plus(h.div(d+=2)),p.d[s]!==void 0)for(v=s;p.d[v]===c.d[v]&&v--;);return g&&(p=p.times(2<<g-1)),external=!0,finalise(p,o.precision=r,o.rounding=e,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(v){return this.cmp(v)<0};P.lessThanOrEqualTo=P.lte=function(v){return this.cmp(v)<1};P.logarithm=P.log=function(v){var s,g,d,h,c,p,f,u,a=this,o=a.constructor,r=o.precision,e=o.rounding,t=5;if(v==null)v=new o(10),s=!0;else{if(v=new o(v),g=v.d,v.s<0||!g||!g[0]||v.eq(1))return new o(NaN);s=v.eq(10)}if(g=a.d,a.s<0||!g||!g[0]||a.eq(1))return new o(g&&!g[0]?-1/0:a.s!=1?NaN:g?0:1/0);if(s)if(g.length>1)c=!0;else{for(h=g[0];h%10===0;)h/=10;c=h!==1}if(external=!1,f=r+t,p=naturalLogarithm(a,f),d=s?getLn10(o,f+10):naturalLogarithm(v,f),u=divide(p,d,f,1),checkRoundingDigits(u.d,h=r,e))do if(f+=10,p=naturalLogarithm(a,f),d=s?getLn10(o,f+10):naturalLogarithm(v,f),u=divide(p,d,f,1),!c){+digitsToString(u.d).slice(h+1,h+15)+1==1e14&&(u=finalise(u,r+1,0));break}while(checkRoundingDigits(u.d,h+=10,e));return external=!0,finalise(u,r,e)};P.minus=P.sub=function(v){var s,g,d,h,c,p,f,u,a,o,r,e,t=this,n=t.constructor;if(v=new n(v),!t.d||!v.d)return!t.s||!v.s?v=new n(NaN):t.d?v.s=-v.s:v=new n(v.d||t.s!==v.s?t:NaN),v;if(t.s!=v.s)return v.s=-v.s,t.plus(v);if(a=t.d,e=v.d,f=n.precision,u=n.rounding,!a[0]||!e[0]){if(e[0])v.s=-v.s;else if(a[0])v=new n(t);else return new n(u===3?-0:0);return external?finalise(v,f,u):v}if(g=mathfloor(v.e/LOG_BASE),o=mathfloor(t.e/LOG_BASE),a=a.slice(),c=o-g,c){for(r=c<0,r?(s=a,c=-c,p=e.length):(s=e,g=o,p=a.length),d=Math.max(Math.ceil(f/LOG_BASE),p)+2,c>d&&(c=d,s.length=1),s.reverse(),d=c;d--;)s.push(0);s.reverse()}else{for(d=a.length,p=e.length,r=d<p,r&&(p=d),d=0;d<p;d++)if(a[d]!=e[d]){r=a[d]<e[d];break}c=0}for(r&&(s=a,a=e,e=s,v.s=-v.s),p=a.length,d=e.length-p;d>0;--d)a[p++]=0;for(d=e.length;d>c;){if(a[--d]<e[d]){for(h=d;h&&a[--h]===0;)a[h]=BASE-1;--a[h],a[d]+=BASE}a[d]-=e[d]}for(;a[--p]===0;)a.pop();for(;a[0]===0;a.shift())--g;return a[0]?(v.d=a,v.e=getBase10Exponent(a,g),external?finalise(v,f,u):v):new n(u===3?-0:0)};P.modulo=P.mod=function(v){var s,g=this,d=g.constructor;return v=new d(v),!g.d||!v.s||v.d&&!v.d[0]?new d(NaN):!v.d||g.d&&!g.d[0]?finalise(new d(g),d.precision,d.rounding):(external=!1,d.modulo==9?(s=divide(g,v.abs(),0,3,1),s.s*=v.s):s=divide(g,v,0,d.modulo,1),s=s.times(v),external=!0,g.minus(s))};P.naturalExponential=P.exp=function(){return naturalExponential(this)};P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)};P.negated=P.neg=function(){var v=new this.constructor(this);return v.s=-v.s,finalise(v)};P.plus=P.add=function(v){var s,g,d,h,c,p,f,u,a,o,r=this,e=r.constructor;if(v=new e(v),!r.d||!v.d)return!r.s||!v.s?v=new e(NaN):r.d||(v=new e(v.d||r.s===v.s?r:NaN)),v;if(r.s!=v.s)return v.s=-v.s,r.minus(v);if(a=r.d,o=v.d,f=e.precision,u=e.rounding,!a[0]||!o[0])return o[0]||(v=new e(r)),external?finalise(v,f,u):v;if(c=mathfloor(r.e/LOG_BASE),d=mathfloor(v.e/LOG_BASE),a=a.slice(),h=c-d,h){for(h<0?(g=a,h=-h,p=o.length):(g=o,d=c,p=a.length),c=Math.ceil(f/LOG_BASE),p=c>p?c+1:p+1,h>p&&(h=p,g.length=1),g.reverse();h--;)g.push(0);g.reverse()}for(p=a.length,h=o.length,p-h<0&&(h=p,g=o,o=a,a=g),s=0;h;)s=(a[--h]=a[h]+o[h]+s)/BASE|0,a[h]%=BASE;for(s&&(a.unshift(s),++d),p=a.length;a[--p]==0;)a.pop();return v.d=a,v.e=getBase10Exponent(a,d),external?finalise(v,f,u):v};P.precision=P.sd=function(v){var s,g=this;if(v!==void 0&&v!==!!v&&v!==1&&v!==0)throw Error(invalidArgument+v);return g.d?(s=getPrecision(g.d),v&&g.e+1>s&&(s=g.e+1)):s=NaN,s};P.round=function(){var v=this,s=v.constructor;return finalise(new s(v),v.e+1,s.rounding)};P.sine=P.sin=function(){var v,s,g=this,d=g.constructor;return g.isFinite()?g.isZero()?new d(g):(v=d.precision,s=d.rounding,d.precision=v+Math.max(g.e,g.sd())+LOG_BASE,d.rounding=1,g=sine(d,toLessThanHalfPi(d,g)),d.precision=v,d.rounding=s,finalise(quadrant>2?g.neg():g,v,s,!0)):new d(NaN)};P.squareRoot=P.sqrt=function(){var v,s,g,d,h,c,p=this,f=p.d,u=p.e,a=p.s,o=p.constructor;if(a!==1||!f||!f[0])return new o(!a||a<0&&(!f||f[0])?NaN:f?p:1/0);for(external=!1,a=Math.sqrt(+p),a==0||a==1/0?(s=digitsToString(f),(s.length+u)%2==0&&(s+="0"),a=Math.sqrt(s),u=mathfloor((u+1)/2)-(u<0||u%2),a==1/0?s="5e"+u:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+u),d=new o(s)):d=new o(a.toString()),g=(u=o.precision)+3;;)if(c=d,d=c.plus(divide(p,c,g+2,1)).times(.5),digitsToString(c.d).slice(0,g)===(s=digitsToString(d.d)).slice(0,g))if(s=s.slice(g-3,g+1),s=="9999"||!h&&s=="4999"){if(!h&&(finalise(c,u+1,0),c.times(c).eq(p))){d=c;break}g+=4,h=1}else{(!+s||!+s.slice(1)&&s.charAt(0)=="5")&&(finalise(d,u+1,1),v=!d.times(d).eq(p));break}return external=!0,finalise(d,u,o.rounding,v)};P.tangent=P.tan=function(){var v,s,g=this,d=g.constructor;return g.isFinite()?g.isZero()?new d(g):(v=d.precision,s=d.rounding,d.precision=v+10,d.rounding=1,g=g.sin(),g.s=1,g=divide(g,new d(1).minus(g.times(g)).sqrt(),v+10,0),d.precision=v,d.rounding=s,finalise(quadrant==2||quadrant==4?g.neg():g,v,s,!0)):new d(NaN)};P.times=P.mul=function(v){var s,g,d,h,c,p,f,u,a,o=this,r=o.constructor,e=o.d,t=(v=new r(v)).d;if(v.s*=o.s,!e||!e[0]||!t||!t[0])return new r(!v.s||e&&!e[0]&&!t||t&&!t[0]&&!e?NaN:!e||!t?v.s/0:v.s*0);for(g=mathfloor(o.e/LOG_BASE)+mathfloor(v.e/LOG_BASE),u=e.length,a=t.length,u<a&&(c=e,e=t,t=c,p=u,u=a,a=p),c=[],p=u+a,d=p;d--;)c.push(0);for(d=a;--d>=0;){for(s=0,h=u+d;h>d;)f=c[h]+t[d]*e[h-d-1]+s,c[h--]=f%BASE|0,s=f/BASE|0;c[h]=(c[h]+s)%BASE|0}for(;!c[--p];)c.pop();return s?++g:c.shift(),v.d=c,v.e=getBase10Exponent(c,g),external?finalise(v,r.precision,r.rounding):v};P.toBinary=function(v,s){return toStringBinary(this,2,v,s)};P.toDecimalPlaces=P.toDP=function(v,s){var g=this,d=g.constructor;return g=new d(g),v===void 0?g:(checkInt32(v,0,MAX_DIGITS),s===void 0?s=d.rounding:checkInt32(s,0,8),finalise(g,v+g.e+1,s))};P.toExponential=function(v,s){var g,d=this,h=d.constructor;return v===void 0?g=finiteToString(d,!0):(checkInt32(v,0,MAX_DIGITS),s===void 0?s=h.rounding:checkInt32(s,0,8),d=finalise(new h(d),v+1,s),g=finiteToString(d,!0,v+1)),d.isNeg()&&!d.isZero()?"-"+g:g};P.toFixed=function(v,s){var g,d,h=this,c=h.constructor;return v===void 0?g=finiteToString(h):(checkInt32(v,0,MAX_DIGITS),s===void 0?s=c.rounding:checkInt32(s,0,8),d=finalise(new c(h),v+h.e+1,s),g=finiteToString(d,!1,v+d.e+1)),h.isNeg()&&!h.isZero()?"-"+g:g};P.toFraction=function(v){var s,g,d,h,c,p,f,u,a,o,r,e,t=this,n=t.d,i=t.constructor;if(!n)return new i(t);if(a=g=new i(1),d=u=new i(0),s=new i(d),c=s.e=getPrecision(n)-t.e-1,p=c%LOG_BASE,s.d[0]=mathpow(10,p<0?LOG_BASE+p:p),v==null)v=c>0?s:a;else{if(f=new i(v),!f.isInt()||f.lt(a))throw Error(invalidArgument+f);v=f.gt(s)?c>0?s:a:f}for(external=!1,f=new i(digitsToString(n)),o=i.precision,i.precision=c=n.length*LOG_BASE*2;r=divide(f,s,0,1,1),h=g.plus(r.times(d)),h.cmp(v)!=1;)g=d,d=h,h=a,a=u.plus(r.times(h)),u=h,h=s,s=f.minus(r.times(h)),f=h;return h=divide(v.minus(g),d,0,1,1),u=u.plus(h.times(a)),g=g.plus(h.times(d)),u.s=a.s=t.s,e=divide(a,d,c,1).minus(t).abs().cmp(divide(u,g,c,1).minus(t).abs())<1?[a,d]:[u,g],i.precision=o,external=!0,e};P.toHexadecimal=P.toHex=function(v,s){return toStringBinary(this,16,v,s)};P.toNearest=function(v,s){var g=this,d=g.constructor;if(g=new d(g),v==null){if(!g.d)return g;v=new d(1),s=d.rounding}else{if(v=new d(v),s===void 0?s=d.rounding:checkInt32(s,0,8),!g.d)return v.s?g:v;if(!v.d)return v.s&&(v.s=g.s),v}return v.d[0]?(external=!1,g=divide(g,v,0,s,1).times(v),external=!0,finalise(g)):(v.s=g.s,g=v),g};P.toNumber=function(){return+this};P.toOctal=function(v,s){return toStringBinary(this,8,v,s)};P.toPower=P.pow=function(v){var s,g,d,h,c,p,f=this,u=f.constructor,a=+(v=new u(v));if(!f.d||!v.d||!f.d[0]||!v.d[0])return new u(mathpow(+f,a));if(f=new u(f),f.eq(1))return f;if(d=u.precision,c=u.rounding,v.eq(1))return finalise(f,d,c);if(s=mathfloor(v.e/LOG_BASE),s>=v.d.length-1&&(g=a<0?-a:a)<=MAX_SAFE_INTEGER)return h=intPow(u,f,g,d),v.s<0?new u(1).div(h):finalise(h,d,c);if(p=f.s,p<0){if(s<v.d.length-1)return new u(NaN);if(v.d[s]&1||(p=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=p,f}return g=mathpow(+f,a),s=g==0||!isFinite(g)?mathfloor(a*(Math.log("0."+digitsToString(f.d))/Math.LN10+f.e+1)):new u(g+"").e,s>u.maxE+1||s<u.minE-1?new u(s>0?p/0:0):(external=!1,u.rounding=f.s=1,g=Math.min(12,(s+"").length),h=naturalExponential(v.times(naturalLogarithm(f,d+g)),d),h.d&&(h=finalise(h,d+5,1),checkRoundingDigits(h.d,d,c)&&(s=d+10,h=finalise(naturalExponential(v.times(naturalLogarithm(f,s+g)),s),s+5,1),+digitsToString(h.d).slice(d+1,d+15)+1==1e14&&(h=finalise(h,d+1,0)))),h.s=p,external=!0,u.rounding=c,finalise(h,d,c))};P.toPrecision=function(v,s){var g,d=this,h=d.constructor;return v===void 0?g=finiteToString(d,d.e<=h.toExpNeg||d.e>=h.toExpPos):(checkInt32(v,1,MAX_DIGITS),s===void 0?s=h.rounding:checkInt32(s,0,8),d=finalise(new h(d),v,s),g=finiteToString(d,v<=d.e||d.e<=h.toExpNeg,v)),d.isNeg()&&!d.isZero()?"-"+g:g};P.toSignificantDigits=P.toSD=function(v,s){var g=this,d=g.constructor;return v===void 0?(v=d.precision,s=d.rounding):(checkInt32(v,1,MAX_DIGITS),s===void 0?s=d.rounding:checkInt32(s,0,8)),finalise(new d(g),v,s)};P.toString=function(){var v=this,s=v.constructor,g=finiteToString(v,v.e<=s.toExpNeg||v.e>=s.toExpPos);return v.isNeg()&&!v.isZero()?"-"+g:g};P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var v=this,s=v.constructor,g=finiteToString(v,v.e<=s.toExpNeg||v.e>=s.toExpPos);return v.isNeg()?"-"+g:g};function digitsToString(v){var s,g,d,h=v.length-1,c="",p=v[0];if(h>0){for(c+=p,s=1;s<h;s++)d=v[s]+"",g=LOG_BASE-d.length,g&&(c+=getZeroString(g)),c+=d;p=v[s],d=p+"",g=LOG_BASE-d.length,g&&(c+=getZeroString(g))}else if(p===0)return"0";for(;p%10===0;)p/=10;return c+p}function checkInt32(v,s,g){if(v!==~~v||v<s||v>g)throw Error(invalidArgument+v)}function checkRoundingDigits(v,s,g,d){var h,c,p,f;for(c=v[0];c>=10;c/=10)--s;return--s<0?(s+=LOG_BASE,h=0):(h=Math.ceil((s+1)/LOG_BASE),s%=LOG_BASE),c=mathpow(10,LOG_BASE-s),f=v[h]%c|0,d==null?s<3?(s==0?f=f/100|0:s==1&&(f=f/10|0),p=g<4&&f==99999||g>3&&f==49999||f==5e4||f==0):p=(g<4&&f+1==c||g>3&&f+1==c/2)&&(v[h+1]/c/100|0)==mathpow(10,s-2)-1||(f==c/2||f==0)&&(v[h+1]/c/100|0)==0:s<4?(s==0?f=f/1e3|0:s==1?f=f/100|0:s==2&&(f=f/10|0),p=(d||g<4)&&f==9999||!d&&g>3&&f==4999):p=((d||g<4)&&f+1==c||!d&&g>3&&f+1==c/2)&&(v[h+1]/c/1e3|0)==mathpow(10,s-3)-1,p}function convertBase(v,s,g){for(var d,h=[0],c,p=0,f=v.length;p<f;){for(c=h.length;c--;)h[c]*=s;for(h[0]+=NUMERALS.indexOf(v.charAt(p++)),d=0;d<h.length;d++)h[d]>g-1&&(h[d+1]===void 0&&(h[d+1]=0),h[d+1]+=h[d]/g|0,h[d]%=g)}return h.reverse()}function cosine(v,s){var g,d,h;if(s.isZero())return s;d=s.d.length,d<32?(g=Math.ceil(d/3),h=(1/tinyPow(4,g)).toString()):(g=16,h="2.3283064365386962890625e-10"),v.precision+=g,s=taylorSeries(v,1,s.times(h),new v(1));for(var c=g;c--;){var p=s.times(s);s=p.times(p).minus(p).times(8).plus(1)}return v.precision-=g,s}var divide=function(){function v(d,h,c){var p,f=0,u=d.length;for(d=d.slice();u--;)p=d[u]*h+f,d[u]=p%c|0,f=p/c|0;return f&&d.unshift(f),d}function s(d,h,c,p){var f,u;if(c!=p)u=c>p?1:-1;else for(f=u=0;f<c;f++)if(d[f]!=h[f]){u=d[f]>h[f]?1:-1;break}return u}function g(d,h,c,p){for(var f=0;c--;)d[c]-=f,f=d[c]<h[c]?1:0,d[c]=f*p+d[c]-h[c];for(;!d[0]&&d.length>1;)d.shift()}return function(d,h,c,p,f,u){var a,o,r,e,t,n,i,l,m,y,_,b,w,x,S,A,T,E,N,M,j=d.constructor,k=d.s==h.s?1:-1,F=d.d,L=h.d;if(!F||!F[0]||!L||!L[0])return new j(!d.s||!h.s||(F?L&&F[0]==L[0]:!L)?NaN:F&&F[0]==0||!L?k*0:k/0);for(u?(t=1,o=d.e-h.e):(u=BASE,t=LOG_BASE,o=mathfloor(d.e/t)-mathfloor(h.e/t)),N=L.length,T=F.length,m=new j(k),y=m.d=[],r=0;L[r]==(F[r]||0);r++);if(L[r]>(F[r]||0)&&o--,c==null?(x=c=j.precision,p=j.rounding):f?x=c+(d.e-h.e)+1:x=c,x<0)y.push(1),n=!0;else{if(x=x/t+2|0,r=0,N==1){for(e=0,L=L[0],x++;(r<T||e)&&x--;r++)S=e*u+(F[r]||0),y[r]=S/L|0,e=S%L|0;n=e||r<T}else{for(e=u/(L[0]+1)|0,e>1&&(L=v(L,e,u),F=v(F,e,u),N=L.length,T=F.length),A=N,_=F.slice(0,N),b=_.length;b<N;)_[b++]=0;M=L.slice(),M.unshift(0),E=L[0],L[1]>=u/2&&++E;do e=0,a=s(L,_,N,b),a<0?(w=_[0],N!=b&&(w=w*u+(_[1]||0)),e=w/E|0,e>1?(e>=u&&(e=u-1),i=v(L,e,u),l=i.length,b=_.length,a=s(i,_,l,b),a==1&&(e--,g(i,N<l?M:L,l,u))):(e==0&&(a=e=1),i=L.slice()),l=i.length,l<b&&i.unshift(0),g(_,i,b,u),a==-1&&(b=_.length,a=s(L,_,N,b),a<1&&(e++,g(_,N<b?M:L,b,u))),b=_.length):a===0&&(e++,_=[0]),y[r++]=e,a&&_[0]?_[b++]=F[A]||0:(_=[F[A]],b=1);while((A++<T||_[0]!==void 0)&&x--);n=_[0]!==void 0}y[0]||y.shift()}if(t==1)m.e=o,inexact=n;else{for(r=1,e=y[0];e>=10;e/=10)r++;m.e=r+o*t-1,finalise(m,f?c+m.e+1:c,p,n)}return m}}();function finalise(v,s,g,d){var h,c,p,f,u,a,o,r,e,t=v.constructor;e:if(s!=null){if(r=v.d,!r)return v;for(h=1,f=r[0];f>=10;f/=10)h++;if(c=s-h,c<0)c+=LOG_BASE,p=s,o=r[e=0],u=o/mathpow(10,h-p-1)%10|0;else if(e=Math.ceil((c+1)/LOG_BASE),f=r.length,e>=f)if(d){for(;f++<=e;)r.push(0);o=u=0,h=1,c%=LOG_BASE,p=c-LOG_BASE+1}else break e;else{for(o=f=r[e],h=1;f>=10;f/=10)h++;c%=LOG_BASE,p=c-LOG_BASE+h,u=p<0?0:o/mathpow(10,h-p-1)%10|0}if(d=d||s<0||r[e+1]!==void 0||(p<0?o:o%mathpow(10,h-p-1)),a=g<4?(u||d)&&(g==0||g==(v.s<0?3:2)):u>5||u==5&&(g==4||d||g==6&&(c>0?p>0?o/mathpow(10,h-p):0:r[e-1])%10&1||g==(v.s<0?8:7)),s<1||!r[0])return r.length=0,a?(s-=v.e+1,r[0]=mathpow(10,(LOG_BASE-s%LOG_BASE)%LOG_BASE),v.e=-s||0):r[0]=v.e=0,v;if(c==0?(r.length=e,f=1,e--):(r.length=e+1,f=mathpow(10,LOG_BASE-c),r[e]=p>0?(o/mathpow(10,h-p)%mathpow(10,p)|0)*f:0),a)for(;;)if(e==0){for(c=1,p=r[0];p>=10;p/=10)c++;for(p=r[0]+=f,f=1;p>=10;p/=10)f++;c!=f&&(v.e++,r[0]==BASE&&(r[0]=1));break}else{if(r[e]+=f,r[e]!=BASE)break;r[e--]=0,f=1}for(c=r.length;r[--c]===0;)r.pop()}return external&&(v.e>t.maxE?(v.d=null,v.e=NaN):v.e<t.minE&&(v.e=0,v.d=[0])),v}function finiteToString(v,s,g){if(!v.isFinite())return nonFiniteToString(v);var d,h=v.e,c=digitsToString(v.d),p=c.length;return s?(g&&(d=g-p)>0?c=c.charAt(0)+"."+c.slice(1)+getZeroString(d):p>1&&(c=c.charAt(0)+"."+c.slice(1)),c=c+(v.e<0?"e":"e+")+v.e):h<0?(c="0."+getZeroString(-h-1)+c,g&&(d=g-p)>0&&(c+=getZeroString(d))):h>=p?(c+=getZeroString(h+1-p),g&&(d=g-h-1)>0&&(c=c+"."+getZeroString(d))):((d=h+1)<p&&(c=c.slice(0,d)+"."+c.slice(d)),g&&(d=g-p)>0&&(h+1===p&&(c+="."),c+=getZeroString(d))),c}function getBase10Exponent(v,s){var g=v[0];for(s*=LOG_BASE;g>=10;g/=10)s++;return s}function getLn10(v,s,g){if(s>LN10_PRECISION)throw external=!0,g&&(v.precision=g),Error(precisionLimitExceeded);return finalise(new v(LN10),s,1,!0)}function getPi(v,s,g){if(s>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new v(PI),s,g,!0)}function getPrecision(v){var s=v.length-1,g=s*LOG_BASE+1;if(s=v[s],s){for(;s%10==0;s/=10)g--;for(s=v[0];s>=10;s/=10)g++}return g}function getZeroString(v){for(var s="";v--;)s+="0";return s}function intPow(v,s,g,d){var h,c=new v(1),p=Math.ceil(d/LOG_BASE+4);for(external=!1;;){if(g%2&&(c=c.times(s),truncate(c.d,p)&&(h=!0)),g=mathfloor(g/2),g===0){g=c.d.length-1,h&&c.d[g]===0&&++c.d[g];break}s=s.times(s),truncate(s.d,p)}return external=!0,c}function isOdd(v){return v.d[v.d.length-1]&1}function maxOrMin(v,s,g){for(var d,h,c=new v(s[0]),p=0;++p<s.length;){if(h=new v(s[p]),!h.s){c=h;break}d=c.cmp(h),(d===g||d===0&&c.s===g)&&(c=h)}return c}function naturalExponential(v,s){var g,d,h,c,p,f,u,a=0,o=0,r=0,e=v.constructor,t=e.rounding,n=e.precision;if(!v.d||!v.d[0]||v.e>17)return new e(v.d?v.d[0]?v.s<0?0:1/0:1:v.s?v.s<0?0:v:0/0);for(s==null?(external=!1,u=n):u=s,f=new e(.03125);v.e>-2;)v=v.times(f),r+=5;for(d=Math.log(mathpow(2,r))/Math.LN10*2+5|0,u+=d,g=c=p=new e(1),e.precision=u;;){if(c=finalise(c.times(v),u,1),g=g.times(++o),f=p.plus(divide(c,g,u,1)),digitsToString(f.d).slice(0,u)===digitsToString(p.d).slice(0,u)){for(h=r;h--;)p=finalise(p.times(p),u,1);if(s==null)if(a<3&&checkRoundingDigits(p.d,u-d,t,a))e.precision=u+=10,g=c=f=new e(1),o=0,a++;else return finalise(p,e.precision=n,t,external=!0);else return e.precision=n,p}p=f}}function naturalLogarithm(v,s){var g,d,h,c,p,f,u,a,o,r,e,t=1,n=10,i=v,l=i.d,m=i.constructor,y=m.rounding,_=m.precision;if(i.s<0||!l||!l[0]||!i.e&&l[0]==1&&l.length==1)return new m(l&&!l[0]?-1/0:i.s!=1?NaN:l?0:i);if(s==null?(external=!1,o=_):o=s,m.precision=o+=n,g=digitsToString(l),d=g.charAt(0),Math.abs(c=i.e)<15e14){for(;d<7&&d!=1||d==1&&g.charAt(1)>3;)i=i.times(v),g=digitsToString(i.d),d=g.charAt(0),t++;c=i.e,d>1?(i=new m("0."+g),c++):i=new m(d+"."+g.slice(1))}else return a=getLn10(m,o+2,_).times(c+""),i=naturalLogarithm(new m(d+"."+g.slice(1)),o-n).plus(a),m.precision=_,s==null?finalise(i,_,y,external=!0):i;for(r=i,u=p=i=divide(i.minus(1),i.plus(1),o,1),e=finalise(i.times(i),o,1),h=3;;){if(p=finalise(p.times(e),o,1),a=u.plus(divide(p,new m(h),o,1)),digitsToString(a.d).slice(0,o)===digitsToString(u.d).slice(0,o))if(u=u.times(2),c!==0&&(u=u.plus(getLn10(m,o+2,_).times(c+""))),u=divide(u,new m(t),o,1),s==null)if(checkRoundingDigits(u.d,o-n,y,f))m.precision=o+=n,a=p=i=divide(r.minus(1),r.plus(1),o,1),e=finalise(i.times(i),o,1),h=f=1;else return finalise(u,m.precision=_,y,external=!0);else return m.precision=_,u;u=a,h+=2}}function nonFiniteToString(v){return String(v.s*v.s/0)}function parseDecimal(v,s){var g,d,h;for((g=s.indexOf("."))>-1&&(s=s.replace(".","")),(d=s.search(/e/i))>0?(g<0&&(g=d),g+=+s.slice(d+1),s=s.substring(0,d)):g<0&&(g=s.length),d=0;s.charCodeAt(d)===48;d++);for(h=s.length;s.charCodeAt(h-1)===48;--h);if(s=s.slice(d,h),s){if(h-=d,v.e=g=g-d-1,v.d=[],d=(g+1)%LOG_BASE,g<0&&(d+=LOG_BASE),d<h){for(d&&v.d.push(+s.slice(0,d)),h-=LOG_BASE;d<h;)v.d.push(+s.slice(d,d+=LOG_BASE));s=s.slice(d),d=LOG_BASE-s.length}else d-=h;for(;d--;)s+="0";v.d.push(+s),external&&(v.e>v.constructor.maxE?(v.d=null,v.e=NaN):v.e<v.constructor.minE&&(v.e=0,v.d=[0]))}else v.e=0,v.d=[0];return v}function parseOther(v,s){var g,d,h,c,p,f,u,a,o;if(s.indexOf("_")>-1){if(s=s.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(s))return parseDecimal(v,s)}else if(s==="Infinity"||s==="NaN")return+s||(v.s=NaN),v.e=NaN,v.d=null,v;if(isHex.test(s))g=16,s=s.toLowerCase();else if(isBinary.test(s))g=2;else if(isOctal.test(s))g=8;else throw Error(invalidArgument+s);for(c=s.search(/p/i),c>0?(u=+s.slice(c+1),s=s.substring(2,c)):s=s.slice(2),c=s.indexOf("."),p=c>=0,d=v.constructor,p&&(s=s.replace(".",""),f=s.length,c=f-c,h=intPow(d,new d(g),c,c*2)),a=convertBase(s,g,BASE),o=a.length-1,c=o;a[c]===0;--c)a.pop();return c<0?new d(v.s*0):(v.e=getBase10Exponent(a,o),v.d=a,external=!1,p&&(v=divide(v,h,f*4)),u&&(v=v.times(Math.abs(u)<54?mathpow(2,u):Decimal.pow(2,u))),external=!0,v)}function sine(v,s){var g,d=s.d.length;if(d<3)return s.isZero()?s:taylorSeries(v,2,s,s);g=1.4*Math.sqrt(d),g=g>16?16:g|0,s=s.times(1/tinyPow(5,g)),s=taylorSeries(v,2,s,s);for(var h,c=new v(5),p=new v(16),f=new v(20);g--;)h=s.times(s),s=s.times(c.plus(h.times(p.times(h).minus(f))));return s}function taylorSeries(v,s,g,d,h){var c,p,f,u,a=v.precision,o=Math.ceil(a/LOG_BASE);for(external=!1,u=g.times(g),f=new v(d);;){if(p=divide(f.times(u),new v(s++*s++),a,1),f=h?d.plus(p):d.minus(p),d=divide(p.times(u),new v(s++*s++),a,1),p=f.plus(d),p.d[o]!==void 0){for(c=o;p.d[c]===f.d[c]&&c--;);if(c==-1)break}c=f,f=d,d=p,p=c}return external=!0,p.d.length=o+1,p}function tinyPow(v,s){for(var g=v;--s;)g*=v;return g}function toLessThanHalfPi(v,s){var g,d=s.s<0,h=getPi(v,v.precision,1),c=h.times(.5);if(s=s.abs(),s.lte(c))return quadrant=d?4:1,s;if(g=s.divToInt(h),g.isZero())quadrant=d?3:2;else{if(s=s.minus(g.times(h)),s.lte(c))return quadrant=isOdd(g)?d?2:3:d?4:1,s;quadrant=isOdd(g)?d?1:4:d?3:2}return s.minus(h).abs()}function toStringBinary(v,s,g,d){var h,c,p,f,u,a,o,r,e,t=v.constructor,n=g!==void 0;if(n?(checkInt32(g,1,MAX_DIGITS),d===void 0?d=t.rounding:checkInt32(d,0,8)):(g=t.precision,d=t.rounding),!v.isFinite())o=nonFiniteToString(v);else{for(o=finiteToString(v),p=o.indexOf("."),n?(h=2,s==16?g=g*4-3:s==8&&(g=g*3-2)):h=s,p>=0&&(o=o.replace(".",""),e=new t(1),e.e=o.length-p,e.d=convertBase(finiteToString(e),10,h),e.e=e.d.length),r=convertBase(o,10,h),c=u=r.length;r[--u]==0;)r.pop();if(!r[0])o=n?"0p+0":"0";else{if(p<0?c--:(v=new t(v),v.d=r,v.e=c,v=divide(v,e,g,d,0,h),r=v.d,c=v.e,a=inexact),p=r[g],f=h/2,a=a||r[g+1]!==void 0,a=d<4?(p!==void 0||a)&&(d===0||d===(v.s<0?3:2)):p>f||p===f&&(d===4||a||d===6&&r[g-1]&1||d===(v.s<0?8:7)),r.length=g,a)for(;++r[--g]>h-1;)r[g]=0,g||(++c,r.unshift(1));for(u=r.length;!r[u-1];--u);for(p=0,o="";p<u;p++)o+=NUMERALS.charAt(r[p]);if(n){if(u>1)if(s==16||s==8){for(p=s==16?4:3,--u;u%p;u++)o+="0";for(r=convertBase(o,h,s),u=r.length;!r[u-1];--u);for(p=1,o="1.";p<u;p++)o+=NUMERALS.charAt(r[p])}else o=o.charAt(0)+"."+o.slice(1);o=o+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)o="0"+o;o="0."+o}else if(++c>u)for(c-=u;c--;)o+="0";else c<u&&(o=o.slice(0,c)+"."+o.slice(c))}o=(s==16?"0x":s==2?"0b":s==8?"0o":"")+o}return v.s<0?"-"+o:o}function truncate(v,s){if(v.length>s)return v.length=s,!0}function abs(v){return new this(v).abs()}function acos(v){return new this(v).acos()}function acosh(v){return new this(v).acosh()}function add(v,s){return new this(v).plus(s)}function asin(v){return new this(v).asin()}function asinh(v){return new this(v).asinh()}function atan(v){return new this(v).atan()}function atanh(v){return new this(v).atanh()}function atan2(v,s){v=new this(v),s=new this(s);var g,d=this.precision,h=this.rounding,c=d+4;return!v.s||!s.s?g=new this(NaN):!v.d&&!s.d?(g=getPi(this,c,1).times(s.s>0?.25:.75),g.s=v.s):!s.d||v.isZero()?(g=s.s<0?getPi(this,d,h):new this(0),g.s=v.s):!v.d||s.isZero()?(g=getPi(this,c,1).times(.5),g.s=v.s):s.s<0?(this.precision=c,this.rounding=1,g=this.atan(divide(v,s,c,1)),s=getPi(this,c,1),this.precision=d,this.rounding=h,g=v.s<0?g.minus(s):g.plus(s)):g=this.atan(divide(v,s,c,1)),g}function cbrt(v){return new this(v).cbrt()}function ceil(v){return finalise(v=new this(v),v.e+1,2)}function clamp(v,s,g){return new this(v).clamp(s,g)}function config(v){if(!v||typeof v!="object")throw Error(decimalError+"Object expected");var s,g,d,h=v.defaults===!0,c=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(s=0;s<c.length;s+=3)if(g=c[s],h&&(this[g]=DEFAULTS[g]),(d=v[g])!==void 0)if(mathfloor(d)===d&&d>=c[s+1]&&d<=c[s+2])this[g]=d;else throw Error(invalidArgument+g+": "+d);if(g="crypto",h&&(this[g]=DEFAULTS[g]),(d=v[g])!==void 0)if(d===!0||d===!1||d===0||d===1)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[g]=!0;else throw Error(cryptoUnavailable);else this[g]=!1;else throw Error(invalidArgument+g+": "+d);return this}function cos(v){return new this(v).cos()}function cosh(v){return new this(v).cosh()}function clone(v){var s,g,d;function h(c){var p,f,u,a=this;if(!(a instanceof h))return new h(c);if(a.constructor=h,isDecimalInstance(c)){a.s=c.s,external?!c.d||c.e>h.maxE?(a.e=NaN,a.d=null):c.e<h.minE?(a.e=0,a.d=[0]):(a.e=c.e,a.d=c.d.slice()):(a.e=c.e,a.d=c.d?c.d.slice():c.d);return}if(u=typeof c,u==="number"){if(c===0){a.s=1/c<0?-1:1,a.e=0,a.d=[0];return}if(c<0?(c=-c,a.s=-1):a.s=1,c===~~c&&c<1e7){for(p=0,f=c;f>=10;f/=10)p++;external?p>h.maxE?(a.e=NaN,a.d=null):p<h.minE?(a.e=0,a.d=[0]):(a.e=p,a.d=[c]):(a.e=p,a.d=[c]);return}if(c*0!==0){c||(a.s=NaN),a.e=NaN,a.d=null;return}return parseDecimal(a,c.toString())}if(u==="string")return(f=c.charCodeAt(0))===45?(c=c.slice(1),a.s=-1):(f===43&&(c=c.slice(1)),a.s=1),isDecimal.test(c)?parseDecimal(a,c):parseOther(a,c);if(u==="bigint")return c<0?(c=-c,a.s=-1):a.s=1,parseDecimal(a,c.toString());throw Error(invalidArgument+c)}if(h.prototype=P,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=config,h.clone=clone,h.isDecimal=isDecimalInstance,h.abs=abs,h.acos=acos,h.acosh=acosh,h.add=add,h.asin=asin,h.asinh=asinh,h.atan=atan,h.atanh=atanh,h.atan2=atan2,h.cbrt=cbrt,h.ceil=ceil,h.clamp=clamp,h.cos=cos,h.cosh=cosh,h.div=div,h.exp=exp,h.floor=floor,h.hypot=hypot,h.ln=ln,h.log=log,h.log10=log10,h.log2=log2,h.max=max,h.min=min,h.mod=mod,h.mul=mul,h.pow=pow,h.random=random,h.round=round,h.sign=sign,h.sin=sin,h.sinh=sinh,h.sqrt=sqrt,h.sub=sub,h.sum=sum,h.tan=tan,h.tanh=tanh,h.trunc=trunc,v===void 0&&(v={}),v&&v.defaults!==!0)for(d=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],s=0;s<d.length;)v.hasOwnProperty(g=d[s++])||(v[g]=this[g]);return h.config(v),h}function div(v,s){return new this(v).div(s)}function exp(v){return new this(v).exp()}function floor(v){return finalise(v=new this(v),v.e+1,3)}function hypot(){var v,s,g=new this(0);for(external=!1,v=0;v<arguments.length;)if(s=new this(arguments[v++]),s.d)g.d&&(g=g.plus(s.times(s)));else{if(s.s)return external=!0,new this(1/0);g=s}return external=!0,g.sqrt()}function isDecimalInstance(v){return v instanceof Decimal||v&&v.toStringTag===tag||!1}function ln(v){return new this(v).ln()}function log(v,s){return new this(v).log(s)}function log2(v){return new this(v).log(2)}function log10(v){return new this(v).log(10)}function max(){return maxOrMin(this,arguments,-1)}function min(){return maxOrMin(this,arguments,1)}function mod(v,s){return new this(v).mod(s)}function mul(v,s){return new this(v).mul(s)}function pow(v,s){return new this(v).pow(s)}function random(v){var s,g,d,h,c=0,p=new this(1),f=[];if(v===void 0?v=this.precision:checkInt32(v,1,MAX_DIGITS),d=Math.ceil(v/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(s=crypto.getRandomValues(new Uint32Array(d));c<d;)h=s[c],h>=429e7?s[c]=crypto.getRandomValues(new Uint32Array(1))[0]:f[c++]=h%1e7;else if(crypto.randomBytes){for(s=crypto.randomBytes(d*=4);c<d;)h=s[c]+(s[c+1]<<8)+(s[c+2]<<16)+((s[c+3]&127)<<24),h>=214e7?crypto.randomBytes(4).copy(s,c):(f.push(h%1e7),c+=4);c=d/4}else throw Error(cryptoUnavailable);else for(;c<d;)f[c++]=Math.random()*1e7|0;for(d=f[--c],v%=LOG_BASE,d&&v&&(h=mathpow(10,LOG_BASE-v),f[c]=(d/h|0)*h);f[c]===0;c--)f.pop();if(c<0)g=0,f=[0];else{for(g=-1;f[0]===0;g-=LOG_BASE)f.shift();for(d=1,h=f[0];h>=10;h/=10)d++;d<LOG_BASE&&(g-=LOG_BASE-d)}return p.e=g,p.d=f,p}function round(v){return finalise(v=new this(v),v.e+1,this.rounding)}function sign(v){return v=new this(v),v.d?v.d[0]?v.s:0*v.s:v.s||NaN}function sin(v){return new this(v).sin()}function sinh(v){return new this(v).sinh()}function sqrt(v){return new this(v).sqrt()}function sub(v,s){return new this(v).sub(s)}function sum(){var v=0,s=arguments,g=new this(s[v]);for(external=!1;g.s&&++v<s.length;)g=g.plus(s[v]);return external=!0,finalise(g,this.precision,this.rounding)}function tan(v){return new this(v).tan()}function tanh(v){return new this(v).tanh()}function trunc(v){return finalise(v=new this(v),v.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var Decimal=P.constructor=clone(DEFAULTS);LN10=new Decimal(LN10);PI=new Decimal(PI);const _withScopeId$3=v=>(pushScopeId("data-v-476af87e"),v=v(),popScopeId(),v),_hoisted_1$7={class:"w-full h-full absolute top-0 left-0 flex items-center justify-center"},_hoisted_2$7={class:"w-fit h-fit absolute p-1 z-20 top-1/2 opacity-80 -translate-x-1/2 left-1/2 -translate-y-1/2 border border-white/20 shadow-[0_0_50px_rgba(255,255,255,0.05)] bg-black/90 backdrop-blur-sm bg-black flex items-center space-x-3",key:"no-face-detected"},_hoisted_3$7=_withScopeId$3(()=>createBaseVNode("div",{class:"absolute top-0 left-0 w-8 h-8 border-t border-l border-white/50"},null,-1)),_hoisted_4$7=_withScopeId$3(()=>createBaseVNode("div",{class:"absolute bottom-0 right-0 w-8 h-8 border-b border-r border-white/50"},null,-1)),_hoisted_5$7=_withScopeId$3(()=>createBaseVNode("div",{class:"w-[40px] aspect-[1/1]"},[createBaseVNode("img",{src:_imports_0,alt:"",class:"w-full h-full object-cover"})],-1)),_hoisted_6$7=_withScopeId$3(()=>createBaseVNode("div",{class:"text-[#EBEBEB]"},[createBaseVNode("p",{class:"text-[24px] font-[500]"},"No face detected"),createBaseVNode("div",{class:"text-[14px]"},"Please make sure your face is in view of the webcam.")],-1)),_hoisted_7$6=[_hoisted_3$7,_hoisted_4$7,_hoisted_5$7,_hoisted_6$7],_hoisted_8$6={key:0,class:"flex flex-col items-center"},_hoisted_9$6=_withScopeId$3(()=>createBaseVNode("span",{class:"font-mono text-cyan-400 tracking-widest text-glow"},"ANALYZING_NEURAL_DATA",-1)),_hoisted_10$6={key:0,class:"flex flex-col items-center"},_hoisted_11$6=_withScopeId$3(()=>createBaseVNode("div",{class:"w-16 h-16 border-2 border-red-500 rounded-full flex items-center justify-center animate-pulse"},[createBaseVNode("div",{class:"w-12 h-12 bg-red-500/20 rounded-full"})],-1)),_hoisted_12$6={class:"font-mono text-red-500 mt-4 tracking-[0.3em] animate-pulse"},_hoisted_13$4={key:1,class:"w-full h-full flex items-center justify-center"},_hoisted_14$4=["src"],_hoisted_15$4=["src"],_hoisted_16$4=_withScopeId$3(()=>createBaseVNode("div",{class:"text-[#EBEBEB] text-center"},"Your browser does not support the video tag.",-1)),_hoisted_17$4={key:0,class:"w-full h-full absolute top-0 left-0 text-[#EBEBEB] bg-black flex items-center justify-center sm:text-[18px] md:text-[18px] text-5xl xl:text-6xl leading-none tracking-tight font-[700]"},_hoisted_18$3={class:"absolute bottom-2 left-0 right-0 mx-auto w-[95%] z-30"},_hoisted_19$2={class:"h-1 bg-white/20 rounded-full overflow-hidden",ref:"progressBarContainer"},_hoisted_20$2={class:"flex justify-between text-xs text-gray-400 mt-1"},_hoisted_21$2={class:"w-[280px] h-[200px] absolute bottom-0 right-0 z-20",style:{visibility:"hidden",position:"absolute",left:"-9999px"}},_hoisted_22$2={key:1,class:"w-full h-full pointer-events-auto flex flex-col items-center justify-center"},_hoisted_23$2={key:0,class:"w-full h-full pt-[65px] pb-4 px-10 flex flex-col overflow-hidden ai-chart"},_hoisted_24$2=_withScopeId$3(()=>createBaseVNode("h2",{class:"font-display text-3xl mb-2 text-white uppercase tracking-widest text-center"}," AI analysis results ",-1)),_hoisted_25$2={class:"w-full flex-1 overflow-auto space-y-5"},_hoisted_26$2=["innerHTML"],_hoisted_27$1={key:0,class:"w-fit mx-auto flex items-center justify-center gap-3 cursor-pointer group px-6 py-3 border border-transparent hover:border-white/10 hover:bg-black/40 transition-all clip-corner-both"},_hoisted_28$1={key:0,class:"w-2 h-2 bg-black"},_hoisted_29$1=["checked"],_hoisted_30$1={class:"text-xs uppercase tracking-wider text-gray-400 group-hover:text-white font-mono"},_hoisted_31$1={key:1,class:"flex items-center gap-3 cursor-pointer group px-6 py-3 border border-transparent hover:border-white/10 hover:bg-black/40 transition-all clip-corner-both"},_hoisted_32$1={key:0,class:"w-2 h-2 bg-black"},_hoisted_33$1=["checked"],_hoisted_34$1=_withScopeId$3(()=>createBaseVNode("span",{class:"text-xs uppercase tracking-wider text-gray-400 group-hover:text-white font-mono"}," [ Initiate Protocol Sequence ] ",-1)),MODEL_DB_NAME="EmotionModelDB",MODEL_STORE_NAME="onnxModels",MODEL_KEY="emotion-detection-model",PREFERENCES_KEY="emotion-detection-preferences",ANALYSIS_CACHE_PREFIX="vision-chat-history",PROCESS_INTERVAL=1e3,_sfc_main$7=defineComponent({__name:"EmotionDetection",props:{data:{default:()=>({})}},setup(v,{expose:s}){const g=v,d=ref(null),h=ref(null),c=ref(null),p=ref(!1),f=ref(!1),u=ref(),a=ref(!1),o=ref(!1),r=ref(!1),e=ref(-1),t=ref(!0),n=ref(!0),i=ref(""),l=ref(!1),m=ref(!1),y=ref(0),_=ref(!1),b=ref(!1),w=ref(-1),x=ref([]),S=ref(null),A=ref(null),T=ref(0),E=ref([]);let N=null,M=null,j=0,k=null,F=null,L=null,B=null;const V=useUserPinia(),R=useEmotionalDstributionPinia(),z=ref(0),q=ref(0),Z=computed(()=>q.value<=0?0:z.value/q.value*100),oe=re=>{const Q=Math.floor(re/60),se=Math.floor(re%60);return`${Q.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}`},ne=ref(),W=computed(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));watch(()=>g.data,(re,Q)=>{(re==null?void 0:re.id)!==(Q==null?void 0:Q.id)&&Be()},{deep:!0}),onMounted(async()=>{isEmpty(V.getToken)||(await Be(),ne.value=await useLocalTracking(),await $(),await Te(),Ve())}),onBeforeUnmount(()=>{ce()}),onUnmounted(()=>{Fe()});const K=re=>{i.value="Video loading failed, please check your network or try again",l.value=!0},ae=()=>{b.value=!0,f.value&&!_.value&&we()},O=()=>{try{return"indexedDB"in window&&indexedDB!==void 0}catch{return!1}},D=()=>new Promise((re,Q)=>{const se=indexedDB.open(MODEL_DB_NAME,1);se.onerror=()=>Q(se.error),se.onsuccess=()=>re(se.result),se.onupgradeneeded=ue=>{const pe=se.result;pe.objectStoreNames.contains(MODEL_STORE_NAME)||pe.createObjectStore(MODEL_STORE_NAME)}}),I=async re=>{if(!(!O()||W.value&&!navigator.storage))try{if(W.value&&navigator.storage&&navigator.storage.estimate){const ge=await navigator.storage.estimate();if((ge.quota||0)-(ge.usage||0)<10*1024*1024)return}const ue=(await D()).transaction([MODEL_STORE_NAME],"readwrite").objectStore(MODEL_STORE_NAME),pe={data:re,timestamp:Date.now(),version:"1.0"};ue.put(pe,MODEL_KEY)}catch(Q){if(Q.name==="QuotaExceededError")try{(await D()).transaction([MODEL_STORE_NAME],"readwrite").objectStore(MODEL_STORE_NAME).clear()}catch{}}},U=async()=>{if(!O())return null;try{const ue=(await D()).transaction([MODEL_STORE_NAME],"readonly").objectStore(MODEL_STORE_NAME).get(MODEL_KEY),pe=await new Promise((ge,Se)=>{ue.onsuccess=()=>ge(ue.result),ue.onerror=()=>Se(ue.error)});return pe?{data:pe.data,timestamp:pe.timestamp}:null}catch{return null}},C=()=>{const re=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return re&&re.effectiveType||"unknown"},G=()=>navigator.onLine!==void 0?navigator.onLine:!0,H=async()=>{if(B)return B;try{if(O()){const se=await U();if(se){const ue=C(),pe=ue==="slow-2g"||ue==="2g",ge=!G(),Se=pe?60*24*60*60*1e3:W.value?30*24*60*60*1e3:7*24*60*60*1e3;if(!(Date.now()-se.timestamp>Se)||ge){const ee=new onnx_minExports.InferenceSession;return await ee.loadModel(new Uint8Array(se.data)),B=ee,ee}}}const re=new onnx_minExports.InferenceSession,Q=["https://ipfs.io/ipfs/QmX1fSrAxBJRjpb7LX9SpmaJ4ZtKW5mqBLAwT6NjYnfuSi?filename=model.onnx"];for(const se of Q)try{const ue=await fetch(se);if(!ue.ok)throw new Error(`HTTP ${ue.status}`);const pe=await ue.arrayBuffer();if(O()&&!W.value)await I(pe);else if(O()&&W.value){const ge=C();ge!=="slow-2g"&&ge!=="2g"&&await I(pe)}return await re.loadModel(new Uint8Array(pe)),B=re,re}catch{continue}throw new Error("All model URLs failed")}catch(re){throw re}},X=async()=>{try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(ue=>ue.stop()),(await navigator.mediaDevices.enumerateDevices()).filter(ue=>ue.kind==="videoinput").map((ue,pe)=>({deviceId:ue.deviceId,label:ue.label||`Camera ${pe+1}`,kind:ue.kind,groupId:ue.groupId}))}catch{return[]}},ie=async()=>{var re;try{x.value=await X(),R.setCameraDevice((re=x.value)==null?void 0:re[0]);const Q={video:{width:{ideal:W.value?320:480},height:{ideal:W.value?240:360},facingMode:"user",frameRate:{ideal:15,max:30}}};S.value&&S.value.deviceId&&(Q.video.deviceId={exact:S.value.deviceId});const se=await navigator.mediaDevices.getUserMedia(Q);h.value&&(h.value.srcObject=se),R.setCameraPermissions(!0),x.value.length>0&&(S.value=x.value[0])}catch{R.setCameraPermissions(!1),i.value="Unable to access camera, please check permission settings";try{const se=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:W.value?320:480},height:{ideal:W.value?240:360},facingMode:"user",frameRate:{ideal:W.value?10:15,max:W.value?15:30}}});h.value&&(h.value.srcObject=se),R.setCameraPermissions(!0)}catch{}}},$=async()=>{if(!r.value)try{n.value=!0,N=await H(),r.value=!0,n.value=!1,l.value=!1}catch{i.value="Failed to load emotion detection model",n.value=!1,l.value=!0}},te=async re=>{if(o.value||!N)return{max:-1,predictions:[]};try{const Q=new onnx_minExports.Tensor(re,"float32",[1,1,48,48]),ue=(await N.run([Q])).values().next().value,pe=Array.from(ue.data),ge=Math.max(...pe);return{max:pe.findIndex(Y=>Y===ge),predictions:pe}}catch{return{max:-1,predictions:[]}}},le=(re,Q)=>F?(F.drawImage(Q,re.x,re.y,re.width,re.height,0,0,48,48),F.getImageData(0,0,48,48)):null,J=re=>{const Q=[],{data:se,width:ue,height:pe}=re;for(let ge=0;ge<ue*pe*4;ge+=4){const Se=.299*se[ge]+.587*se[ge+1]+.114*se[ge+2];Q.push(Se)}return new Float32Array(Q)},Te=()=>{k||(k=document.createElement("canvas"),k.width=48,k.height=48,F=k.getContext("2d"),F&&(F.imageSmoothingEnabled=!1,F.imageSmoothingQuality="low"))},me=()=>{if(!d.value||!h.value||d.value.paused||d.value.ended||h.value.paused||h.value.ended||m.value||t.value)return;const re=d.value.currentTime,Q=Math.floor(re);Q>e.value&&(e.value=Q)},he=()=>{!d.value.paused&&!d.value.ended&&(z.value=d.value.currentTime),throttle(me)},ye=()=>{m.value=!0,t.value=!0,w.value=-1,R.setVideoCompleted(!1),R.setCameraPermissions(!0),R.setEmotionDetectionStatus(0),ce()},fe=(re,Q)=>{const se=Q.getContext("2d");return se?function(pe){var Y,ee,de;if((Y=d.value)!=null&&Y.ended){R.setCameraPermissions(!1),R.setEmotionDetectionStatus(0),R.setVideoCompleted(!1),ce();return}if(o.value||(ee=d.value)!=null&&ee.ended||(de=d.value)!=null&&de.paused)return;const ge=performance.now();if(ge-j<PROCESS_INTERVAL)return;j=ge;const Se=pe.data;Se.length===0?R.setEmotionDetectionStatus(2):R.setEmotionDetectionStatus(1),M&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{if(o.value)return;se.clearRect(0,0,Q.width,Q.height),se.drawImage(re,0,0,Q.width,Q.height),se.strokeStyle="#00ff00",se.lineWidth=2;let be=0;d.value&&(be=d.value.currentTime);const ve=Math.abs(be-(y.value||0))<.001;Se.length===0&&(A.value=null,ve||R.setDstributionData(new Array(7).fill(null))),Se.forEach(async _e=>{if(!o.value)try{se.strokeRect(_e.x,_e.y,_e.width,_e.height);const Pe=le(_e,Q);if(!Pe)return;const ke=J(Pe),Ie=await te(ke),Ce=Ie.predictions.map(Ue=>parseFloat(new Decimal(Ue).mul(100).toFixed(6,Decimal.ROUND_DOWN)));ve||R.setDstributionData(Ce),A.value=Ie;return}catch{}}),d.value&&(y.value=d.value.currentTime),M=null})}:()=>{}},ce=()=>{h.value&&h.value.srcObject&&(h.value.srcObject.getTracks().forEach(Q=>{try{Q.stop()}catch{}}),h.value.srcObject=null),d.value&&d.value.srcObject&&(d.value.srcObject.getTracks().forEach(Q=>{try{Q.stop()}catch{}}),d.value.srcObject=null)},we=async(re=0)=>{if(!ne.value||!h.value||!c.value)return re<5?(await new Promise(Q=>setTimeout(Q,200)),we(re+1)):void 0;try{if(typeof ne.value.ObjectTracker!="function")throw new Error("ObjectTracker is not a function");const Q=new ne.value.ObjectTracker("face");Q.setInitialScale(4),Q.setStepSize(2),Q.setEdgesDensity(.1),ne.value.track(h.value,Q),L=fe(h.value,c.value),Q.on("track",L),_.value=!0}catch{re<3?setTimeout(()=>{we(re+1)},1e3):i.value="Failed to initialize face tracker"}},xe=()=>{d.value&&(Ee(),q.value=d.value.duration)},Ee=()=>{if(!d.value)return;const re=Math.floor(d.value.duration);isNaN(re)||re<=0||(T.value=re,R.setVideoTotalTime(re),E.value=new Array(re).fill(null))},Ae=async()=>{if(!(!h.value||!d.value)){d.value.ended&&(m.value=!1,w.value=-1,y.value=0),d.value.currentTime>=d.value.duration&&(d.value.currentTime=0),R.setIsRetest(!1);try{const re=d.value.play(),Q=h.value.play();await Promise.all([re,Q]),t.value=!1}catch{}}},De=()=>{try{const re={agreed:f.value,timestamp:Date.now()};localStorage.setItem(PREFERENCES_KEY,JSON.stringify(re))}catch{}},Le=()=>{try{const re=localStorage.getItem(PREFERENCES_KEY);if(re){const Q=JSON.parse(re),se=Date.now()-Q.timestamp>30*24*60*60*1e3;if(!se&&Q.agreed)return!0;se&&localStorage.removeItem(PREFERENCES_KEY)}}catch{}return!1},Oe=(re,Q)=>{try{const se=`${ANALYSIS_CACHE_PREFIX}-${re}`,ue={data:Q,timestamp:Date.now()};sessionStorage.setItem(se,JSON.stringify(ue))}catch{}},Me=re=>{try{const Q=`${ANALYSIS_CACHE_PREFIX}-${re}`,se=sessionStorage.getItem(Q);if(se){const ue=JSON.parse(se);if(Date.now()-ue.timestamp>60*60*1e3)sessionStorage.removeItem(Q);else return ue.data}}catch{}return null},je=async()=>{m.value=!1,t.value=!0,e.value=-1,w.value=-1,y.value=0,A.value=null,E.value=[],R.setDstributionData([]),R.setVisionChatData([]),R.setEmotionDetectionStatus(0),R.setVideoCompleted(!1),R.setIsRetest(!0),d.value&&(d.value.currentTime=0,d.value.pause()),ce(),await Be(),f.value=!1,b.value=!1,_.value=!1},Ne=()=>{debounce(je(),300)},Re=async()=>{R.setVideoCompleted(!0),R.setIsRetest(!0),R.setVisionChatData([]),R.setDstributionData([]),p.value=!1,f.value=!0,De(),await ie(),Ae()},Ve=()=>{var re;if((re=g.data)!=null&&re.video)try{const Q=document.createElement("video");Q.src=g.data.video,Q.preload="auto",Q.muted=!0,Q.style.display="none",Q.addEventListener("loadeddata",()=>{document.body.removeChild(Q)}),Q.addEventListener("error",se=>{document.body.removeChild(Q)}),document.body.appendChild(Q)}catch{}},Be=async()=>{var Q;if(!((Q=g.data)!=null&&Q.id))return;const re=Me(g.data.id);if(re){u.value=re;return}try{const se=await visionChatHistory();if(se.code===200){const ue=se.data.filter(pe=>{var ge;return pe.vision_id===((ge=g.data)==null?void 0:ge.id)});u.value=ue||[],ue&&ue.length>0&&Oe(g.data.id,ue)}}catch{}},Fe=()=>{o.value=!0,M&&cancelAnimationFrame(M),R.setVisionChatData([]),R.setDstributionData([]),R.setEmotionDetectionStatus(0),R.setVideoTotalTime(0),k&&(k.width=0,k.height=0,k=null),N&&(N=null),L&&(L=null)};return s({restartTest:Ne}),onMounted(()=>{Le()}),(re,Q)=>{var ue,pe,ge,Se,Y,ee,de;const se=_sfc_main$8;return openBlock(),createElementBlock("div",_hoisted_1$7,[createVNode(Transition,{name:"face-detection-fade"},{default:withCtx(()=>[unref(R).getEmotionDetectionStatus===2&&("isEmpty"in re?re.isEmpty:unref(isEmpty))(unref(i))?(openBlock(),createElementBlock("div",_hoisted_2$7,_hoisted_7$6)):createCommentVNode("",!0)]),_:1}),unref(n)?(openBlock(),createElementBlock("div",_hoisted_8$6,[createVNode(unref(RefreshCw),{class:"animate-spin mb-4 text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",size:40}),_hoisted_9$6])):(openBlock(),createElementBlock(Fragment,{key:1},[unref(l)?(openBlock(),createElementBlock("div",_hoisted_10$6,[_hoisted_11$6,createBaseVNode("span",_hoisted_12$6,toDisplayString(unref(i)),1)])):(openBlock(),createElementBlock("div",_hoisted_13$4,[unref(f)?(openBlock(),createElementBlock("div",{key:0,class:"w-full h-full",onMouseenter:Q[0]||(Q[0]=be=>a.value=!0),onMouseleave:Q[1]||(Q[1]=be=>a.value=!1)},[createBaseVNode("video",{ref_key:"blackVideoElement",ref:d,controls:!1,preload:"auto",playsinline:"",disablePictureInPicture:"",class:"w-full h-full object-contain absolute top-0 left-0",src:(ue=g.data)==null?void 0:ue.video,poster:"",onLoadedmetadata:xe,onTimeupdate:he,onEnded:ye,onError:K,onPlay:ae},[createBaseVNode("source",{src:(pe=g.data)==null?void 0:pe.video,type:"video/mp4"},null,8,_hoisted_15$4),_hoisted_16$4],40,_hoisted_14$4),unref(m)?(openBlock(),createElementBlock("div",_hoisted_17$4," THE END ")):createCommentVNode("",!0),unref(m)?createCommentVNode("",!0):(openBlock(),createBlock(Transition,{key:1,name:"progress-fade"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_18$3,[createBaseVNode("div",_hoisted_19$2,[createBaseVNode("div",{class:"h-full bg-[#EBEBEB] transition-all duration-300",style:normalizeStyle({width:unref(Z)+"%"})},null,4)],512),createBaseVNode("div",_hoisted_20$2,[createBaseVNode("span",null,toDisplayString(oe(unref(z))),1),createBaseVNode("span",null,toDisplayString(oe(unref(q))),1)])],512),[[vShow,unref(a)]])]),_:1})),createBaseVNode("div",_hoisted_21$2,[createBaseVNode("video",{ref_key:"videoElement",ref:h,class:"w-full h-full absolute top-0 left-0",muted:"",playsinline:""},null,512),createBaseVNode("canvas",{ref_key:"overlayCanvas",ref:c,class:"w-full h-full absolute top-0 left-0"},null,512)])],32)):(openBlock(),createElementBlock("div",_hoisted_22$2,[((ge=g.data)==null?void 0:ge.burn_user)>0&&unref(u)&&unref(u).length!==0?(openBlock(),createElementBlock("div",_hoisted_23$2,[_hoisted_24$2,createBaseVNode("div",_hoisted_25$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(u),(be,ve)=>(openBlock(),createElementBlock("div",{key:ve},[be.vision_report?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(marked)(be.vision_report),class:"break-words"},null,8,_hoisted_26$2)):createCommentVNode("",!0)]))),128))]),((Se=g.data)==null?void 0:Se.burn_user)<((Y=g.data)==null?void 0:Y.ticket_limit)?(openBlock(),createElementBlock("label",_hoisted_27$1,[createBaseVNode("div",{class:normalizeClass(["w-4 h-4 border border-white/50 flex items-center justify-center transition-colors",unref(f)?"bg-white shadow-[0_0_10px_white]":"group-hover:border-white"])},[unref(f)?(openBlock(),createElementBlock("div",_hoisted_28$1)):createCommentVNode("",!0)],2),createBaseVNode("input",{type:"checkbox",class:"hidden",checked:unref(f),onChange:Q[2]||(Q[2]=()=>p.value=!0)},null,40,_hoisted_29$1),createBaseVNode("span",_hoisted_30$1," [Collect again] "+toDisplayString((ee=g.data)==null?void 0:ee.burn_user)+"/"+toDisplayString((de=g.data)==null?void 0:de.ticket_limit),1)])):createCommentVNode("",!0)])):(openBlock(),createElementBlock("label",_hoisted_31$1,[createBaseVNode("div",{class:normalizeClass(["w-4 h-4 border border-white/50 flex items-center justify-center transition-colors",unref(f)?"bg-white shadow-[0_0_10px_white]":"group-hover:border-white"])},[unref(f)?(openBlock(),createElementBlock("div",_hoisted_32$1)):createCommentVNode("",!0)],2),createBaseVNode("input",{type:"checkbox",class:"hidden",checked:unref(f),onChange:Q[3]||(Q[3]=()=>p.value=!0)},null,40,_hoisted_33$1),_hoisted_34$1]))]))]))],64)),unref(p)?(openBlock(),createBlock(se,{key:2,"onUpdate:close":Q[4]||(Q[4]=be=>p.value=!1),"onUpdate:accept":Re})):createCommentVNode("",!0)])}}}),EmotionDetection_vue_vue_type_style_index_0_scoped_476af87e_lang="",__nuxt_component_6=_export_sfc(_sfc_main$7,[["__scopeId","data-v-476af87e"]]),_hoisted_1$6=createBaseVNode("div",{id:"segmentedLineChart",class:"w-full h-full"},null,-1),_hoisted_2$6={class:"absolute top-3 right-3 text-right z-10"},_hoisted_3$6=createBaseVNode("div",{class:"label"},"Primary Emotion",-1),_hoisted_4$6={class:"flex items-end justify-end space-x-1"},_hoisted_5$6=createBaseVNode("div",{class:"label"},"Secondary Emotion",-1),_hoisted_6$6={class:"flex items-end justify-end space-x-1"},_sfc_main$6=defineComponent({__name:"SegmentedLineChart",props:{data:{default:()=>[]}},setup(v){const{$eChart:s}=useNuxtApp(),g=["Angry","Disgust","Fear","Happy","Neutral","Sad","Surprise"],d={Angry:{color:"#FF003C"},Disgust:{color:"#00FF41"},Fear:{color:"#8F00FF"},Happy:{color:"#FF0099"},Neutral:{color:"#EEEEEE"},Sad:{color:"#00E5FF"},Surprise:{color:"#FFE600"}},h=ref([]),c=useEmotionalDstributionPinia(),p=shallowRef(null),f=ref(null),u=ref(null),a=ref(null),o=ref(null),r=reactive({totalTimePoints:0,currentIndex:0,isAnimating:!1,animationProgress:0,animationSteps:20,baseTime:new Date,timePoints:[],pointValues:[],displayDatas:[],progressMarkAreas:[],progressColor:"blue"}),e=ref({mainNum:0,mainName:"--",mainColor:"",secondaryNum:0,secondaryName:"--",secondaryColor:""}),t=B=>{if(!Array.isArray(B)||B.length!==7)return;const V=Math.max(...B.filter(R=>R!==null))||0;if(V>0){const R=B.indexOf(V),z=g[R],Z=[...B].filter(W=>W!==null).sort((W,K)=>(K||0)-(W||0))[1]||0,oe=B.indexOf(Z),ne=g[oe];e.value={mainNum:Math.round(V),mainName:z,mainColor:d[z].color,secondaryNum:Math.round(Z),secondaryName:ne,secondaryColor:d[ne].color}}else n()},n=()=>{e.value={mainNum:0,mainName:"--",mainColor:"",secondaryNum:0,secondaryName:"--",secondaryColor:""}};watch(()=>c.getIsRetest,B=>{B&&(k(),n())}),watch(()=>c.getDstributionData,B=>{isEmpty(B)||!Array.isArray(B)||B.length!==7||(t(B),h.value.push([...B]),c.setVisionChatData(JSON.stringify(h.value)),p.value&&i(B))},{deep:!0,immediate:!0});const i=B=>{const V=B.every(R=>R===null);r.progressColor=V?"red":"blue";for(let R=0;R<7;R++)r.pointValues[R].push(B[R]);if(r.displayDatas[0].length<=r.currentIndex)for(let R=0;R<7;R++)r.displayDatas[R].push([r.timePoints[r.currentIndex],r.pointValues[R][r.currentIndex]]);l(),r.isAnimating||m(),r.currentIndex<r.totalTimePoints-1&&(r.currentIndex++,r.isAnimating=!0,r.animationProgress=0)},l=()=>{if(r.currentIndex>0&&r.timePoints.length>0){if(r.progressMarkAreas.length>0){const R=r.progressMarkAreas[r.progressMarkAreas.length-1];R[1].xAxis=r.timePoints[Math.min(r.currentIndex,r.timePoints.length-1)]}const B=r.progressMarkAreas.length>0?r.progressMarkAreas[r.progressMarkAreas.length-1][0].itemStyle.color:null,V=r.progressColor==="red"?"#2b2b2b":"transparent";(B!==V||r.progressMarkAreas.length===0)&&r.progressMarkAreas.push([{itemStyle:{color:V},xAxis:r.timePoints[Math.min(r.currentIndex,r.timePoints.length-1)]},{xAxis:r.timePoints[Math.min(r.currentIndex,r.timePoints.length-1)]}])}},m=()=>{try{const B=[];for(let V=0;V<7;V++){const R=g[V],z=d[R];B.push({name:R,type:"line",showSymbol:!1,data:r.displayDatas[V].slice(0,r.currentIndex+1),animation:!1,lineStyle:{width:2,color:z.color},zlevel:1,z:1})}B.push({type:"line",showSymbol:!1,data:[],markArea:{silent:!0,data:r.progressMarkAreas,zlevel:2,z:2,animation:{duration:50,easing:"linear"}},zlevel:2,z:2}),p.value.setOption({series:B})}catch{}};watch(()=>c.getVideoTotalTime,B=>{_()},{deep:!0});const y=(B,V)=>{const R=parseInt(B.slice(1,3),16),z=parseInt(B.slice(3,5),16),q=parseInt(B.slice(5,7),16);return`rgba(${R}, ${z}, ${q}, ${V})`},_=async()=>{b(),p.value&&(p.value.dispose(),p.value=null);const B=document.getElementById("segmentedLineChart");if(!B||B.clientWidth===0||B.clientHeight===0)return;p.value=s.init(B),w(),x(),S(),A();const V=T();p.value.setOption(V,!0),E()},b=()=>{u.value&&clearInterval(u.value),a.value&&clearInterval(a.value)},w=()=>{r.totalTimePoints=c.getVideoTotalTime,r.currentIndex=0,r.isAnimating=!1,r.animationProgress=0,r.baseTime=new Date},x=()=>{r.timePoints=[];for(let B=0;B<r.totalTimePoints;B++)r.timePoints.push(new Date(r.baseTime.getTime()+B*1e3))},S=()=>{r.pointValues=Array(7).fill(null).map(()=>[]),r.displayDatas=Array(7).fill(null).map(()=>[]);for(let B=0;B<7;B++)r.displayDatas[B].push([r.timePoints[0],null]),r.pointValues[B].push(null)},A=()=>{r.progressMarkAreas=[[{itemStyle:{color:"transparent"},xAxis:r.timePoints[0]},{xAxis:r.timePoints[0]}]]},T=()=>{const B=[{show:!1,type:"slider",filterMode:"none",xAxisIndex:[0],start:0,end:100}],V=[];for(let R=0;R<7;R++){const z=g[R],q=d[z];V.push({name:z,type:"line",showSymbol:!1,data:r.displayDatas[R],animation:!1,lineStyle:{width:2,color:q.color},zlevel:-1,z:-1})}return V.push({type:"line",showSymbol:!1,data:[],markArea:{silent:!0,data:r.progressMarkAreas,zlevel:2,z:2,animation:{duration:1e3,easing:"linear"}},zlevel:2,z:2}),{grid:{top:"8%",left:"0%",right:"0%",bottom:"2%",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,0.8)",borderColor:"#00f0ff",textStyle:{color:"#fff",fontFamily:"Orbitron",fontSize:12},axisPointer:{type:"cross",label:{backgroundColor:"#00f0ff",color:"#000"}},order:"valueDesc",appendToBody:!0,confine:!1,extraCssText:"z-index: 9999;",valueFormatter:R=>R==null?"-":`${Math.round(R*1e8)/1e8}`},xAxis:{type:"time",show:!1,splitLine:{show:!1},axisLine:{onZero:!1},axisLabel:{show:!1,formatter:R=>{const z=Math.floor(R/1e3),q=Math.floor(z/60),Z=z%60;return`${q.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`}},min:r.timePoints[0],max:r.timePoints[r.timePoints.length-1]},yAxis:{show:!1,min:0,max:100},dataZoom:B,series:V}},E=()=>{u.value=window.setInterval(()=>{p.value&&r.isAnimating&&r.currentIndex>=1&&(r.animationProgress++,r.animationProgress<=r.animationSteps?N():r.isAnimating=!1)},50)},N=()=>{const B=r.animationProgress/r.animationSteps,V=r.timePoints[r.currentIndex-1],R=r.timePoints[r.currentIndex],z=new Date(V.getTime()+Math.min(1,Math.max(0,B))*(R.getTime()-V.getTime()));let q=!1;for(let Z=0;Z<7;Z++){const oe=r.pointValues[Z][r.currentIndex-1],ne=r.pointValues[Z][r.currentIndex];let W=M(oe,ne,B);r.displayDatas[Z].length>r.currentIndex?r.displayDatas[Z][r.currentIndex][1]!==W&&(r.displayDatas[Z][r.currentIndex]=[z,W],q=!0):r.displayDatas[Z].length===r.currentIndex&&(r.displayDatas[Z].push([z,W]),q=!0)}if(r.progressMarkAreas.length>0){const Z=r.progressMarkAreas[r.progressMarkAreas.length-1];Z[1].xAxis=z}q&&j()},M=(B,V,R)=>B===null&&V===null?null:B===null?V:V===null?B:B!==void 0&&V!==void 0?B+(V-B)*R||null:B!==void 0?B:V,j=()=>{try{const B=[];for(let V=0;V<7;V++){const R=g[V],z=d[R];e.value.mainName&&e.value.mainName!=="--"&&(o.value=e.value.mainName);const q=o.value===R;B.push({name:R,type:"line",showSymbol:!1,data:r.displayDatas[V].slice(0,r.currentIndex+1),animation:!1,symbol:q?"rect":"none",lineStyle:{width:q?3:2.5,color:z.color,opacity:q?1:.2,shadowColor:z.color,shadowBlur:q?25:0},itemStyle:{color:z.color},areaStyle:{opacity:1,color:new s.graphic.LinearGradient(0,0,0,1,[{offset:0,color:q?y(z.color,.5):"transparent"},{offset:.8,color:"transparent"}])},zlevel:-1,z:-1})}B.push({type:"line",showSymbol:!1,data:[],markArea:{silent:!0,data:r.progressMarkAreas,zlevel:2,z:2,animation:{duration:50,easing:"linear"}},zlevel:2,z:2}),p.value.setOption({series:B})}catch{}},k=()=>{h.value=[],r.currentIndex=0,r.isAnimating=!1,r.animationProgress=0,r.timePoints=[],r.pointValues=Array(7).fill(null).map(()=>[]),r.displayDatas=Array(7).fill(null).map(()=>[]),r.progressMarkAreas=[],_()},F=()=>{p.value&&(f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{p.value&&p.value.resize()},300))};onMounted(async()=>{await nextTick(),window.addEventListener("resize",F,{passive:!0})});const L=()=>{if(u.value&&clearInterval(u.value),a.value&&clearInterval(a.value),p.value){try{p.value.dispose()}catch{}p.value=null}f.value&&clearTimeout(f.value)};return onBeforeUnmount(()=>{L()}),(B,V)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$6,createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",null,[_hoisted_3$6,createBaseVNode("div",_hoisted_4$6,[createBaseVNode("span",{class:"text-[8px] font-[500]",style:normalizeStyle({color:unref(e).mainColor})},toDisplayString(unref(e).mainName),5),createBaseVNode("span",{class:"text-[10px] font-[600]",style:normalizeStyle({color:unref(e).mainColor,textShadow:`0 0 10px ${unref(e).mainColor}`})},toDisplayString(unref(e).mainNum)+"% ",5)])]),createBaseVNode("div",null,[_hoisted_5$6,createBaseVNode("div",_hoisted_6$6,[createBaseVNode("span",{class:"text-[8px] font-[500]",style:normalizeStyle({color:unref(e).secondaryColor})},toDisplayString(unref(e).secondaryName),5),createBaseVNode("span",{class:"text-[10px] font-[600]",style:normalizeStyle({color:unref(e).secondaryColor,textShadow:`0 0 10px ${unref(e).secondaryColor}`})},toDisplayString(unref(e).secondaryNum)+"% ",5)])])])],64))}}),SegmentedLineChart_vue_vue_type_style_index_0_lang="",_withScopeId$2=v=>(pushScopeId("data-v-936ac3ea"),v=v(),popScopeId(),v),_hoisted_1$5={class:"flex justify-between items-center mb-4 border-b border-white/10 pb-2"},_hoisted_2$5=_withScopeId$2(()=>createBaseVNode("span",{class:"text-[10px] text-gray-500 uppercase tracking-widest font-mono"},"Parameters",-1)),_hoisted_3$5={class:"w-full flex items-center gap-3 mb-4"},_hoisted_4$5={class:"w-10 h-10 border border-white/20 bg-white/5 flex items-center justify-center clip-corner-tl"},_hoisted_5$5={class:"flex-1 h-10 relative border border-white/20 bg-black flex items-center pl-4 space-x-2 justify-between cursor-pointer hover:border-white/60 transition-colors clip-corner-br group"},_hoisted_6$5={class:"font-display text-white text-xl tracking-wider group-hover:text-glow"},_hoisted_7$5={class:"text-[#EBEBEB]"},_hoisted_8$5=_withScopeId$2(()=>createBaseVNode("span",{class:"uppercase"},"give as a gift",-1)),_hoisted_9$5={class:"flex items-center text-[#606266]"},_hoisted_10$5={key:1},_hoisted_11$5={key:0,class:"iconfont icon-tick text-[#EBEBEB] text-[8px]"},_hoisted_12$5={key:1,class:"iconfont icon-del text-[#EBEBEB] text-[8px]"},_sfc_main$5=defineComponent({__name:"TicketSelector",props:{ticketCdk:{default:""},data:{default:{}}},emits:["update:selectTickeSuccess","update:openDetails","update:openBuyTicket"],setup(v,{emit:s}){const g=v,d=useUserPinia(),h=ref([]),c=ref(null),p=ref(""),f=ref(),u=useEmotionalDstributionPinia();watch(()=>g.ticketCdk,n=>{n||(p.value="",f.value="",c.value>0&&t())},{immediate:!0}),watch(()=>u.getIsRetest,n=>{n&&setTimeout(()=>{p.value="",f.value="",h.value&&c.value>0&&(p.value=h.value[0].cdkey,s("update:selectTickeSuccess",p.value))},3e3)},{immediate:!0,deep:!0});const a=()=>{if(f.value="",p.value){const n=checkValidateTicket(p.value);n?(f.value="success",s("update:selectTickeSuccess",p.value)):(f.value="error",s("update:selectTickeSuccess","")),n||ElMessage.warning("CD key is invalid")}},o=()=>{f.value==="error"&&(f.value="",p.value="",s("update:selectTickeSuccess",""))},r=n=>{p.value=n.target.value,p.value?checkValidateTicket(p.value)?(f.value="success",s("update:selectTickeSuccess",p.value)):(f.value="error",s("update:selectTickeSuccess","")):(f.value="",s("update:selectTickeSuccess",""))},e=()=>{f.value="",s("update:selectTickeSuccess","")},t=async()=>{try{if(!d.getToken)return;const n=await ticketBoxList();n.code===200&&(h.value=n.data,c.value=n.total)}catch{}};return onMounted(async()=>{if(await t(),h.value&&c.value>0){const n=c.value===1?0:1;p.value=h.value[n].cdkey,s("update:selectTickeSuccess",p.value)}}),(n,i)=>{const l=__nuxt_component_3,m=ElTooltip,y=ElOption,_=ElSelect;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$5,[_hoisted_2$5,createVNode(unref(Zap),{size:10,class:"text-white animate-pulse cursor-pointer",onClick:t})]),createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$5,[createVNode(unref(Ticket),{size:14,class:"text-gray-300"})]),createBaseVNode("div",_hoisted_5$5,[unref(c)>0||("isEmpty"in n?n.isEmpty:unref(isEmpty))(unref(c))?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_6$5,toDisplayString(unref(c)),1),createVNode(_,{class:"w-full h-10 absolute top-1 left-0",style:{width:"100%",height:"40px",border:"none"},onChange:a,onInput:i[0]||(i[0]=b=>r(b)),onFocus:i[1]||(i[1]=b=>t()),onClear:e,clearable:"",modelValue:unref(p),"onUpdate:modelValue":i[2]||(i[2]=b=>isRef(p)?p.value=b:null),filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"TICKETS"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(h),b=>(openBlock(),createBlock(y,{key:b.cdkey,label:b.cdkey,value:b.cdkey},{default:withCtx(()=>[b.gift===1?(openBlock(),createBlock(m,{key:0,placement:"right",effect:"dark"},{content:withCtx(()=>[createBaseVNode("div",_hoisted_7$5,[createBaseVNode("span",null,toDisplayString(b.buyer_username)+"("+toDisplayString(b.buyer_userid)+") ",1),_hoisted_8$5])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_9$5,[createBaseVNode("span",null,toDisplayString(b.cdkey),1),createVNode(l,{class:"scale-90"})])]),_:2},1024)):(openBlock(),createElementBlock("span",_hoisted_10$5,toDisplayString(b.cdkey),1))]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),unref(f)?(openBlock(),createElementBlock("div",{key:0,onClick:o,class:normalizeClass([unref(f)==="success"?"bg-green-500":"bg-red-500 cursor-pointer","w-3 h-3 absolute top-1/2 -translate-y-1/2 right-5 flex items-center justify-center rounded-full"])},[unref(f)==="success"?(openBlock(),createElementBlock("span",_hoisted_11$5)):(openBlock(),createElementBlock("span",_hoisted_12$5))],2)):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock("div",{key:1,onClick:i[3]||(i[3]=b=>s("update:openBuyTicket")),class:"w-full h-10 cursor-pointer font-[500] flex items-center justify-center text-gray-500 uppercase u-line-1"}," BUY Ticket "))])])],64)}}}),TicketSelector_vue_vue_type_style_index_0_scoped_936ac3ea_lang="",__nuxt_component_8=_export_sfc(_sfc_main$5,[["__scopeId","data-v-936ac3ea"]]),_hoisted_1$4={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4"},_hoisted_2$4={class:"bg-black border border-white/20 w-full max-w-3xl p-8 relative shadow-[0_0_50px_rgba(255,255,255,0.05)]"},_hoisted_3$4=createBaseVNode("div",{class:"absolute top-0 left-0 w-8 h-8 border-t border-l border-white/50"},null,-1),_hoisted_4$4=createBaseVNode("div",{class:"absolute bottom-0 right-0 w-8 h-8 border-b border-r border-white/50"},null,-1),_hoisted_5$4=createBaseVNode("span",{class:"iconfont icon-del text-[20px]"},null,-1),_hoisted_6$4=[_hoisted_5$4],_hoisted_7$4=createBaseVNode("h2",{class:"font-display text-3xl mb-8 text-white uppercase tracking-widest border-b border-white/10 pb-4"}," Protocols // Vision ",-1),_hoisted_8$4={class:"space-y-6 text-gray-400 text-sm font-mono leading-relaxed"},_hoisted_9$4=createBaseVNode("p",null,[createBaseVNode("span",{class:"text-white font-bold mr-2"},"01."),createTextVNode(" Users will watch a video (camera access required), and the GAEA system will record your emotional responses while watching, identifying facial reactions. Data collection requires keeping your face within the camera's recognizable range as much as possible. ")],-1),_hoisted_10$4=createBaseVNode("span",{class:"text-white font-bold mr-2"},"02.",-1),_hoisted_11$4={class:"text-white border-b border-white/30 mx-1"},_hoisted_12$4=createBaseVNode("span",{class:"text-white font-bold mr-2"},"03.",-1),_hoisted_13$3={class:"text-white mx-1"},_hoisted_14$3={class:"text-white mx-1"},_hoisted_15$3={class:"text-white mx-1"},_hoisted_16$3=createBaseVNode("span",{class:"text-white font-bold mr-2"},"04.",-1),_hoisted_17$3={class:"text-white mx-1"},_hoisted_18$2={class:"mt-10 flex justify-end"},_sfc_main$4=defineComponent({__name:"RulesModal",props:{data:{default:{}}},emits:["update:closeDialog"],setup(v,{emit:s}){const g=v;return(d,h)=>{var c,p,f,u,a;return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[_hoisted_3$4,_hoisted_4$4,createBaseVNode("div",{onClick:h[0]||(h[0]=o=>s("update:closeDialog")),class:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors cursor-pointer"},_hoisted_6$4),_hoisted_7$4,createBaseVNode("div",_hoisted_8$4,[_hoisted_9$4,createBaseVNode("p",null,[_hoisted_10$4,createTextVNode(" Each participation requires a certain fee or training ticket. Each training session will package "),createBaseVNode("span",_hoisted_11$4,toDisplayString(((c=g.data)==null?void 0:c.period_ticket)||0)+" pieces",1),createTextVNode(" of facial data as one training set. ")]),createBaseVNode("p",null,[_hoisted_12$4,createTextVNode(" Each training set will release "),createBaseVNode("span",_hoisted_13$3,toDisplayString(((p=g.data)==null?void 0:p.total_sxp)||0)+" SXP",1),createTextVNode(" and "),createBaseVNode("span",_hoisted_14$3,toDisplayString(((f=g.data)==null?void 0:f.total_soul)||0)+" SP",1),createTextVNode(" as rewards. The top ten participants with the highest rewards will share "),createBaseVNode("span",_hoisted_15$3,toDisplayString(((u=g.data)==null?void 0:u.period_usd)/1e6||0)+"U",1),createTextVNode(" in rewards proportionally. ")]),createBaseVNode("p",null,[_hoisted_16$3,createTextVNode(" Each user can participate up to "),createBaseVNode("span",_hoisted_17$3,toDisplayString(((a=g.data)==null?void 0:a.ticket_limit)||0)+" times",1),createTextVNode(" in one training set. ")])]),createBaseVNode("div",_hoisted_18$2,[createBaseVNode("div",{onClick:h[1]||(h[1]=o=>s("update:closeDialog")),class:"px-8 py-2 cursor-pointer border border-white/30 text-white text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors"}," Acknowledge ")])])])}}}),_hoisted_1$3={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4"},_hoisted_2$3={class:"bg-black border border-white/20 w-full max-w-5xl p-8 relative shadow-[0_0_50px_rgba(255,255,255,0.05)]"},_hoisted_3$3=createBaseVNode("div",{class:"absolute top-0 left-0 w-8 h-8 border-t border-l border-white/50"},null,-1),_hoisted_4$3=createBaseVNode("div",{class:"absolute bottom-0 right-0 w-8 h-8 border-b border-r border-white/50"},null,-1),_hoisted_5$3=createBaseVNode("span",{class:"iconfont icon-del text-[20px]"},null,-1),_hoisted_6$3=[_hoisted_5$3],_hoisted_7$3={class:"text-gray-400 text-sm font-mono leading-relaxed flex justify-between space-x-4 mt-5"},_hoisted_8$3={class:"flex-1 flex flex-col"},_hoisted_9$3=createBaseVNode("h2",{class:"font-display text-2xl text-center py-3 text-white uppercase tracking-widest"}," Emotional coordinates  Visual ",-1),_hoisted_10$3={class:"w-fit mx-auto flex items-center justify-center space-x-1 cursor-pointer"},_hoisted_11$3={class:"w-[170px] border border-[#EBEBEB] rounded-[5px] space-x-1 space-y-1 px-4 py-1 z-10 bg-black"},_hoisted_12$3={class:"w-full flex-1 flex flex-col mt-3"},_hoisted_13$2=createBaseVNode("li",{class:"text-[#EBEBEB] text-[12px] text-left"}," Reward: ",-1),_hoisted_14$2={class:"text-[#b2aead] flex items-center space-x-1"},_hoisted_15$2=createBaseVNode("span",{class:"text-[18px]"},"",-1),_hoisted_16$2={class:"text-[#B0B0B0] text-[12px] u-line-1"},_hoisted_17$2={key:0,class:"flex justify-center space-x-2"},_hoisted_18$1={key:1,class:"w-full flex items-center justify-center mt-4"},_hoisted_19$1={class:"flex-1 border border-white/30"},_hoisted_20$1={class:"flex items-center justify-center itemfont-display space-x-1 text-2xl text-center py-3 text-white uppercase tracking-widest"},_hoisted_21$1=createBaseVNode("span",{class:"iconfont icon-gengduo"},null,-1),_hoisted_22$1=[_hoisted_21$1],_hoisted_23$1={class:""},_hoisted_24$1=createBaseVNode("span",{class:"iconfont icon-gengduo"},null,-1),_hoisted_25$1=[_hoisted_24$1],_hoisted_26$1={class:"text-[16px]"},_sfc_main$3=defineComponent({__name:"DetailsModal",props:{data:{default:{}}},emits:["update:closeDialog","update:claim"],setup(v,{emit:s}){const g=v,d=ref(!1),h=ref(!1),c=ref(1),p=ref(!0),f=reactive({content:[],contentTOP:[],claim:{soul:0,sxp:0,usd:0},totalElements:0}),u=reactive({page:1,limit:10}),a=m=>{const y=["th","st","nd","rd"],_=m%100;return m+(y[(_-20)%10]||y[_]||y[0])},o=async()=>{try{h.value=!0;const m=await visionClaimed();m.code===200?(s("update:claim",f.claim),p.value=!1):ElMessage.error(m.msg)}catch{}finally{h.value=!1}},r=async()=>{var m;try{d.value=!0;const y=await visionHistory(u.page,u.limit);y.code===200&&(f.content=y.data,f.claim=y.claim,f.totalElements=y.total,c.value=(m=g.data)==null?void 0:m.id,e())}catch{}finally{d.value=!1}},e=async()=>{try{const m=await visionTop10(c.value);m.code===200&&(f.contentTOP=m.data)}catch{}finally{d.value=!1}},t=async m=>{var y;try{d.value=!0;const _=Math.max(1,c.value+m);_!==c.value&&_<=((y=g.data)==null?void 0:y.id)&&(c.value=_,await e())}catch{}finally{d.value=!1}},n=async m=>{try{d.value=!0,c.value=m.vision_id,e()}catch{}finally{d.value=!1}},i=m=>{u.page=m,r()},l=m=>{u.limit=m,r()};return onMounted(async()=>{await r()}),(m,y)=>{var E,N;const _=_sfc_main$d,b=ElTableColumn,w=__nuxt_component_3,x=ElPopover,S=ElTable,A=ElPagination,T=vLoading;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[_hoisted_3$3,_hoisted_4$3,createBaseVNode("div",{onClick:y[0]||(y[0]=M=>s("update:closeDialog")),class:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors cursor-pointer"},_hoisted_6$3),createBaseVNode("div",_hoisted_7$3,[createBaseVNode("div",_hoisted_8$3,[_hoisted_9$3,withDirectives((openBlock(),createBlock(S,{data:unref(f).content,style:{width:"100%"},"max-height":"400px",onRowClick:n},{empty:withCtx(()=>[unref(d)?createCommentVNode("",!0):(openBlock(),createBlock(_,{key:0,title:"No records available at the moment"}))]),default:withCtx(()=>[createVNode(b,{prop:"vision_id",label:"Issue No","min-width":"100px",align:"center"}),createVNode(b,{prop:"sxp",label:"Sxp",align:"center"},{default:withCtx(M=>[createVNode(x,{placement:"right-start",title:"",width:"auto",trigger:"hover"},{reference:withCtx(()=>[createBaseVNode("div",_hoisted_10$3,[createBaseVNode("span",null,toDisplayString(M.row.sxp),1),createVNode(w)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_11$3,[createBaseVNode("ul",_hoisted_12$3,[_hoisted_13$2,(openBlock(!0),createElementBlock(Fragment,null,renderList(M.row.sxps,(j,k)=>(openBlock(),createElementBlock("li",_hoisted_14$2,[_hoisted_15$2,createBaseVNode("span",_hoisted_16$2,toDisplayString(a(k+1))+" time: "+toDisplayString(j),1)]))),256))])])]),_:2},1024)]),_:1}),createVNode(b,{prop:"soul",label:"Soul",align:"center"}),createVNode(b,{prop:"usd",label:"Usdc",align:"center"})]),_:1},8,["data"])),[[T,unref(d)]]),((E=unref(f).claim)==null?void 0:E.sxp)>0&&unref(p)?(openBlock(),createElementBlock("div",_hoisted_17$2,[withDirectives((openBlock(),createElementBlock("div",{onClick:y[1]||(y[1]=M=>("throttle"in m?m.throttle:unref(throttle))(()=>{o()})),class:"px-8 py-2 cursor-pointer border border-white/30 text-white text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors"},[createTextVNode(" Withdrawal ")])),[[T,unref(h)]])])):createCommentVNode("",!0),unref(f).totalElements>10?(openBlock(),createElementBlock("div",_hoisted_18$1,[createVNode(A,{"current-page":unref(u).page,"onUpdate:currentPage":y[2]||(y[2]=M=>unref(u).page=M),background:"",size:"small","page-size":unref(u).limit,"onUpdate:pageSize":y[3]||(y[3]=M=>unref(u).limit=M),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:unref(f).totalElements,onCurrentChange:i,onSizeChange:l},null,8,["current-page","page-size","total"])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,[createBaseVNode("div",{class:"w-5 h-5 rotate-[180deg] cursor-pointer rounded-full flex items-center justify-center text-gray-500 hover:text-white",onClick:y[4]||(y[4]=M=>("throttle"in m?m.throttle:unref(throttle))(()=>{t(-1)}))},_hoisted_22$1),createBaseVNode("span",_hoisted_23$1,toDisplayString(unref(c))+" Issue Top 10",1),unref(c)<((N=g.data)==null?void 0:N.id)?(openBlock(),createElementBlock("div",{key:0,class:"w-5 h-5 rounded-full cursor-pointer flex items-center justify-center text-gray-500 hover:text-white",onClick:y[5]||(y[5]=M=>("throttle"in m?m.throttle:unref(throttle))(()=>{t(1)}))},_hoisted_25$1)):createCommentVNode("",!0)]),withDirectives((openBlock(),createBlock(S,{data:unref(f).contentTOP,"max-height":"400px"},{empty:withCtx(()=>[unref(d)?createCommentVNode("",!0):(openBlock(),createBlock(_,{key:0,title:"No records available at the moment"}))]),default:withCtx(()=>[createVNode(b,{prop:"date",label:"Address","min-width":"130px",align:"center"},{default:withCtx(M=>[createBaseVNode("span",_hoisted_26$1,toDisplayString(("stringStar"in m?m.stringStar:unref(stringStar))({value:M.row.eth_address,characters:"****",start:4})),1)]),_:1}),createVNode(b,{prop:"sxp",label:"Sxp",align:"center"}),createVNode(b,{prop:"soul",label:"Soul",align:"center"}),createVNode(b,{prop:"usd",label:"Usdc",align:"center"})]),_:1},8,["data"])),[[T,unref(d)]])])])])])}}}),_withScopeId$1=v=>(pushScopeId("data-v-152ecfec"),v=v(),popScopeId(),v),_hoisted_1$2={class:"w-full h-full fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4"},_hoisted_2$2={class:"bg-black border border-white/20 w-full max-w-4xl p-8 relative shadow-[0_0_50px_rgba(255,255,255,0.05)]"},_hoisted_3$2=_withScopeId$1(()=>createBaseVNode("div",{class:"absolute top-0 left-0 w-8 h-8 border-t border-l border-white/50"},null,-1)),_hoisted_4$2=_withScopeId$1(()=>createBaseVNode("div",{class:"absolute bottom-0 right-0 w-8 h-8 border-b border-r border-white/50"},null,-1)),_hoisted_5$2=_withScopeId$1(()=>createBaseVNode("span",{class:"iconfont icon-del text-[20px]"},null,-1)),_hoisted_6$2=[_hoisted_5$2],_hoisted_7$2=_withScopeId$1(()=>createBaseVNode("h2",{class:"font-display text-3xl mb-8 text-white uppercase tracking-widest border-b border-white/10 pb-4"}," AI analysis results ",-1)),_hoisted_8$2={key:1,class:"flex flex-col items-center"},_hoisted_9$2=_withScopeId$1(()=>createBaseVNode("span",{class:"font-mono text-cyan-400 tracking-widest text-glow"},"Analysis of AI Results",-1)),_hoisted_10$2={key:2,class:"w-full flex items-center flex-col mt-5"},_hoisted_11$2={class:"w-full flex flex-col h-[350px] overflow-hidden ai-chart"},_hoisted_12$2={class:"w-full overflow-auto flex flex-col"},_hoisted_13$1=["innerHTML"],_hoisted_14$1={key:1,class:"cursor"},_hoisted_15$1={class:"h-3 w-full bg-black border border-white/20 p-[2px] relative mt-3 mb-4"},_hoisted_16$1=_withScopeId$1(()=>createBaseVNode("div",{class:"absolute right-0 top-0 bottom-0 w-[2px] bg-white shadow-[0_0_10px_white] z-10"},null,-1)),_hoisted_17$1={key:0,class:"text-[16px] font-[500] mb-3"},_sfc_main$2=defineComponent({__name:"AiResultsModal",props:{data:{default:{}},aiAnalysisResults:{default:{}},loading:{type:Boolean,default:!1},progress:{default:0}},emits:["update:closeDialog"],setup(v,{emit:s}){const g=v,d=ref(null);watch(()=>{var c;return(c=g.aiAnalysisResults)==null?void 0:c.content},c=>{h()},{deep:!0});const h=()=>{d.value&&d.value.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};return(c,p)=>{var f,u,a,o,r,e,t,n,i;return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[_hoisted_3$2,_hoisted_4$2,("isEmpty"in c?c.isEmpty:unref(isEmpty))((f=g.aiAnalysisResults)==null?void 0:f.code)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,onClick:p[0]||(p[0]=l=>s("update:closeDialog")),class:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors cursor-pointer"},_hoisted_6$2)),_hoisted_7$2,g.loading||("isEmpty"in c?c.isEmpty:unref(isEmpty))((u=g.aiAnalysisResults)==null?void 0:u.content)?(openBlock(),createElementBlock("div",_hoisted_8$2,[createVNode(unref(RefreshCw),{class:"animate-spin mb-4 text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",size:40}),_hoisted_9$2])):(openBlock(),createElementBlock("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,[createBaseVNode("div",_hoisted_12$2,[(a=g.aiAnalysisResults)!=null&&a.content?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(marked)((o=g.aiAnalysisResults)==null?void 0:o.content),class:"break-words x-4"},null,8,_hoisted_13$1)):createCommentVNode("",!0),((r=g.aiAnalysisResults)==null?void 0:r.code)===206?(openBlock(),createElementBlock("span",_hoisted_14$1,"_")):createCommentVNode("",!0),createBaseVNode("div",{ref_key:"chatContainer",ref:d},null,512)])]),createBaseVNode("div",_hoisted_15$1,[createBaseVNode("div",{class:"absolute inset-0 w-full h-full",style:normalizeStyle({backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.05) 4px, rgba(255,255,255,0.05) 5px)"})},null,4),createBaseVNode("div",{class:"h-full bg-white relative transition-all duration-1000 ease-out",style:normalizeStyle({width:`${g.progress||0}%`})},[_hoisted_16$1,createBaseVNode("div",{class:"w-full h-full opacity-20",style:normalizeStyle({backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 2px, #000 2px, #000 3px)"})},null,4)],4)]),((e=g.data)==null?void 0:e.burn_user)>0?(openBlock(),createElementBlock("div",_hoisted_17$1," You have completed the collection("+toDisplayString((t=g.data)==null?void 0:t.burn_user)+"/"+toDisplayString((n=g.data)==null?void 0:n.ticket_limit)+") ",1)):createCommentVNode("",!0),((i=g.aiAnalysisResults)==null?void 0:i.code)!==206?(openBlock(),createElementBlock("div",{key:1,onClick:p[1]||(p[1]=l=>s("update:closeDialog")),class:"px-8 py-2 cursor-pointer border border-white/30 text-white text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors"}," confirm ")):createCommentVNode("",!0)]))])])}}}),AiResultsModal_vue_vue_type_style_index_0_scoped_152ecfec_lang="",__nuxt_component_12=_export_sfc(_sfc_main$2,[["__scopeId","data-v-152ecfec"]]),_hoisted_1$1={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4"},_hoisted_2$1={class:"bg-black border border-white/20 w-full max-w-2xl p-8 relative shadow-[0_0_50px_rgba(255,255,255,0.05)]"},_hoisted_3$1=createBaseVNode("div",{class:"absolute top-0 left-0 w-8 h-8 border-t border-l border-white/50"},null,-1),_hoisted_4$1=createBaseVNode("div",{class:"absolute bottom-0 right-0 w-8 h-8 border-b border-r border-white/50"},null,-1),_hoisted_5$1=createBaseVNode("span",{class:"iconfont icon-del text-[20px]"},null,-1),_hoisted_6$1=[_hoisted_5$1],_hoisted_7$1=createBaseVNode("h2",{class:"font-display text-3xl mb-8 text-white uppercase tracking-widest border-b border-white/10 pb-4"}," Reward Withdrawal ",-1),_hoisted_8$1={class:"w-full px-12 py-20 grid gird-col-1 items-center gap-x-5 text-[#ebebeb] text-[40px] font-bold"},_hoisted_9$1={class:"flex items-center justify-center space-x-2"},_hoisted_10$1=createBaseVNode("div",{class:"flex-1 flex items-center justify-end"},[createBaseVNode("div",{class:"w-[50px] aspect-[1/1] rounded-full flex items-center justify-center"},[createBaseVNode("img",{src:_imports_0$1,alt:"",class:"w-full h-full object-fill"})])],-1),_hoisted_11$1=createBaseVNode("span",null,"+",-1),_hoisted_12$1={class:"flex-1"},_sfc_main$1=defineComponent({__name:"Claim",props:{claimData:{default:{}}},emits:["update:closeDialog"],setup(v,{emit:s}){const g=v,d=ref(0);return onMounted(()=>{g.claimData&&g.claimData.sxp&&createCounterAnimation(g.claimData.sxp,h=>d.value=h)}),(h,c)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[_hoisted_3$1,_hoisted_4$1,createBaseVNode("div",{onClick:c[0]||(c[0]=p=>s("update:closeDialog")),class:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors cursor-pointer"},_hoisted_6$1),_hoisted_7$1,createBaseVNode("div",_hoisted_8$1,[createBaseVNode("div",_hoisted_9$1,[_hoisted_10$1,_hoisted_11$1,createBaseVNode("span",_hoisted_12$1,toDisplayString(unref(d)),1)])])])]))}}),__nuxt_component_14_lazy=defineAsyncComponent(()=>__vitePreload(()=>import("./BuyTicket.61700a45.js").then(v=>v.B),["./BuyTicket.61700a45.js","./entry.f105df37.js","./entry.4ce58bf5.css","./el-input.b010e971.js","./use-form-item.ecbcfbcd.js","./el-input.c43a23be.css","./el-button.99f697ac.js","./el-button.2e70eb9e.css","./plugin-vueexport-helper.c27b6911.js","./el-overlay.1d307549.js","./verification.fd8b49e2.js","./el-overlay.155e27a7.css","./el-loading.ce515ce7.js","./el-loading.7fcbe426.css","./utils.6576f7a5.js","./ticket.659f1e5e.js","./useContract.b0b1c6d7.js","./commonjsHelpers.042e6b4d.js","./-vite-browser-externalcommonjs-proxy.005f2268.js","./throttle.e6b946ec.js","./tickets.783eba8d.js","./BuyTicket.d6a04076.css"],import.meta.url).then(v=>v.default||v)),_withScopeId=v=>(pushScopeId("data-v-c1039880"),v=v(),popScopeId(),v),_hoisted_1={class:"h-[88vh] max-h-[1000px] grid grid-cols-1 lg:grid-cols-12 gap-6 mx-auto adaptation-padding text-[#EBEBEB] relative"},_hoisted_2={class:"absolute top-2 right-3 cursor-pointer z-50 attribute_box"},_hoisted_3=_withScopeId(()=>createBaseVNode("div",{class:"mb-3 flex items-center flex-wrap gap-4 whitespace-nowrap"},[createBaseVNode("h1",{class:"font-display sm:text-[18px] md:text-[18px] text-3xl xl:text-4xl text-white leading-none tracking-tight"}," EMOCOORDS "),createBaseVNode("span",{class:"font-display sm:text-[18px] md:text-[18px] text-3xl xl:text-4xl text-white/50 leading-none tracking-wider"},"GFACE")],-1)),_hoisted_4={class:"text-[10px] font-mono text-gray-500 mb-6 border-l-2 border-white/20 pl-3 space-y-1"},_hoisted_5={class:"text-white"},_hoisted_6={class:"opacity-50 uppercase"},_hoisted_7={class:"grid grid-cols-3 gap-3 mb-4"},_hoisted_8={class:"w-full min-h-[200px] relative flex flex-col"},_hoisted_9=_withScopeId(()=>createBaseVNode("div",{class:"absolute top-0 left-0 text-[9px] text-gray-600 font-mono tracking-widest z-10"}," EMOTION_ANALYSIS_RADAR ",-1)),_hoisted_10={class:"w-full flex flex-col justify-end mb-6"},_hoisted_11={key:0,class:"flex justify-between items-end"},_hoisted_12=_withScopeId(()=>createBaseVNode("span",{class:"text-[9px] font-mono text-gray-500 uppercase tracking-widest"},"Next BATCH",-1)),_hoisted_13={class:"text-sm text-white"},_hoisted_14={class:"text-gray-300 text-[12px] mt-2"},_hoisted_15={class:"relative pt-4 border-t border-dashed border-white/10"},_hoisted_16={class:"text-[10px] text-gray-400 font-mono leading-relaxed max-w-[90%]"},_hoisted_17=_withScopeId(()=>createBaseVNode("span",{class:"text-white mr-1"},">>>",-1)),_hoisted_18={class:"w-full flex-1 min-h-[400px] border border-white/20 relative group overflow-hidden shadow-2xl attribute"},_hoisted_19={class:"absolute top-[2px] right-1 cursor-pointer z-50 attribute_box"},_hoisted_20={class:"absolute top-6 left-4 z-30"},_hoisted_21={class:"flex items-center gap-2"},_hoisted_22={class:"px-3 py-1 text-[10px] uppercase tracking-widest flex items-center gap-2 clip-corner-both"},_hoisted_23={class:"absolute top-4 right-6 z-30"},_hoisted_24={class:"flex items-center gap-2"},_hoisted_25={class:"text-[10px] font-mono text-gray-400 tracking-wider"},_hoisted_26={class:"px-3 py-1 border border-white/20 bg-black/80 backdrop-blur text-[10px] uppercase tracking-widest flex items-center gap-2 clip-corner-both"},_hoisted_27={key:0,class:"w-full h-full absolute top-0 left-0 flex flex-col items-center justify-center"},_hoisted_28=_withScopeId(()=>createBaseVNode("div",{class:"w-12 h-12 bg-cyan-500/20 rounded-full"},null,-1)),_hoisted_29=[_hoisted_28],_hoisted_30=_withScopeId(()=>createBaseVNode("span",{class:"font-mono text-cyan-500 mt-4 tracking-[0.3em] animate-pulse"},"Please log in",-1)),_hoisted_31={key:0,class:"w-full h-full absolute top-0 left-0 flex items-center justify-center"},_hoisted_32={class:"flex flex-col items-center"},_hoisted_33=_withScopeId(()=>createBaseVNode("span",{class:"font-mono text-cyan-400 tracking-widest text-glow"},"ANALYZING_NEURAL_DATA",-1)),_hoisted_34={class:"grid grid-cols-12 gap-4"},_hoisted_35={class:"col-span-12 md:col-span-8 bg-black/60 border border-white/10 backdrop-blur-sm p-4 relative overflow-hidden"},_hoisted_36=_withScopeId(()=>createBaseVNode("div",{class:"absolute top-0 left-0 w-2 h-2 border-t border-l border-white/30"},null,-1)),_hoisted_37=_withScopeId(()=>createBaseVNode("div",{class:"absolute top-0 right-0 w-2 h-2 border-t border-r border-white/30"},null,-1)),_hoisted_38=_withScopeId(()=>createBaseVNode("div",{class:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/30"},null,-1)),_hoisted_39=_withScopeId(()=>createBaseVNode("div",{class:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-white/30"},null,-1)),_hoisted_40={class:"absolute top-3 left-4 flex items-center gap-2"},_hoisted_41=_withScopeId(()=>createBaseVNode("span",{class:"text-[10px] text-gray-500 uppercase tracking-widest font-mono"}," Neural Waveform Visualization ",-1)),_hoisted_42={class:"w-full h-full min-h-[150px] pt-4"},_hoisted_43={class:"col-span-12 md:col-span-4 bg-black/60 border border-white/10 p-4 relative backdrop-blur-sm"},_hoisted_44={class:"flex flex-col h-full justify-between"},_hoisted_45=_withScopeId(()=>createBaseVNode("span",{class:"relative z-10 text-black"},"Commit",-1)),_hoisted_46={key:0,class:"text-right border-t border-dashed border-white/10 pt-2"},_sfc_main=defineComponent({__name:"audioVisual",setup(v){const s=ref("00 : 00 : 00"),g=ref(null),d=ref(!1),h=ref(!1),c=ref(!1),p=ref(!1),f=ref(!1),u=ref(!1),a=ref(!1);ref(!1);const o=ref(0),r=ref(),e=ref(),t=ref(),n=ref({code:null,content:""}),i=ref(null),l=useUserPinia(),m=useEmotionalDstributionPinia(),y=computed(()=>{var W,K;return((W=t.value)==null?void 0:W.burn_user)===((K=t.value)==null?void 0:K.ticket_limit)||isEmpty(m.getVisionChatData)}),_=computed(()=>{if(isEmpty(m.getVisionChatData))return 0;try{const W=JSON.parse(m.getVisionChatData),K=m.getVideoTotalTime-5;return W.filter(O=>!(Array.isArray(O)&&O.length===7&&O.every(D=>D===null))).length/K*100}catch{return 0}});watch(()=>m.getIsRetest,W=>{}),watch(()=>{var W;return(W=t.value)==null?void 0:W.end},async()=>{i.value&&clearInterval(i.value),N()},{deep:!0});const b=()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),w=W=>{switch(W){case 0:return"text-gray-500";case 1:return"text-green-500";default:return"text-red-500"}},x=W=>{switch(W){case 0:return"Not started";case 1:return"ACTIVE";default:return"END"}},S=()=>{const W=m.getEmotionDetectionStatus,K="w-1.5 h-1.5 rounded-full";switch(W){case 0:return`${K} bg-[#2b2b2b]`;case 1:return`${K} bg-green-500 shadow-[0_0_8px_#22c55e]`;default:return`${K} bg-red-500`}},A=()=>{switch(m.getEmotionDetectionStatus){case 0:return"Detection has not started yet";case 1:return"Detecting";default:return"No face detected"}},T=()=>{const W=m.getCameraPermissions,K="w-1.5 h-1.5 rounded-full";return W?`${K} bg-green-500 shadow-[0_0_8px_#22c55e]`:`${K} bg-red-500`},E=()=>m.getCameraPermissions?"LIVE":"OFFLINE",N=()=>{M(),i.value=setInterval(M,1e3)},M=async()=>{var ae,O;if(!((ae=t.value)!=null&&ae.end))return;const W=Date.now(),K=((O=t.value)==null?void 0:O.end)*1e3-W;if(K>0){const D=Math.floor(K/36e5),I=Math.floor(K%(1e3*60*60)/(1e3*60)),U=Math.floor(K%(1e3*60)/1e3),C=String(D).padStart(2,"0"),G=String(I).padStart(2,"0"),H=String(U).padStart(2,"0");s.value=`${C} : ${G} : ${H}`}else s.value="00 : 00 : 00",setTimeout(()=>{u.value=!0,ne()},2e3)},j=()=>{g.value&&typeof g.value.restartTest=="function"&&g.value.restartTest()},k=async()=>{c.value=!1,j()},F=W=>{e.value=W},L=W=>{r.value=W,p.value=!0},B=async()=>{await ne()},V=async W=>{try{return fetch("https://api.aigaea.net/api/vision/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.getToken}`},body:JSON.stringify(W)}).then(async ae=>{if(!ae.ok)throw new Error("Network response was not ok");return ae.body})}catch(K){throw K}},R=(W,K)=>{switch(n.value.code=W,n.value||(n.value={code:null,content:""}),W){case 400:n.value.content+=K;case 500:o.value=100;break;case 206:n.value.content+=K;break;case 200:o.value=100}},z=W=>{let K=0;return{processedData:W.map(O=>{if(Array.isArray(O)){const D=O.map(I=>I===null||typeof I=="number"&&Math.abs(I)<1e-6?0:I);return D.some(I=>I!==0)&&K++,D}return O}),validCount:K}},q=W=>{const K=[];let ae=0;for(;ae<W.length;){const O=W.indexOf("{",ae);if(O===-1)break;let D=1,I=O+1;for(;I<W.length&&D>0;)W[I]==="{"?D++:W[I]==="}"&&D--,I++;if(D===0)try{const U=W.substring(O,I),C=JSON.parse(U);K.push(C),ae=I}catch{ae=O+1}else break}return{parsed:K,remaining:W.substring(ae)}},Z=async W=>{if(!W)throw new Error("No readable stream found in response");const K=W.getReader(),ae=new TextDecoder("utf-8");let O="";o.value=0;const D=()=>{K.read().then(({done:I,value:U})=>{if(I){O&&q(O).parsed.forEach(G=>{const{code:H,msg:X}=G;R(H,X),H===206?o.value++:H===200&&(o.value=100)}),o.value=100;return}if(U){O+=ae.decode(U,{stream:!0});const C=q(O);O=C.remaining,C.parsed.forEach(G=>{const{code:H,msg:X}=G;R(H,X),m.setIsRetest(!0),H===206?o.value++:H===200&&(o.value=100)})}setTimeout(D,50)}).catch(I=>{o.value=100})};D()},oe=async()=>{var W;try{if(m.getVideoCompleted)return ElMessage.warning("Continue watching the remaining video content");if(isEmpty(e.value))return ElMessage.warning("Please select a ticket");if(_.value<50)return ElMessage.warning("The data collection completeness rate is low");let K;try{K=JSON.parse(m.getVisionChatData)}catch{return ElMessage.error("Invalid data format")}const{processedData:ae}=z(K),O={id:(W=t.value)==null?void 0:W.id,ticket:e.value,datas:ae};o.value=0,n.value={code:null,content:""},f.value=!0,c.value=!0;const D=await V(O);await Z(D)}catch{ElMessage.error("An error occurred during processing")}finally{f.value=!1,e.value="",await ne()}},ne=async()=>{try{const W=await visionList();W.code===200&&(t.value=W.data[0])}catch{ElMessage.error("Failed to load vision data")}finally{u.value=!1}};return onMounted(async()=>{u.value=!0,await ne()}),(W,K)=>{var me,he,ye,fe,ce,we,xe,Ee,Ae,De,Le;const ae=__nuxt_component_0$1,O=_sfc_main$c,D=__nuxt_component_2,I=_sfc_main$a,U=__nuxt_component_3,C=__nuxt_component_5,G=__nuxt_component_6,H=_sfc_main$6,X=__nuxt_component_8,ie=ElButton,$=_sfc_main$4,te=_sfc_main$3,le=__nuxt_component_12,J=_sfc_main$1,Te=__nuxt_component_14_lazy;return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:normalizeClass([[b()?"order-2":"order-0"],"attribute lg:col-span-4 bg-gaea-panel border border-white/10 p-4 flex flex-col justify-between h-full relative clip-corner-br"])},[createBaseVNode("div",_hoisted_2,[createVNode(ae,{onToRefresh:B})]),_hoisted_3,createBaseVNode("div",_hoisted_4,[createBaseVNode("p",null,[createTextVNode("DATASET BATCH "),createBaseVNode("span",_hoisted_5,"#"+toDisplayString((me=unref(t))==null?void 0:me.id),1)]),createBaseVNode("p",null,[createTextVNode("STATUS: "),createBaseVNode("span",{class:normalizeClass(["animate-pulse",w((he=unref(t))==null?void 0:he.status)])},toDisplayString(x((ye=unref(t))==null?void 0:ye.status)),3)]),createBaseVNode("p",_hoisted_6,"NAME: "+toDisplayString(((fe=unref(t))==null?void 0:fe.name)||"-"),1)]),createBaseVNode("div",_hoisted_7,[createVNode(O,{label:"SXP REWARD",value:(ce=unref(t))==null?void 0:ce.total_sxp},null,8,["value"]),createVNode(O,{label:"SP TOKEN",value:(we=unref(t))==null?void 0:we.total_soul},null,8,["value"]),createVNode(O,{label:"USDC POOL",value:((xe=unref(t))==null?void 0:xe.period_usd)/1e6||0},null,8,["value"])]),createBaseVNode("div",_hoisted_8,[_hoisted_9,createVNode(D)]),createBaseVNode("div",_hoisted_10,[createVNode(I,{value:(Ee=unref(t))==null?void 0:Ee.burn_total,max:(Ae=unref(t))==null?void 0:Ae.period_ticket},null,8,["value","max"]),unref(s)!="00 : 00 : 00"?(openBlock(),createElementBlock("div",_hoisted_11,[_hoisted_12,createBaseVNode("div",_hoisted_13,[createBaseVNode("span",_hoisted_14,toDisplayString(unref(s)),1)])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_15,[createBaseVNode("p",_hoisted_16,[_hoisted_17,createTextVNode(" Each round packages "+toDisplayString((De=unref(t))==null?void 0:De.period_ticket)+" sets of facial emotion data. Highest quality contributions split the reward pool. ",1)]),createBaseVNode("div",{class:"absolute bottom-0 right-0 cursor-pointer",onClick:K[0]||(K[0]=Oe=>d.value=!0)},[createVNode(U,{class:"text-gray-400 hover:text-white"})])])],2),createBaseVNode("div",{class:normalizeClass([[b()?"order-1":"order-0"],"lg:col-span-8 flex flex-col gap-4"])},[createBaseVNode("div",_hoisted_18,[createBaseVNode("div",_hoisted_19,[createVNode(ae,{onToRefresh:j})]),createVNode(C),createBaseVNode("div",_hoisted_20,[createBaseVNode("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("div",{class:normalizeClass(S())},null,2),createTextVNode(" "+toDisplayString(A()),1)])])]),createBaseVNode("div",_hoisted_23,[createBaseVNode("div",_hoisted_24,[createBaseVNode("span",_hoisted_25,toDisplayString((Le=unref(m).getCameraDevice)==null?void 0:Le.label),1),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",{class:normalizeClass(T())},null,2),createTextVNode(" "+toDisplayString(E()),1)])])]),("isEmpty"in W?W.isEmpty:unref(isEmpty))(unref(l).getToken)?(openBlock(),createElementBlock("div",_hoisted_27,[createBaseVNode("div",{onClick:K[1]||(K[1]=Oe=>("navigateTo"in W?W.navigateTo:unref(navigateTo))("/login")),class:"w-16 h-16 border-2 border-cyan-500 rounded-full flex items-center justify-center animate-pulse cursor-pointer"},_hoisted_29),_hoisted_30])):(openBlock(),createElementBlock(Fragment,{key:1},[unref(u)?(openBlock(),createElementBlock("div",_hoisted_31,[createBaseVNode("div",_hoisted_32,[createVNode(unref(RefreshCw),{class:"animate-spin mb-4 text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",size:40}),_hoisted_33])])):(openBlock(),createBlock(G,{key:1,data:unref(t),ref_key:"emotionDetectionRef",ref:g},null,8,["data"]))],64))]),createBaseVNode("div",_hoisted_34,[createBaseVNode("div",_hoisted_35,[_hoisted_36,_hoisted_37,_hoisted_38,_hoisted_39,createBaseVNode("div",_hoisted_40,[createVNode(unref(Activity),{size:12,class:"text-gray-500"}),_hoisted_41]),createBaseVNode("div",_hoisted_42,[createVNode(H,{ref:"chartRef"},null,512)])]),createBaseVNode("div",_hoisted_43,[createBaseVNode("div",_hoisted_44,[createVNode(X,{"onUpdate:selectTickeSuccess":F,"ticket-cdk":unref(e),"onUpdate:openBuyTicket":K[2]||(K[2]=Oe=>a.value=!0)},null,8,["ticket-cdk"]),createVNode(ie,{loading:unref(f),disabled:unref(y),color:"#ffffff7d",onClick:K[3]||(K[3]=Oe=>("throttle"in W?W.throttle:unref(throttle))(()=>{oe()})),class:"w-full text-black py-2 cursor-pointer font-display text-xl uppercase tracking-[0.2em] hover:bg-gray-200 transition-all duration-300 mb-2 clip-corner-both relative overflow-hidden group"},{default:withCtx(()=>[createBaseVNode("div",{class:"absolute top-0 left-0 animated-progress-bar h-full bg-white transition-all duration-300 ease-out",style:normalizeStyle({width:unref(_)+"%"})},null,4),_hoisted_45]),_:1},8,["loading","disabled"]),("isEmpty"in W?W.isEmpty:unref(isEmpty))(unref(l).getToken)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_46,[createBaseVNode("div",{onClick:K[4]||(K[4]=Oe=>h.value=!0),class:"text-[9px] cursor-pointer text-gray-500 hover:text-white flex items-center justify-end gap-1 transition-colors font-mono uppercase"},[createTextVNode(" Details "),createVNode(unref(ChevronRight),{size:10})])]))])])])],2),unref(d)?(openBlock(),createBlock($,{key:0,"onUpdate:closeDialog":K[5]||(K[5]=Oe=>d.value=!1),data:unref(t)},null,8,["data"])):createCommentVNode("",!0),unref(h)?(openBlock(),createBlock(te,{key:1,"onUpdate:closeDialog":K[6]||(K[6]=Oe=>h.value=!1),data:unref(t),"onUpdate:claim":L},null,8,["data"])):createCommentVNode("",!0),unref(c)?(openBlock(),createBlock(le,{key:2,"onUpdate:closeDialog":k,"ai-analysis-results":unref(n),loading:unref(f),data:unref(t),progress:unref(o)},null,8,["ai-analysis-results","loading","data","progress"])):createCommentVNode("",!0),unref(p)?(openBlock(),createBlock(J,{key:3,"onUpdate:closeDialog":K[7]||(K[7]=Oe=>p.value=!1),"claim-data":unref(r)},null,8,["claim-data"])):createCommentVNode("",!0),createVNode(Te,{"dialog-visible":unref(a),"onUpdate:closeDialog":K[8]||(K[8]=Oe=>a.value=!1)},null,8,["dialog-visible"])])}}}),audioVisual_vue_vue_type_style_index_0_scoped_c1039880_lang="",audioVisual=_export_sfc(_sfc_main,[["__scopeId","data-v-c1039880"]]);export{audioVisual as default};
