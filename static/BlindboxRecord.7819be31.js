import{_ as L,b as J,c as V,d as A}from"./el-pagination.01abb38e.js";import{E as P,_ as U}from"./el-overlay.1d307549.js";import{d as X,r as h,z as $,J as y,o as s,C as f,x as r,v as c,b as m,D as j,e as a,B as b,t as d,c as p,cD as q}from"./entry.f105df37.js";import"./el-checkbox.00032e92.js";import"./el-popper.ac949242.js";import"./el-input.b010e971.js";import{v as F}from"./el-loading.ce515ce7.js";import{k as G}from"./dict.6e5b07a6.js";import{_ as H}from"./plugin-vueexport-helper.c27b6911.js";import"./use-form-item.ecbcfbcd.js";import"./verification.fd8b49e2.js";import"./debounce.e1ecbbcb.js";import"./validator.59a6b518.js";import"./commonjsHelpers.042e6b4d.js";import"./-initCloneObject.0972cb9e.js";const K={class:"max-h-[90vh] overflow-hidden flex flex-col"},M={class:"w-full mt-4"},Q={key:0},W={key:1},Y={key:2},Z={key:3},ee={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},te=X({__name:"BlindboxRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(oe,{emit:v}){const B=h([]),i=h(!1),k=$(),_=(e,l)=>e+" "+l,E=e=>{const l=e>1?"Tickets":"Ticket";return e+" "+l},o=y({page:1,limit:10}),n=y(JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||JSON.stringify({content:[],totalElements:0}))),x=()=>{o.page=1,o.limit=10,n.content=[],n.totalElements=0,v("update:closeDialog")},D=e=>{o.page=e,u()},S=e=>{o.limit=e,u()},N=()=>{n.content=JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||"[]").content,n.totalElements=JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||"[]").totalElements,u()},u=async()=>{try{if(!k.getToken)return;if(B.value){i.value=!0;const e=await q(o.page,o.limit);i.value=!1,e&&e&&e.code===200&&(n.content=e.data,n.totalElements=e.total,localStorage.setItem("TABLE_BIND_BOX",JSON.stringify({content:e.data,totalElements:e.total})))}}catch{i.value=!1}};return(e,l)=>{const O=L,g=J,C=V,T=A,z=P,I=U,R=F;return s(),f(I,null,{default:r(()=>[c(z,{class:"border-box",draggable:"","model-value":e.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"rgba(255, 255, 255, 0.08)","backdrop-filter":"blur(15px)",border:"none","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:x,onOpen:N},{default:r(()=>{var w;return[m("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:x}),m("div",K,[m("div",M,[j((s(),f(C,{data:a(n).content,style:{width:"100%"},"max-height":"400px"},{empty:r(()=>[a(i)?b("",!0):(s(),f(O,{key:0,title:"No records available at the moment"}))]),default:r(()=>[c(g,{prop:"updated",label:"Date","min-width":"130px",align:"center"}),c(g,{prop:"type",label:"Type","min-width":"130px",align:"center"},{default:r(t=>[m("span",null,d(("boxRewardSource"in e?e.boxRewardSource:a(G))(t.row.type)),1)]),_:1}),c(g,{prop:"usd",label:"Reward","min-width":"130px",align:"center"},{default:r(t=>[t.row.usd>0?(s(),p("span",Q,d(_(t.row.usd,"USD")),1)):t.row.core>0?(s(),p("span",W,d(_(t.row.core*3,"Exp")),1)):t.row.soul>0?(s(),p("span",Y,d(_(t.row.soul,"Soul")),1)):t.row.ticket>0?(s(),p("span",Z,d(E(t.row.ticket)),1)):b("",!0)]),_:1})]),_:1},8,["data"])),[[R,a(i)]])]),((w=a(n).content)==null?void 0:w.length)!==0?(s(),p("div",ee,[c(T,{"current-page":a(o).page,"onUpdate:currentPage":l[0]||(l[0]=t=>a(o).page=t),background:"",size:"small","page-size":a(o).limit,"onUpdate:pageSize":l[1]||(l[1]=t=>a(o).limit=t),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:a(n).totalElements,onCurrentChange:D,onSizeChange:S},null,8,["current-page","page-size","total"])])):b("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});const xe=H(te,[["__scopeId","data-v-94bd29ea"]]);export{xe as default};
